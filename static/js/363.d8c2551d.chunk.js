"use strict";(self.webpackChunkemojifi=self.webpackChunkemojifi||[]).push([[363],{70712:(i,t,s)=>{s.d(t,{kg:()=>l,Y_:()=>A,wz:()=>v,ml:()=>m,yg:()=>f,Up:()=>C,oT:()=>w,uI:()=>S,vl:()=>y,lC:()=>D,_H:()=>b,TK:()=>p,Dw:()=>u});var e=s(66220);const c=(0,s(90815).Wp)({apiKey:"AIzaSyDObaXpbUavftTDCAhFmn23akCVpB4cH80",authDomain:"emofi-899d2.firebaseapp.com",projectId:"emofi-899d2",storageBucket:"emofi-899d2.appspot.com",messagingSenderId:"1099226012033",appId:"1:1099226012033:web:2f45b63625daf850bc7080",measurementId:"G-JLXM3H2L66"}),a=(0,e.aU)(c);var o=s(44456),r=s(59051),n=s.n(r),d=s(41397);const A=async()=>{try{let i;const t=(0,e.H9)(a,"configs","configs"),s=await(0,e.x7)(t);return s.exists()&&(i=s.data()),i}catch(i){console.error("Error getUser: ",i)}},l=async i=>{let{id:t,referralId:s="",coinReferral:c=0,username:r,emoFiCoins:n=0}=i;try{const i=(new Date).toISOString().slice(0,10).replace("-","").replace("-","");await(0,e.BN)((0,e.H9)(a,"users","".concat(t)),{id:"".concat(t),username:r,emoFiCoins:n,scores:0,bestGoal:0,numAds:1,numClaimDay:0,DAYS:o.qn,language:"en",faceEmo:"S0",emojis:["S0"],anys:[],skills:[],cards:[],task:[],referrals:[],referralId:s,coinReferral:c,expDateAds:i,createdAt:new Date,updateAt:new Date})}catch(d){console.error("Error createUser: ",d)}},v=async i=>{try{let t;const s=(0,e.H9)(a,"users","".concat(i)),c=await(0,e.x7)(s);return c.exists()&&(t=c.data()),t}catch(t){console.error("Error getUser: ",t)}},m=async i=>{let{id:t,cursor:s=0}=i;try{let i=[];const s=(0,e.P)((0,e.rJ)(a,"users"),(0,e.My)("createdAt","desc"),(0,e._M)("referralId","==",t));return(await(0,e.GG)(s)).forEach((t=>{const s=t.data();i.push({id:s.id,username:s.username,referralId:s.referralId,dayDisCoins:s.dayDisCoins,coinReferral:s.coinReferral})})),i}catch(c){console.error("Error getReferrals: ",c)}},u=async i=>{let{id:t,cursor:s=0}=i;try{const i=n()(new Date).format(o.Yq);let s=[];const c=(0,e.P)((0,e.rJ)(a,"users"),(0,e.My)("createdAt","desc"),(0,e._M)("referralId","==",t));return(await(0,e.GG)(c)).forEach((async t=>{const s=t.data();let c=s.dayDisCoins?s.dayDisCoins:null;c&&(c={},c[i]=s.dayDisCoins[i]?s.dayDisCoins[i]:0),c&&(0,e.mZ)((0,e.H9)(a,"users","".concat(s.id)),{dayDisCoins:c,updateAt:new Date})})),s}catch(c){console.error("Error getReferrals: ",c)}},p=async i=>{let{id:t,emoFiCoins:s,dayDisCoins:c,scores:o,bestGoal:r,faceEmo:n,numAds:A,expDateAds:l,numClaimDay:v,transactionId:m}=i;try{let i={};d.isNumber(s)&&(i={...i,emoFiCoins:s}),d.isNumber(o)&&(i={...i,scores:o}),d.isNumber(r)&&(i={...i,bestGoal:r}),d.isNumber(A)&&(i={...i,numAds:A}),d.isNumber(l)&&(i={...i,expDateAds:l}),d.isNumber(v)&&(i={...i,numClaimDay:v}),n&&(i={...i,faceEmo:n}),m&&(i={...i,transactionId:m,updateAtTrans:"PAY_".concat(new Date)}),c&&(i={...i,dayDisCoins:c}),await(0,e.mZ)((0,e.H9)(a,"users","".concat(t)),{...i,updateAt:new Date})}catch(u){console.error("Error updateCoinsUser: ",u)}},y=async i=>{let{id:t,referrals:s}=i;try{await(0,e.mZ)((0,e.H9)(a,"users","".concat(t)),{referrals:s,updateAt:new Date})}catch(c){console.error("Error updateCoinsUser: ",c)}},S=async i=>{let{id:t,emojis:s}=i;try{await(0,e.mZ)((0,e.H9)(a,"users","".concat(t)),{emojis:s,updateAt:new Date})}catch(c){console.error("Error updateCoinsUser: ",c)}},f=async i=>{let{id:t,anys:s}=i;try{await(0,e.mZ)((0,e.H9)(a,"users","".concat(t)),{anys:s,updateAt:new Date})}catch(c){console.error("Error updateCoinsUser: ",c)}},D=async i=>{let{id:t,skills:s}=i;try{await(0,e.mZ)((0,e.H9)(a,"users","".concat(t)),{skills:s,updateAt:new Date})}catch(c){console.error("Error updateCoinsUser: ",c)}},C=async i=>{let{id:t,cards:s}=i;try{await(0,e.mZ)((0,e.H9)(a,"users","".concat(t)),{cards:s,updateAt:new Date})}catch(c){console.error("Error updateCoinsUser: ",c)}},w=async i=>{let{id:t,days:s}=i;try{await(0,e.mZ)((0,e.H9)(a,"users","".concat(t)),{DAYS:s,updateAt:new Date})}catch(c){console.error("Error updateCoinsUser: ",c)}},b=async i=>{let{id:t,tasks:s}=i;try{await(0,e.mZ)((0,e.H9)(a,"users","".concat(t)),{tasks:s,updateAt:new Date})}catch(c){console.error("Error updateTaskUser: ",c)}}},33246:(i,t,s)=>{s.d(t,{KF:()=>n,ZO:()=>r,aj:()=>A,ei:()=>o,tX:()=>d,yG:()=>c,yT:()=>a});var e=s(24451);const c=(0,e.j)((()=>Promise.all([s.e(373),s.e(327),s.e(58),s.e(483)]).then(s.bind(s,68483))),(i=>i.ModalPause)),a=(0,e.j)((()=>Promise.all([s.e(373),s.e(796),s.e(610),s.e(985)]).then(s.bind(s,20985))),(i=>i.ModalShop)),o=(0,e.j)((()=>Promise.all([s.e(373),s.e(796),s.e(900)]).then(s.bind(s,61519))),(i=>i.ModalCard)),r=(0,e.j)((()=>Promise.all([s.e(373),s.e(796),s.e(224)]).then(s.bind(s,224))),(i=>i.ModalReward)),n=(0,e.j)((()=>Promise.all([s.e(373),s.e(796),s.e(327),s.e(727),s.e(433)]).then(s.bind(s,44433))),(i=>i.ModalFriend)),d=(0,e.j)((()=>Promise.all([s.e(373),s.e(796),s.e(750)]).then(s.bind(s,79750))),(i=>i.ModalFriendCoin)),A=(0,e.j)((()=>Promise.all([s.e(373),s.e(825)]).then(s.bind(s,30825))),(i=>i.ModalLoading))},44456:(i,t,s)=>{s.d(t,{$7:()=>n,M3:()=>A,Tj:()=>r,Ww:()=>o,Yq:()=>c,eY:()=>a,fv:()=>l,lm:()=>e,qn:()=>v,rv:()=>d});const e={RED:"#f43f5e",GREEN:"#22c55e",BLUE:"#0ea5e9",VIOLET:"#a855f7",YELLOW:"#fde047"},c="YYYYMMDD",a=3.5,o=3,r=[e.GREEN,e.RED,e.BLUE,e.VIOLET],n=[{star:0,id:"S0",coin:0,isActive:!0},{star:10,id:"S1",coin:100,isActive:!1},{star:10,id:"S2",coin:100,isActive:!1},{star:10,id:"S3",coin:100,isActive:!1},{star:10,id:"S4",coin:100,isActive:!1},{star:10,id:"S5",coin:100,isActive:!1},{star:10,id:"S6",coin:100,isActive:!1},{star:10,id:"S7",coin:100,isActive:!1},{star:10,id:"S8",coin:100,isActive:!1},{star:10,id:"S9",coin:100,isActive:!1},{star:10,id:"S10",coin:100,isActive:!1},{star:10,id:"S11",coin:100,isActive:!1},{star:10,id:"S12",coin:100,isActive:!1},{star:10,id:"S13",coin:100,isActive:!1},{star:10,id:"S14",coin:100,isActive:!1},{star:10,id:"S15",coin:100,isActive:!1},{star:10,id:"S16",coin:100,isActive:!1},{star:10,id:"S17",coin:100,isActive:!1},{star:10,id:"S18",coin:100,isActive:!1},{star:10,id:"S19",coin:100,isActive:!1},{star:10,id:"S20",coin:100,isActive:!1},{star:10,id:"S21",coin:100,isActive:!1},{star:10,id:"S22",coin:100,isActive:!1},{star:10,id:"S23",coin:100,isActive:!1},{star:10,id:"S24",coin:100,isActive:!1},{star:10,id:"S25",coin:100,isActive:!1},{star:10,id:"S26",coin:100,isActive:!1},{star:10,id:"S27",coin:100,isActive:!1},{star:10,id:"S28",coin:100,isActive:!1},{star:10,id:"S29",coin:100,isActive:!1},{star:15,id:"S30",coin:200,isActive:!1},{star:15,id:"S31",coin:200,isActive:!1},{star:15,id:"S32",coin:200,isActive:!1},{star:15,id:"S33",coin:200,isActive:!1},{star:15,id:"S34",coin:200,isActive:!1},{star:15,id:"S35",coin:200,isActive:!1},{star:15,id:"S36",coin:200,isActive:!1},{star:15,id:"S37",coin:200,isActive:!1},{star:15,id:"S38",coin:200,isActive:!1},{star:15,id:"S39",coin:200,isActive:!1},{star:20,id:"S40",coin:300,isActive:!1},{star:20,id:"S41",coin:300,isActive:!1},{star:20,id:"S42",coin:300,isActive:!1},{star:20,id:"S43",coin:300,isActive:!1},{star:20,id:"S44",coin:300,isActive:!1},{star:20,id:"S45",coin:300,isActive:!1},{star:20,id:"S46",coin:300,isActive:!1},{star:20,id:"S47",coin:300,isActive:!1},{star:20,id:"S48",coin:300,isActive:!1},{star:20,id:"S49",coin:300,isActive:!1},{star:30,id:"S50",coin:400,isActive:!1},{star:30,id:"S51",coin:400,isActive:!1},{star:30,id:"S52",coin:400,isActive:!1},{star:30,id:"S53",coin:400,isActive:!1},{star:30,id:"S54",coin:400,isActive:!1},{star:30,id:"S55",coin:400,isActive:!1},{star:30,id:"S56",coin:400,isActive:!1},{star:30,id:"S57",coin:400,isActive:!1},{star:30,id:"S58",coin:400,isActive:!1},{star:30,id:"S59",coin:400,isActive:!1},{star:40,id:"S60",coin:500,isActive:!1},{star:40,id:"S61",coin:500,isActive:!1},{star:40,id:"S62",coin:500,isActive:!1},{star:50,id:"S63",coin:1e3,isActive:!1},{star:50,id:"S64",coin:1e3,isActive:!1},{star:50,id:"S65",coin:1e3,isActive:!1}],d=[{star:3,id:"A0",coin:25,isActive:!1},{star:5,id:"A1",coin:50,isActive:!1},{star:7,id:"A2",coin:75,isActive:!1},{star:10,id:"A3",coin:100,isActive:!1},{star:10,id:"A4",coin:125,isActive:!1},{star:10,id:"A5",coin:150,isActive:!1},{star:10,id:"A6",coin:175,isActive:!1},{star:15,id:"A7",coin:200,isActive:!1},{star:15,id:"A8",coin:225,isActive:!1},{star:15,id:"A9",coin:250,isActive:!1},{star:15,id:"A10",coin:275,isActive:!1},{star:20,id:"A11",coin:300,isActive:!1},{star:20,id:"A12",coin:325,isActive:!1},{star:20,id:"A13",coin:350,isActive:!1},{star:20,id:"A14",coin:375,isActive:!1},{star:30,id:"A15",coin:400,isActive:!1},{star:30,id:"A16",coin:425,isActive:!1},{star:30,id:"A17",coin:450,isActive:!1},{star:30,id:"A18",coin:475,isActive:!1},{star:40,id:"A19",coin:500,isActive:!1},{star:40,id:"A20",coin:525,isActive:!1},{star:40,id:"A21",coin:550,isActive:!1},{star:40,id:"A22",coin:575,isActive:!1},{star:40,id:"A23",coin:600,isActive:!1},{star:40,id:"A24",coin:625,isActive:!1},{star:40,id:"A25",coin:650,isActive:!1},{star:40,id:"A26",coin:675,isActive:!1},{star:40,id:"A27",coin:700,isActive:!1},{star:40,id:"A28",coin:725,isActive:!1},{star:40,id:"A29",coin:750,isActive:!1},{star:40,id:"A30",coin:775,isActive:!1},{star:40,id:"A31",coin:800,isActive:!1},{star:40,id:"A32",coin:825,isActive:!1},{star:40,id:"A33",coin:850,isActive:!1},{star:40,id:"A34",coin:875,isActive:!1},{star:40,id:"A35",coin:900,isActive:!1},{star:40,id:"A36",coin:925,isActive:!1},{star:40,id:"A37",coin:950,isActive:!1},{star:40,id:"A38",coin:975,isActive:!1},{star:50,id:"A39",coin:1e3,isActive:!1},{star:50,id:"A40",coin:1025,isActive:!1},{star:50,id:"A41",coin:1050,isActive:!1},{star:50,id:"A42",coin:1075,isActive:!1},{star:50,id:"A43",coin:1100,isActive:!1},{star:50,id:"A44",coin:1150,isActive:!1},{star:50,id:"A45",coin:1200,isActive:!1},{star:50,id:"A46",coin:1225,isActive:!1},{star:50,id:"A47",coin:1250,isActive:!1},{star:50,id:"A48",coin:1275,isActive:!1},{star:50,id:"A49",coin:1300,isActive:!1},{star:50,id:"A50",coin:1325,isActive:!1},{star:50,id:"A51",coin:1350,isActive:!1},{star:50,id:"A52",coin:1375,isActive:!1},{star:50,id:"A53",coin:1400,isActive:!1},{star:50,id:"A54",coin:1425,isActive:!1},{star:50,id:"A55",coin:1450,isActive:!1},{star:50,id:"A56",coin:1475,isActive:!1},{star:50,id:"A57",coin:1500,isActive:!1},{star:50,id:"A58",coin:1525,isActive:!1},{star:50,id:"A59",coin:1550,isActive:!1},{star:50,id:"A60",coin:1575,isActive:!1},{star:50,id:"A61",coin:1600,isActive:!1},{star:50,id:"A62",coin:1625,isActive:!1},{star:50,id:"A63",coin:1650,isActive:!1},{star:50,id:"A64",coin:1675,isActive:!1},{star:50,id:"A65",coin:1700,isActive:!1},{star:50,id:"A66",coin:1725,isActive:!1},{star:50,id:"A67",coin:1750,isActive:!1},{star:50,id:"A68",coin:1775,isActive:!1},{star:50,id:"A69",coin:1800,isActive:!1},{star:50,id:"A70",coin:1825,isActive:!1},{star:50,id:"A71",coin:1850,isActive:!1},{star:50,id:"A72",coin:1875,isActive:!1},{star:50,id:"A73",coin:1900,isActive:!1},{star:50,id:"A74",coin:1925,isActive:!1},{star:50,id:"A75",coin:1950,isActive:!1},{star:50,id:"A76",coin:1975,isActive:!1},{star:50,id:"A77",coin:2e3,isActive:!1},{star:50,id:"A78",coin:2250,isActive:!1},{star:50,id:"A79",coin:2500,isActive:!1},{star:50,id:"A80",coin:2750,isActive:!1},{star:50,id:"A81",coin:3e3,isActive:!1},{star:50,id:"A82",coin:3250,isActive:!1},{star:50,id:"A83",coin:3500,isActive:!1},{star:50,id:"A84",coin:3750,isActive:!1},{star:50,id:"A85",coin:4e3,isActive:!1},{star:50,id:"A86",coin:4250,isActive:!1},{star:50,id:"A87",coin:4500,isActive:!1},{star:50,id:"A88",coin:4750,isActive:!1},{star:50,id:"A89",coin:5e3,isActive:!1},{star:50,id:"A90",coin:5250,isActive:!1},{star:50,id:"A91",coin:5500,isActive:!1},{star:50,id:"A92",coin:5750,isActive:!1},{star:50,id:"A93",coin:6e3,isActive:!1},{star:50,id:"A94",coin:7e3,isActive:!1},{star:50,id:"A95",coin:8e3,isActive:!1},{star:50,id:"A96",coin:9e3,isActive:!1},{star:50,id:"A97",coin:1e4,isActive:!1},{star:50,id:"A98",coin:2e4,isActive:!1}],A=[{id:"K1",type:"SKILL",title:"REVIVAL",description:'Must activated 5 "Emoji" and \n15 "Any" items to unlock the skill',descriptionUnLook:"15 coins for 1 skill use",color:"#f472b6",emojis:5,anys:15,coin:15,isActive:!1},{id:"K2",type:"SKILL",title:"DEFENSE",description:'Must activated 15 "Emoji" and \n30 "Any" items to unlock the skill',descriptionUnLook:"20 coins for 1 skill use",color:"#fb923c",emojis:15,anys:30,coin:20,isActive:!1},{id:"K3",type:"SKILL",title:"ATTACK",description:'Must activated 30 "Emoji" and \n60 "Any" items to unlock the skill',descriptionUnLook:"25 coins for 1 skill use",color:"#34d399",emojis:30,anys:60,coin:25,isActive:!1}],l=[{id:"C1",type:"CARD",title:"KEY",description:'The card is hidden in "Emoji", look for it',descriptionUnLook:"Congratulations",emojis:20,anys:0,bColor:"#e2e8f0",isActive:!1},{id:"C2",type:"CARD",title:"DIAMOND",description:'The card is hidden in "Any", look for it',descriptionUnLook:"Congratulations",emojis:0,anys:70,bColor:"#38bdf8",isActive:!1},{id:"C3",type:"CARD",title:"MEDAL",description:"Let's get 10M scores, You won the medal of the best",descriptionUnLook:"Congratulations",scoresEmoji:1e4,scoresAny:5e3,bColor:"#fde047",isActive:!1}],v=[{id:0,title:"Day 1",coins:20,status:"",day:0},{id:1,title:"Day 2",coins:30,status:"",day:0},{id:2,title:"Day 3",coins:40,status:"",day:0},{id:3,title:"Day 4",coins:50,status:"",day:0},{id:4,title:"Day 5",coins:60,status:"",day:0},{id:5,title:"Day 6",coins:70,status:"",day:0},{id:6,title:"Day 7",coins:100,status:"",day:0}]},10363:(i,t,s)=>{s.r(t),s.d(t,{HomePage:()=>E});var e=s(9950),c=s(13253),a=s(63247);const o=(0,s(24451).j)((()=>Promise.all([s.e(373),s.e(796),s.e(250),s.e(188),s.e(672)]).then(s.bind(s,39672))),(i=>i.Play));var r=s(22238),n=s(70712),d=s(42691),A=s(33246),l=s(44414);const v=s(39236),m=s(43082),u=s(59918),p=s(78576),y=s(7779),S=s(38899),f=s(48298),D=s(40029),C=s(70040),w=s(64765);let b=!1;function E(){const{user:i,configs:t}=e.useContext(r.j8),{setUser:s,setConfigs:E}=e.useContext(r.LN),[h,k]=e.useState(!i),[g,j]=e.useState(b),[L,{stop:U}]=(0,c.A)(w,{volume:.25,onend:()=>Y()}),[x]=(0,c.A)(p),[P]=(0,c.A)(u),[I]=(0,c.A)(m),[M]=(0,c.A)(v),[F]=(0,c.A)(y),[R]=(0,c.A)(f),[T]=(0,c.A)(D),[H]=(0,c.A)(C),[_]=(0,c.A)(S);(0,e.useEffect)((()=>{window.scrollTo(0,0),N()}),[]),(0,e.useEffect)((()=>(L(),()=>{U()})),[L,U]),(0,e.useEffect)((()=>{L()}),[g]);const Y=()=>{b=!b,j(b)},N=async()=>{var e;let c=t;t||(c=await(0,n.Y_)(),E(c));const a=null===(e=window.Telegram)||void 0===e?void 0:e.WebApp;if(a&&!i){a.ready();const i=a.initDataUnsafe.user,t=a.initDataUnsafe.start_param;if(i){let e={id:i.id,username:"".concat(i.last_name," ").concat(i.first_name),emoFiCoins:0};const a=await(0,n.wz)(e.id);if(a)e={...a,username:"".concat(i.last_name," ").concat(i.first_name)};else{if(t){const i=await(0,n.ml)({id:t,cursor:0});let s=c.coinAddFriend+i.length*c.disFriend;s>c.maxCoinAddFriend&&(s=c.maxCoinAddFriend),e={...e,referralId:t,coinReferral:s}}await(0,n.kg)(e);const s=new d.cC(c.tokenApp),a={reply_markup:{inline_keyboard:[[{text:"Play Now!",web_app:{url:c.WEL_URL}}]]}};s.api.sendMessage(i.id,"Welcome! Play game EmoTON using the button below",a),s.start()}s(e)}if(!c.isTest){let i={id:"6838810951",username:"Friend 4"};const t=await(0,n.wz)(i.id);if(t)i={...t};else{let t="7362249448";if(t){const s=await(0,n.ml)({id:t,cursor:0});console.log("resReferrals ",s);let e=c.coinAddFriend+s.length*c.disFriend;e>c.maxCoinAddFriend&&(e=c.maxCoinAddFriend),console.log("_coinAddFriend ",e),i={...i,referralId:t,coinReferral:e}}console.log("Create User"),await(0,n.kg)(i)}s(i)}}k(!1)};return(0,l.jsxs)(a.az,{id:"myCanvasContainer",children:[(0,l.jsx)(o,{onPlayDieSound:()=>{M()},onPlayFoodSound:()=>{P()},onPlayGateSound:()=>{F()},onPlayDingSound:()=>{I()},onPlaySkill1Sound:()=>{R()},onPlaySkill2Sound:()=>{T()},onPlaySkill3Sound:()=>{H()},onPlayRewardSound:()=>{_()},onPlayGameSound:()=>{x()}}),(0,l.jsx)(A.aj,{isOpen:h})]})}},39236:(i,t,s)=>{i.exports=s.p+"static/media/die.f2c64d855f133657922f.mp3"},43082:(i,t,s)=>{i.exports=s.p+"static/media/ding.4bf3338b447992c9a6c5.mp3"},59918:(i,t,s)=>{i.exports=s.p+"static/media/food.51b52a8b56f4cf83b4b4.mp3"},7779:(i,t,s)=>{i.exports=s.p+"static/media/gate.ca4cbadc5fc95f3ebeb3.mp3"},38899:(i,t,s)=>{i.exports=s.p+"static/media/reward.af4b1b3219946f13cd56.mp3"},48298:(i,t,s)=>{i.exports=s.p+"static/media/skill1.7d24d089ca0c265c2428.mp3"},40029:(i,t,s)=>{i.exports=s.p+"static/media/skill2.d0bd42ecb09ed455d481.mp3"},70040:(i,t,s)=>{i.exports=s.p+"static/media/skill3.08b92fac479612922a17.mp3"},64765:(i,t,s)=>{i.exports=s.p+"static/media/song.7c44a1d487c4eb217d6a.mp3"}}]);