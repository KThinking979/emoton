/*! For license information please see 452.2be44c8a.chunk.js.LICENSE.txt */
(self.webpackChunkemoton=self.webpackChunkemoton||[]).push([[452],{89061:(t,e,n)=>{"use strict";n.d(e,{FA:()=>_,Fy:()=>d,Ku:()=>E,T9:()=>h,Uj:()=>o,ZQ:()=>p,bD:()=>b,cY:()=>f,eX:()=>y,g:()=>v,nr:()=>g,yU:()=>l,zW:()=>m});const r=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const e=t[i],s=i+1<t.length,o=s?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,c=e>>2,l=(3&e)<<4|o>>4;let h=(15&o)<<2|u>>6,f=63&u;a||(f=64,s||(h=64)),r.push(n[c],n[l],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const e=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const a=i<t.length?n[t.charAt(i)]:64;++i;const u=i<t.length?n[t.charAt(i)]:64;if(++i,null==e||null==o||null==a||null==u)throw new s;const c=e<<2|o>>4;if(r.push(c),64!==a){const t=o<<4&240|a>>2;if(r.push(t),64!==u){const t=a<<6&192|u;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class s extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(t){return function(t){const e=r(t);return i.encodeByteArray(e,!0)}(t).replace(/\./g,"")},a=function(t){try{return i.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const u=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,c=()=>{try{return u()||(()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",PUBLIC_URL:"/emoton",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&a(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(t))}},l=t=>{const e=(t=>{var e,n;return null===(n=null===(e=c())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]},h=()=>{var t;return null===(t=c())||void 0===t?void 0:t.config};class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function d(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(s)),""].join(".")}function p(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function g(){return!function(){var t;const e=null===(t=c())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function m(){try{return"object"===typeof indexedDB}catch(t){return!1}}function y(){return new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}}))}class v extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_.prototype.create)}}class _{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t){const e=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(t),r=this.errors[t],i=r?function(t,e){return t.replace(w,((t,n)=>{const r=e[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,e):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new v(n,s,e)}}const w=/\{\$([^}]+)}/g;function b(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],s=e[i];if(S(n)&&S(s)){if(!b(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function S(t){return null!==t&&"object"===typeof t}function E(t){return t&&t._delegate?t._delegate:t}},41397:function(t,e,n){var r;t=n.nmd(t),function(){var i,s="Expected a function",o="__lodash_hash_undefined__",a="__lodash_placeholder__",u=16,c=32,l=64,h=128,f=256,d=1/0,p=9007199254740991,g=NaN,m=4294967295,y=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",c],["partialRight",l],["rearg",f]],v="[object Arguments]",_="[object Array]",w="[object Boolean]",b="[object Date]",S="[object Error]",E="[object Function]",T="[object GeneratorFunction]",D="[object Map]",k="[object Number]",I="[object Object]",C="[object Promise]",A="[object RegExp]",N="[object Set]",M="[object String]",x="[object Symbol]",O="[object WeakMap]",R="[object ArrayBuffer]",L="[object DataView]",P="[object Float32Array]",F="[object Float64Array]",V="[object Int8Array]",U="[object Int16Array]",j="[object Int32Array]",B="[object Uint8Array]",Y="[object Uint8ClampedArray]",q="[object Uint16Array]",z="[object Uint32Array]",W=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,K=/&(?:amp|lt|gt|quot|#39);/g,Q=/[&<>"']/g,X=RegExp(K.source),J=RegExp(Q.source),$=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,tt=/<%=([\s\S]+?)%>/g,et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nt=/^\w*$/,rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,it=/[\\^$.*+?()[\]{}|]/g,st=RegExp(it.source),ot=/^\s+/,at=/\s/,ut=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ct=/\{\n\/\* \[wrapped with (.+)\] \*/,lt=/,? & /,ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ft=/[()=,{}\[\]\/\s]/,dt=/\\(\\)?/g,pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gt=/\w*$/,mt=/^[-+]0x[0-9a-f]+$/i,yt=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,_t=/^0o[0-7]+$/i,wt=/^(?:0|[1-9]\d*)$/,bt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,St=/($^)/,Et=/['\n\r\u2028\u2029\\]/g,Tt="\\ud800-\\udfff",Dt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",kt="\\u2700-\\u27bf",It="a-z\\xdf-\\xf6\\xf8-\\xff",Ct="A-Z\\xc0-\\xd6\\xd8-\\xde",At="\\ufe0e\\ufe0f",Nt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Mt="['\u2019]",xt="["+Tt+"]",Ot="["+Nt+"]",Rt="["+Dt+"]",Lt="\\d+",Pt="["+kt+"]",Ft="["+It+"]",Vt="[^"+Tt+Nt+Lt+kt+It+Ct+"]",Ut="\\ud83c[\\udffb-\\udfff]",jt="[^"+Tt+"]",Bt="(?:\\ud83c[\\udde6-\\uddff]){2}",Yt="[\\ud800-\\udbff][\\udc00-\\udfff]",qt="["+Ct+"]",zt="\\u200d",Wt="(?:"+Ft+"|"+Vt+")",Gt="(?:"+qt+"|"+Vt+")",Ht="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Kt="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Qt="(?:"+Rt+"|"+Ut+")"+"?",Xt="["+At+"]?",Jt=Xt+Qt+("(?:"+zt+"(?:"+[jt,Bt,Yt].join("|")+")"+Xt+Qt+")*"),$t="(?:"+[Pt,Bt,Yt].join("|")+")"+Jt,Zt="(?:"+[jt+Rt+"?",Rt,Bt,Yt,xt].join("|")+")",te=RegExp(Mt,"g"),ee=RegExp(Rt,"g"),ne=RegExp(Ut+"(?="+Ut+")|"+Zt+Jt,"g"),re=RegExp([qt+"?"+Ft+"+"+Ht+"(?="+[Ot,qt,"$"].join("|")+")",Gt+"+"+Kt+"(?="+[Ot,qt+Wt,"$"].join("|")+")",qt+"?"+Wt+"+"+Ht,qt+"+"+Kt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Lt,$t].join("|"),"g"),ie=RegExp("["+zt+Tt+Dt+At+"]"),se=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,oe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ae=-1,ue={};ue[P]=ue[F]=ue[V]=ue[U]=ue[j]=ue[B]=ue[Y]=ue[q]=ue[z]=!0,ue[v]=ue[_]=ue[R]=ue[w]=ue[L]=ue[b]=ue[S]=ue[E]=ue[D]=ue[k]=ue[I]=ue[A]=ue[N]=ue[M]=ue[O]=!1;var ce={};ce[v]=ce[_]=ce[R]=ce[L]=ce[w]=ce[b]=ce[P]=ce[F]=ce[V]=ce[U]=ce[j]=ce[D]=ce[k]=ce[I]=ce[A]=ce[N]=ce[M]=ce[x]=ce[B]=ce[Y]=ce[q]=ce[z]=!0,ce[S]=ce[E]=ce[O]=!1;var le={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},he=parseFloat,fe=parseInt,de="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,pe="object"==typeof self&&self&&self.Object===Object&&self,ge=de||pe||Function("return this")(),me=e&&!e.nodeType&&e,ye=me&&t&&!t.nodeType&&t,ve=ye&&ye.exports===me,_e=ve&&de.process,we=function(){try{var t=ye&&ye.require&&ye.require("util").types;return t||_e&&_e.binding&&_e.binding("util")}catch(e){}}(),be=we&&we.isArrayBuffer,Se=we&&we.isDate,Ee=we&&we.isMap,Te=we&&we.isRegExp,De=we&&we.isSet,ke=we&&we.isTypedArray;function Ie(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ce(t,e,n,r){for(var i=-1,s=null==t?0:t.length;++i<s;){var o=t[i];e(r,o,n(o),t)}return r}function Ae(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ne(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Me(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function xe(t,e){for(var n=-1,r=null==t?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}function Oe(t,e){return!!(null==t?0:t.length)&&qe(t,e,0)>-1}function Re(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Le(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Pe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Fe(t,e,n,r){var i=-1,s=null==t?0:t.length;for(r&&s&&(n=t[++i]);++i<s;)n=e(n,t[i],i,t);return n}function Ve(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Ue(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var je=He("length");function Be(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Ye(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}function qe(t,e,n){return e===e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Ye(t,We,n)}function ze(t,e,n,r){for(var i=n-1,s=t.length;++i<s;)if(r(t[i],e))return i;return-1}function We(t){return t!==t}function Ge(t,e){var n=null==t?0:t.length;return n?Xe(t,e)/n:g}function He(t){return function(e){return null==e?i:e[t]}}function Ke(t){return function(e){return null==t?i:t[e]}}function Qe(t,e,n,r,i){return i(t,(function(t,i,s){n=r?(r=!1,t):e(n,t,i,s)})),n}function Xe(t,e){for(var n,r=-1,s=t.length;++r<s;){var o=e(t[r]);o!==i&&(n=n===i?o:n+o)}return n}function Je(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function $e(t){return t?t.slice(0,mn(t)+1).replace(ot,""):t}function Ze(t){return function(e){return t(e)}}function tn(t,e){return Le(e,(function(e){return t[e]}))}function en(t,e){return t.has(e)}function nn(t,e){for(var n=-1,r=t.length;++n<r&&qe(e,t[n],0)>-1;);return n}function rn(t,e){for(var n=t.length;n--&&qe(e,t[n],0)>-1;);return n}var sn=Ke({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),on=Ke({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(t){return"\\"+le[t]}function un(t){return ie.test(t)}function cn(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function ln(t,e){return function(n){return t(e(n))}}function hn(t,e){for(var n=-1,r=t.length,i=0,s=[];++n<r;){var o=t[n];o!==e&&o!==a||(t[n]=a,s[i++]=n)}return s}function fn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function dn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function pn(t){return un(t)?function(t){var e=ne.lastIndex=0;for(;ne.test(t);)++e;return e}(t):je(t)}function gn(t){return un(t)?function(t){return t.match(ne)||[]}(t):function(t){return t.split("")}(t)}function mn(t){for(var e=t.length;e--&&at.test(t.charAt(e)););return e}var yn=Ke({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var vn=function t(e){var n=(e=null==e?ge:vn.defaults(ge.Object(),e,vn.pick(ge,oe))).Array,r=e.Date,at=e.Error,Tt=e.Function,Dt=e.Math,kt=e.Object,It=e.RegExp,Ct=e.String,At=e.TypeError,Nt=n.prototype,Mt=Tt.prototype,xt=kt.prototype,Ot=e["__core-js_shared__"],Rt=Mt.toString,Lt=xt.hasOwnProperty,Pt=0,Ft=function(){var t=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Vt=xt.toString,Ut=Rt.call(kt),jt=ge._,Bt=It("^"+Rt.call(Lt).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yt=ve?e.Buffer:i,qt=e.Symbol,zt=e.Uint8Array,Wt=Yt?Yt.allocUnsafe:i,Gt=ln(kt.getPrototypeOf,kt),Ht=kt.create,Kt=xt.propertyIsEnumerable,Qt=Nt.splice,Xt=qt?qt.isConcatSpreadable:i,Jt=qt?qt.iterator:i,$t=qt?qt.toStringTag:i,Zt=function(){try{var t=hs(kt,"defineProperty");return t({},"",{}),t}catch(e){}}(),ne=e.clearTimeout!==ge.clearTimeout&&e.clearTimeout,ie=r&&r.now!==ge.Date.now&&r.now,le=e.setTimeout!==ge.setTimeout&&e.setTimeout,de=Dt.ceil,pe=Dt.floor,me=kt.getOwnPropertySymbols,ye=Yt?Yt.isBuffer:i,_e=e.isFinite,we=Nt.join,je=ln(kt.keys,kt),Ke=Dt.max,_n=Dt.min,wn=r.now,bn=e.parseInt,Sn=Dt.random,En=Nt.reverse,Tn=hs(e,"DataView"),Dn=hs(e,"Map"),kn=hs(e,"Promise"),In=hs(e,"Set"),Cn=hs(e,"WeakMap"),An=hs(kt,"create"),Nn=Cn&&new Cn,Mn={},xn=Fs(Tn),On=Fs(Dn),Rn=Fs(kn),Ln=Fs(In),Pn=Fs(Cn),Fn=qt?qt.prototype:i,Vn=Fn?Fn.valueOf:i,Un=Fn?Fn.toString:i;function jn(t){if(ea(t)&&!zo(t)&&!(t instanceof zn)){if(t instanceof qn)return t;if(Lt.call(t,"__wrapped__"))return Vs(t)}return new qn(t)}var Bn=function(){function t(){}return function(e){if(!ta(e))return{};if(Ht)return Ht(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Yn(){}function qn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function zn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Kn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Hn;++e<n;)this.add(t[e])}function Qn(t){var e=this.__data__=new Gn(t);this.size=e.size}function Xn(t,e){var n=zo(t),r=!n&&qo(t),i=!n&&!r&&Ko(t),s=!n&&!r&&!i&&ca(t),o=n||r||i||s,a=o?Je(t.length,Ct):[],u=a.length;for(var c in t)!e&&!Lt.call(t,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||vs(c,u))||a.push(c);return a}function Jn(t){var e=t.length;return e?t[Kr(0,e-1)]:i}function $n(t,e){return Rs(Ai(t),ar(e,0,t.length))}function Zn(t){return Rs(Ai(t))}function tr(t,e,n){(n!==i&&!jo(t[e],n)||n===i&&!(e in t))&&sr(t,e,n)}function er(t,e,n){var r=t[e];Lt.call(t,e)&&jo(r,n)&&(n!==i||e in t)||sr(t,e,n)}function nr(t,e){for(var n=t.length;n--;)if(jo(t[n][0],e))return n;return-1}function rr(t,e,n,r){return fr(t,(function(t,i,s){e(r,t,n(t),s)})),r}function ir(t,e){return t&&Ni(e,Ma(e),t)}function sr(t,e,n){"__proto__"==e&&Zt?Zt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function or(t,e){for(var r=-1,s=e.length,o=n(s),a=null==t;++r<s;)o[r]=a?i:ka(t,e[r]);return o}function ar(t,e,n){return t===t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function ur(t,e,n,r,s,o){var a,u=1&e,c=2&e,l=4&e;if(n&&(a=s?n(t,r,s,o):n(t)),a!==i)return a;if(!ta(t))return t;var h=zo(t);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Lt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!u)return Ai(t,a)}else{var f=ps(t),d=f==E||f==T;if(Ko(t))return Ei(t,u);if(f==I||f==v||d&&!s){if(a=c||d?{}:ms(t),!u)return c?function(t,e){return Ni(t,ds(t),e)}(t,function(t,e){return t&&Ni(e,xa(e),t)}(a,t)):function(t,e){return Ni(t,fs(t),e)}(t,ir(a,t))}else{if(!ce[f])return s?t:{};a=function(t,e,n){var r=t.constructor;switch(e){case R:return Ti(t);case w:case b:return new r(+t);case L:return function(t,e){var n=e?Ti(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case P:case F:case V:case U:case j:case B:case Y:case q:case z:return Di(t,n);case D:return new r;case k:case M:return new r(t);case A:return function(t){var e=new t.constructor(t.source,gt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case N:return new r;case x:return i=t,Vn?kt(Vn.call(i)):{}}var i}(t,f,u)}}o||(o=new Qn);var p=o.get(t);if(p)return p;o.set(t,a),oa(t)?t.forEach((function(r){a.add(ur(r,e,n,r,t,o))})):na(t)&&t.forEach((function(r,i){a.set(i,ur(r,e,n,i,t,o))}));var g=h?i:(l?c?is:rs:c?xa:Ma)(t);return Ae(g||t,(function(r,i){g&&(r=t[i=r]),er(a,i,ur(r,e,n,i,t,o))})),a}function cr(t,e,n){var r=n.length;if(null==t)return!r;for(t=kt(t);r--;){var s=n[r],o=e[s],a=t[s];if(a===i&&!(s in t)||!o(a))return!1}return!0}function lr(t,e,n){if("function"!=typeof t)throw new At(s);return Ns((function(){t.apply(i,n)}),e)}function hr(t,e,n,r){var i=-1,s=Oe,o=!0,a=t.length,u=[],c=e.length;if(!a)return u;n&&(e=Le(e,Ze(n))),r?(s=Re,o=!1):e.length>=200&&(s=en,o=!1,e=new Kn(e));t:for(;++i<a;){var l=t[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,o&&h===h){for(var f=c;f--;)if(e[f]===h)continue t;u.push(l)}else s(e,h,r)||u.push(l)}return u}jn.templateSettings={escape:$,evaluate:Z,interpolate:tt,variable:"",imports:{_:jn}},jn.prototype=Yn.prototype,jn.prototype.constructor=jn,qn.prototype=Bn(Yn.prototype),qn.prototype.constructor=qn,zn.prototype=Bn(Yn.prototype),zn.prototype.constructor=zn,Wn.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},Wn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Wn.prototype.get=function(t){var e=this.__data__;if(An){var n=e[t];return n===o?i:n}return Lt.call(e,t)?e[t]:i},Wn.prototype.has=function(t){var e=this.__data__;return An?e[t]!==i:Lt.call(e,t)},Wn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=An&&e===i?o:e,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(t){var e=this.__data__,n=nr(e,t);return!(n<0)&&(n==e.length-1?e.pop():Qt.call(e,n,1),--this.size,!0)},Gn.prototype.get=function(t){var e=this.__data__,n=nr(e,t);return n<0?i:e[n][1]},Gn.prototype.has=function(t){return nr(this.__data__,t)>-1},Gn.prototype.set=function(t,e){var n=this.__data__,r=nr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Hn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(Dn||Gn),string:new Wn}},Hn.prototype.delete=function(t){var e=cs(this,t).delete(t);return this.size-=e?1:0,e},Hn.prototype.get=function(t){return cs(this,t).get(t)},Hn.prototype.has=function(t){return cs(this,t).has(t)},Hn.prototype.set=function(t,e){var n=cs(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Kn.prototype.add=Kn.prototype.push=function(t){return this.__data__.set(t,o),this},Kn.prototype.has=function(t){return this.__data__.has(t)},Qn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Qn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Qn.prototype.get=function(t){return this.__data__.get(t)},Qn.prototype.has=function(t){return this.__data__.has(t)},Qn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Gn){var r=n.__data__;if(!Dn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Hn(r)}return n.set(t,e),this.size=n.size,this};var fr=Oi(wr),dr=Oi(br,!0);function pr(t,e){var n=!0;return fr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function gr(t,e,n){for(var r=-1,s=t.length;++r<s;){var o=t[r],a=e(o);if(null!=a&&(u===i?a===a&&!ua(a):n(a,u)))var u=a,c=o}return c}function mr(t,e){var n=[];return fr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function yr(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=ys),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?yr(a,e-1,n,r,i):Pe(i,a):r||(i[i.length]=a)}return i}var vr=Ri(),_r=Ri(!0);function wr(t,e){return t&&vr(t,e,Ma)}function br(t,e){return t&&_r(t,e,Ma)}function Sr(t,e){return xe(e,(function(e){return Jo(t[e])}))}function Er(t,e){for(var n=0,r=(e=_i(e,t)).length;null!=t&&n<r;)t=t[Ps(e[n++])];return n&&n==r?t:i}function Tr(t,e,n){var r=e(t);return zo(t)?r:Pe(r,n(t))}function Dr(t){return null==t?t===i?"[object Undefined]":"[object Null]":$t&&$t in kt(t)?function(t){var e=Lt.call(t,$t),n=t[$t];try{t[$t]=i;var r=!0}catch(o){}var s=Vt.call(t);r&&(e?t[$t]=n:delete t[$t]);return s}(t):function(t){return Vt.call(t)}(t)}function kr(t,e){return t>e}function Ir(t,e){return null!=t&&Lt.call(t,e)}function Cr(t,e){return null!=t&&e in kt(t)}function Ar(t,e,r){for(var s=r?Re:Oe,o=t[0].length,a=t.length,u=a,c=n(a),l=1/0,h=[];u--;){var f=t[u];u&&e&&(f=Le(f,Ze(e))),l=_n(f.length,l),c[u]=!r&&(e||o>=120&&f.length>=120)?new Kn(u&&f):i}f=t[0];var d=-1,p=c[0];t:for(;++d<o&&h.length<l;){var g=f[d],m=e?e(g):g;if(g=r||0!==g?g:0,!(p?en(p,m):s(h,m,r))){for(u=a;--u;){var y=c[u];if(!(y?en(y,m):s(t[u],m,r)))continue t}p&&p.push(m),h.push(g)}}return h}function Nr(t,e,n){var r=null==(t=Is(t,e=_i(e,t)))?t:t[Ps(Qs(e))];return null==r?i:Ie(r,t,n)}function Mr(t){return ea(t)&&Dr(t)==v}function xr(t,e,n,r,s){return t===e||(null==t||null==e||!ea(t)&&!ea(e)?t!==t&&e!==e:function(t,e,n,r,s,o){var a=zo(t),u=zo(e),c=a?_:ps(t),l=u?_:ps(e),h=(c=c==v?I:c)==I,f=(l=l==v?I:l)==I,d=c==l;if(d&&Ko(t)){if(!Ko(e))return!1;a=!0,h=!1}if(d&&!h)return o||(o=new Qn),a||ca(t)?es(t,e,n,r,s,o):function(t,e,n,r,i,s,o){switch(n){case L:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case R:return!(t.byteLength!=e.byteLength||!s(new zt(t),new zt(e)));case w:case b:case k:return jo(+t,+e);case S:return t.name==e.name&&t.message==e.message;case A:case M:return t==e+"";case D:var a=cn;case N:var u=1&r;if(a||(a=fn),t.size!=e.size&&!u)return!1;var c=o.get(t);if(c)return c==e;r|=2,o.set(t,e);var l=es(a(t),a(e),r,i,s,o);return o.delete(t),l;case x:if(Vn)return Vn.call(t)==Vn.call(e)}return!1}(t,e,c,n,r,s,o);if(!(1&n)){var p=h&&Lt.call(t,"__wrapped__"),g=f&&Lt.call(e,"__wrapped__");if(p||g){var m=p?t.value():t,y=g?e.value():e;return o||(o=new Qn),s(m,y,n,r,o)}}if(!d)return!1;return o||(o=new Qn),function(t,e,n,r,s,o){var a=1&n,u=rs(t),c=u.length,l=rs(e),h=l.length;if(c!=h&&!a)return!1;var f=c;for(;f--;){var d=u[f];if(!(a?d in e:Lt.call(e,d)))return!1}var p=o.get(t),g=o.get(e);if(p&&g)return p==e&&g==t;var m=!0;o.set(t,e),o.set(e,t);var y=a;for(;++f<c;){var v=t[d=u[f]],_=e[d];if(r)var w=a?r(_,v,d,e,t,o):r(v,_,d,t,e,o);if(!(w===i?v===_||s(v,_,n,r,o):w)){m=!1;break}y||(y="constructor"==d)}if(m&&!y){var b=t.constructor,S=e.constructor;b==S||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof S&&S instanceof S||(m=!1)}return o.delete(t),o.delete(e),m}(t,e,n,r,s,o)}(t,e,n,r,xr,s))}function Or(t,e,n,r){var s=n.length,o=s,a=!r;if(null==t)return!o;for(t=kt(t);s--;){var u=n[s];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++s<o;){var c=(u=n[s])[0],l=t[c],h=u[1];if(a&&u[2]){if(l===i&&!(c in t))return!1}else{var f=new Qn;if(r)var d=r(l,h,c,t,e,f);if(!(d===i?xr(h,l,3,r,f):d))return!1}}return!0}function Rr(t){return!(!ta(t)||(e=t,Ft&&Ft in e))&&(Jo(t)?Bt:vt).test(Fs(t));var e}function Lr(t){return"function"==typeof t?t:null==t?ru:"object"==typeof t?zo(t)?Br(t[0],t[1]):jr(t):fu(t)}function Pr(t){if(!Es(t))return je(t);var e=[];for(var n in kt(t))Lt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Fr(t){if(!ta(t))return function(t){var e=[];if(null!=t)for(var n in kt(t))e.push(n);return e}(t);var e=Es(t),n=[];for(var r in t)("constructor"!=r||!e&&Lt.call(t,r))&&n.push(r);return n}function Vr(t,e){return t<e}function Ur(t,e){var r=-1,i=Go(t)?n(t.length):[];return fr(t,(function(t,n,s){i[++r]=e(t,n,s)})),i}function jr(t){var e=ls(t);return 1==e.length&&e[0][2]?Ds(e[0][0],e[0][1]):function(n){return n===t||Or(n,t,e)}}function Br(t,e){return ws(t)&&Ts(e)?Ds(Ps(t),e):function(n){var r=ka(n,t);return r===i&&r===e?Ia(n,t):xr(e,r,3)}}function Yr(t,e,n,r,s){t!==e&&vr(e,(function(o,a){if(s||(s=new Qn),ta(o))!function(t,e,n,r,s,o,a){var u=Cs(t,n),c=Cs(e,n),l=a.get(c);if(l)return void tr(t,n,l);var h=o?o(u,c,n+"",t,e,a):i,f=h===i;if(f){var d=zo(c),p=!d&&Ko(c),g=!d&&!p&&ca(c);h=c,d||p||g?zo(u)?h=u:Ho(u)?h=Ai(u):p?(f=!1,h=Ei(c,!0)):g?(f=!1,h=Di(c,!0)):h=[]:ia(c)||qo(c)?(h=u,qo(u)?h=ya(u):ta(u)&&!Jo(u)||(h=ms(c))):f=!1}f&&(a.set(c,h),s(h,c,r,o,a),a.delete(c));tr(t,n,h)}(t,e,a,n,Yr,r,s);else{var u=r?r(Cs(t,a),o,a+"",t,e,s):i;u===i&&(u=o),tr(t,a,u)}}),xa)}function qr(t,e){var n=t.length;if(n)return vs(e+=e<0?n:0,n)?t[e]:i}function zr(t,e,n){e=e.length?Le(e,(function(t){return zo(t)?function(e){return Er(e,1===t.length?t[0]:t)}:t})):[ru];var r=-1;e=Le(e,Ze(us()));var i=Ur(t,(function(t,n,i){var s=Le(e,(function(e){return e(t)}));return{criteria:s,index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(i,(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,s=e.criteria,o=i.length,a=n.length;for(;++r<o;){var u=ki(i[r],s[r]);if(u)return r>=a?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function Wr(t,e,n){for(var r=-1,i=e.length,s={};++r<i;){var o=e[r],a=Er(t,o);n(a,o)&&Zr(s,_i(o,t),a)}return s}function Gr(t,e,n,r){var i=r?ze:qe,s=-1,o=e.length,a=t;for(t===e&&(e=Ai(e)),n&&(a=Le(t,Ze(n)));++s<o;)for(var u=0,c=e[s],l=n?n(c):c;(u=i(a,l,u,r))>-1;)a!==t&&Qt.call(a,u,1),Qt.call(t,u,1);return t}function Hr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==s){var s=i;vs(i)?Qt.call(t,i,1):hi(t,i)}}return t}function Kr(t,e){return t+pe(Sn()*(e-t+1))}function Qr(t,e){var n="";if(!t||e<1||e>p)return n;do{e%2&&(n+=t),(e=pe(e/2))&&(t+=t)}while(e);return n}function Xr(t,e){return Ms(ks(t,e,ru),t+"")}function Jr(t){return Jn(ja(t))}function $r(t,e){var n=ja(t);return Rs(n,ar(e,0,n.length))}function Zr(t,e,n,r){if(!ta(t))return t;for(var s=-1,o=(e=_i(e,t)).length,a=o-1,u=t;null!=u&&++s<o;){var c=Ps(e[s]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(s!=a){var h=u[c];(l=r?r(h,c,u):i)===i&&(l=ta(h)?h:vs(e[s+1])?[]:{})}er(u,c,l),u=u[c]}return t}var ti=Nn?function(t,e){return Nn.set(t,e),t}:ru,ei=Zt?function(t,e){return Zt(t,"toString",{configurable:!0,enumerable:!1,value:tu(e),writable:!0})}:ru;function ni(t){return Rs(ja(t))}function ri(t,e,r){var i=-1,s=t.length;e<0&&(e=-e>s?0:s+e),(r=r>s?s:r)<0&&(r+=s),s=e>r?0:r-e>>>0,e>>>=0;for(var o=n(s);++i<s;)o[i]=t[i+e];return o}function ii(t,e){var n;return fr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function si(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=2147483647){for(;r<i;){var s=r+i>>>1,o=t[s];null!==o&&!ua(o)&&(n?o<=e:o<e)?r=s+1:i=s}return i}return oi(t,e,ru,n)}function oi(t,e,n,r){var s=0,o=null==t?0:t.length;if(0===o)return 0;for(var a=(e=n(e))!==e,u=null===e,c=ua(e),l=e===i;s<o;){var h=pe((s+o)/2),f=n(t[h]),d=f!==i,p=null===f,g=f===f,m=ua(f);if(a)var y=r||g;else y=l?g&&(r||d):u?g&&d&&(r||!p):c?g&&d&&!p&&(r||!m):!p&&!m&&(r?f<=e:f<e);y?s=h+1:o=h}return _n(o,4294967294)}function ai(t,e){for(var n=-1,r=t.length,i=0,s=[];++n<r;){var o=t[n],a=e?e(o):o;if(!n||!jo(a,u)){var u=a;s[i++]=0===o?0:o}}return s}function ui(t){return"number"==typeof t?t:ua(t)?g:+t}function ci(t){if("string"==typeof t)return t;if(zo(t))return Le(t,ci)+"";if(ua(t))return Un?Un.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function li(t,e,n){var r=-1,i=Oe,s=t.length,o=!0,a=[],u=a;if(n)o=!1,i=Re;else if(s>=200){var c=e?null:Qi(t);if(c)return fn(c);o=!1,i=en,u=new Kn}else u=e?[]:a;t:for(;++r<s;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,o&&h===h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),a.push(l)}else i(u,h,n)||(u!==a&&u.push(h),a.push(l))}return a}function hi(t,e){return null==(t=Is(t,e=_i(e,t)))||delete t[Ps(Qs(e))]}function fi(t,e,n,r){return Zr(t,e,n(Er(t,e)),r)}function di(t,e,n,r){for(var i=t.length,s=r?i:-1;(r?s--:++s<i)&&e(t[s],s,t););return n?ri(t,r?0:s,r?s+1:i):ri(t,r?s+1:0,r?i:s)}function pi(t,e){var n=t;return n instanceof zn&&(n=n.value()),Fe(e,(function(t,e){return e.func.apply(e.thisArg,Pe([t],e.args))}),n)}function gi(t,e,r){var i=t.length;if(i<2)return i?li(t[0]):[];for(var s=-1,o=n(i);++s<i;)for(var a=t[s],u=-1;++u<i;)u!=s&&(o[s]=hr(o[s]||a,t[u],e,r));return li(yr(o,1),e,r)}function mi(t,e,n){for(var r=-1,s=t.length,o=e.length,a={};++r<s;){var u=r<o?e[r]:i;n(a,t[r],u)}return a}function yi(t){return Ho(t)?t:[]}function vi(t){return"function"==typeof t?t:ru}function _i(t,e){return zo(t)?t:ws(t,e)?[t]:Ls(va(t))}var wi=Xr;function bi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ri(t,e,n)}var Si=ne||function(t){return ge.clearTimeout(t)};function Ei(t,e){if(e)return t.slice();var n=t.length,r=Wt?Wt(n):new t.constructor(n);return t.copy(r),r}function Ti(t){var e=new t.constructor(t.byteLength);return new zt(e).set(new zt(t)),e}function Di(t,e){var n=e?Ti(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function ki(t,e){if(t!==e){var n=t!==i,r=null===t,s=t===t,o=ua(t),a=e!==i,u=null===e,c=e===e,l=ua(e);if(!u&&!l&&!o&&t>e||o&&a&&c&&!u&&!l||r&&a&&c||!n&&c||!s)return 1;if(!r&&!o&&!l&&t<e||l&&n&&s&&!r&&!o||u&&n&&s||!a&&s||!c)return-1}return 0}function Ii(t,e,r,i){for(var s=-1,o=t.length,a=r.length,u=-1,c=e.length,l=Ke(o-a,0),h=n(c+l),f=!i;++u<c;)h[u]=e[u];for(;++s<a;)(f||s<o)&&(h[r[s]]=t[s]);for(;l--;)h[u++]=t[s++];return h}function Ci(t,e,r,i){for(var s=-1,o=t.length,a=-1,u=r.length,c=-1,l=e.length,h=Ke(o-u,0),f=n(h+l),d=!i;++s<h;)f[s]=t[s];for(var p=s;++c<l;)f[p+c]=e[c];for(;++a<u;)(d||s<o)&&(f[p+r[a]]=t[s++]);return f}function Ai(t,e){var r=-1,i=t.length;for(e||(e=n(i));++r<i;)e[r]=t[r];return e}function Ni(t,e,n,r){var s=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var u=e[o],c=r?r(n[u],t[u],u,n,t):i;c===i&&(c=t[u]),s?sr(n,u,c):er(n,u,c)}return n}function Mi(t,e){return function(n,r){var i=zo(n)?Ce:rr,s=e?e():{};return i(n,t,us(r,2),s)}}function xi(t){return Xr((function(e,n){var r=-1,s=n.length,o=s>1?n[s-1]:i,a=s>2?n[2]:i;for(o=t.length>3&&"function"==typeof o?(s--,o):i,a&&_s(n[0],n[1],a)&&(o=s<3?i:o,s=1),e=kt(e);++r<s;){var u=n[r];u&&t(e,u,r,o)}return e}))}function Oi(t,e){return function(n,r){if(null==n)return n;if(!Go(n))return t(n,r);for(var i=n.length,s=e?i:-1,o=kt(n);(e?s--:++s<i)&&!1!==r(o[s],s,o););return n}}function Ri(t){return function(e,n,r){for(var i=-1,s=kt(e),o=r(e),a=o.length;a--;){var u=o[t?a:++i];if(!1===n(s[u],u,s))break}return e}}function Li(t){return function(e){var n=un(e=va(e))?gn(e):i,r=n?n[0]:e.charAt(0),s=n?bi(n,1).join(""):e.slice(1);return r[t]()+s}}function Pi(t){return function(e){return Fe(Ja(qa(e).replace(te,"")),t,"")}}function Fi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Bn(t.prototype),r=t.apply(n,e);return ta(r)?r:n}}function Vi(t){return function(e,n,r){var s=kt(e);if(!Go(e)){var o=us(n,3);e=Ma(e),n=function(t){return o(s[t],t,s)}}var a=t(e,n,r);return a>-1?s[o?e[a]:a]:i}}function Ui(t){return ns((function(e){var n=e.length,r=n,o=qn.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new At(s);if(o&&!u&&"wrapper"==os(a))var u=new qn([],!0)}for(r=u?r:n;++r<n;){var c=os(a=e[r]),l="wrapper"==c?ss(a):i;u=l&&bs(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[os(l[0])].apply(u,l[3]):1==a.length&&bs(a)?u[c]():u.thru(a)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&zo(r))return u.plant(r).value();for(var i=0,s=n?e[i].apply(this,t):r;++i<n;)s=e[i].call(this,s);return s}}))}function ji(t,e,r,s,o,a,u,c,l,f){var d=e&h,p=1&e,g=2&e,m=24&e,y=512&e,v=g?i:Fi(t);return function h(){for(var _=arguments.length,w=n(_),b=_;b--;)w[b]=arguments[b];if(m)var S=as(h),E=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(w,S);if(s&&(w=Ii(w,s,o,m)),a&&(w=Ci(w,a,u,m)),_-=E,m&&_<f){var T=hn(w,S);return Hi(t,e,ji,h.placeholder,r,w,T,c,l,f-_)}var D=p?r:this,k=g?D[t]:t;return _=w.length,c?w=function(t,e){var n=t.length,r=_n(e.length,n),s=Ai(t);for(;r--;){var o=e[r];t[r]=vs(o,n)?s[o]:i}return t}(w,c):y&&_>1&&w.reverse(),d&&l<_&&(w.length=l),this&&this!==ge&&this instanceof h&&(k=v||Fi(k)),k.apply(D,w)}}function Bi(t,e){return function(n,r){return function(t,e,n,r){return wr(t,(function(t,i,s){e(r,n(t),i,s)})),r}(n,t,e(r),{})}}function Yi(t,e){return function(n,r){var s;if(n===i&&r===i)return e;if(n!==i&&(s=n),r!==i){if(s===i)return r;"string"==typeof n||"string"==typeof r?(n=ci(n),r=ci(r)):(n=ui(n),r=ui(r)),s=t(n,r)}return s}}function qi(t){return ns((function(e){return e=Le(e,Ze(us())),Xr((function(n){var r=this;return t(e,(function(t){return Ie(t,r,n)}))}))}))}function zi(t,e){var n=(e=e===i?" ":ci(e)).length;if(n<2)return n?Qr(e,t):e;var r=Qr(e,de(t/pn(e)));return un(e)?bi(gn(r),0,t).join(""):r.slice(0,t)}function Wi(t){return function(e,r,s){return s&&"number"!=typeof s&&_s(e,r,s)&&(r=s=i),e=da(e),r===i?(r=e,e=0):r=da(r),function(t,e,r,i){for(var s=-1,o=Ke(de((e-t)/(r||1)),0),a=n(o);o--;)a[i?o:++s]=t,t+=r;return a}(e,r,s=s===i?e<r?1:-1:da(s),t)}}function Gi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ma(e),n=ma(n)),t(e,n)}}function Hi(t,e,n,r,s,o,a,u,h,f){var d=8&e;e|=d?c:l,4&(e&=~(d?l:c))||(e&=-4);var p=[t,e,s,d?o:i,d?a:i,d?i:o,d?i:a,u,h,f],g=n.apply(i,p);return bs(t)&&As(g,p),g.placeholder=r,xs(g,t,e)}function Ki(t){var e=Dt[t];return function(t,n){if(t=ma(t),(n=null==n?0:_n(pa(n),292))&&_e(t)){var r=(va(t)+"e").split("e");return+((r=(va(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Qi=In&&1/fn(new In([,-0]))[1]==d?function(t){return new In(t)}:uu;function Xi(t){return function(e){var n=ps(e);return n==D?cn(e):n==N?dn(e):function(t,e){return Le(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Ji(t,e,r,o,d,p,g,m){var y=2&e;if(!y&&"function"!=typeof t)throw new At(s);var v=o?o.length:0;if(v||(e&=-97,o=d=i),g=g===i?g:Ke(pa(g),0),m=m===i?m:pa(m),v-=d?d.length:0,e&l){var _=o,w=d;o=d=i}var b=y?i:ss(t),S=[t,e,r,o,d,_,w,p,g,m];if(b&&function(t,e){var n=t[1],r=e[1],i=n|r,s=i<131,o=r==h&&8==n||r==h&&n==f&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!s&&!o)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var c=t[3];t[3]=c?Ii(c,u,e[4]):u,t[4]=c?hn(t[3],a):e[4]}(u=e[5])&&(c=t[5],t[5]=c?Ci(c,u,e[6]):u,t[6]=c?hn(t[5],a):e[6]);(u=e[7])&&(t[7]=u);r&h&&(t[8]=null==t[8]?e[8]:_n(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(S,b),t=S[0],e=S[1],r=S[2],o=S[3],d=S[4],!(m=S[9]=S[9]===i?y?0:t.length:Ke(S[9]-v,0))&&24&e&&(e&=-25),e&&1!=e)E=8==e||e==u?function(t,e,r){var s=Fi(t);return function o(){for(var a=arguments.length,u=n(a),c=a,l=as(o);c--;)u[c]=arguments[c];var h=a<3&&u[0]!==l&&u[a-1]!==l?[]:hn(u,l);return(a-=h.length)<r?Hi(t,e,ji,o.placeholder,i,u,h,i,i,r-a):Ie(this&&this!==ge&&this instanceof o?s:t,this,u)}}(t,e,m):e!=c&&33!=e||d.length?ji.apply(i,S):function(t,e,r,i){var s=1&e,o=Fi(t);return function e(){for(var a=-1,u=arguments.length,c=-1,l=i.length,h=n(l+u),f=this&&this!==ge&&this instanceof e?o:t;++c<l;)h[c]=i[c];for(;u--;)h[c++]=arguments[++a];return Ie(f,s?r:this,h)}}(t,e,r,o);else var E=function(t,e,n){var r=1&e,i=Fi(t);return function e(){return(this&&this!==ge&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,r);return xs((b?ti:As)(E,S),t,e)}function $i(t,e,n,r){return t===i||jo(t,xt[n])&&!Lt.call(r,n)?e:t}function Zi(t,e,n,r,s,o){return ta(t)&&ta(e)&&(o.set(e,t),Yr(t,e,i,Zi,o),o.delete(e)),t}function ts(t){return ia(t)?i:t}function es(t,e,n,r,s,o){var a=1&n,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var l=o.get(t),h=o.get(e);if(l&&h)return l==e&&h==t;var f=-1,d=!0,p=2&n?new Kn:i;for(o.set(t,e),o.set(e,t);++f<u;){var g=t[f],m=e[f];if(r)var y=a?r(m,g,f,e,t,o):r(g,m,f,t,e,o);if(y!==i){if(y)continue;d=!1;break}if(p){if(!Ue(e,(function(t,e){if(!en(p,e)&&(g===t||s(g,t,n,r,o)))return p.push(e)}))){d=!1;break}}else if(g!==m&&!s(g,m,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function ns(t){return Ms(ks(t,i,zs),t+"")}function rs(t){return Tr(t,Ma,fs)}function is(t){return Tr(t,xa,ds)}var ss=Nn?function(t){return Nn.get(t)}:uu;function os(t){for(var e=t.name+"",n=Mn[e],r=Lt.call(Mn,e)?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==t)return i.name}return e}function as(t){return(Lt.call(jn,"placeholder")?jn:t).placeholder}function us(){var t=jn.iteratee||iu;return t=t===iu?Lr:t,arguments.length?t(arguments[0],arguments[1]):t}function cs(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function ls(t){for(var e=Ma(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Ts(i)]}return e}function hs(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Rr(n)?n:i}var fs=me?function(t){return null==t?[]:(t=kt(t),xe(me(t),(function(e){return Kt.call(t,e)})))}:gu,ds=me?function(t){for(var e=[];t;)Pe(e,fs(t)),t=Gt(t);return e}:gu,ps=Dr;function gs(t,e,n){for(var r=-1,i=(e=_i(e,t)).length,s=!1;++r<i;){var o=Ps(e[r]);if(!(s=null!=t&&n(t,o)))break;t=t[o]}return s||++r!=i?s:!!(i=null==t?0:t.length)&&Zo(i)&&vs(o,i)&&(zo(t)||qo(t))}function ms(t){return"function"!=typeof t.constructor||Es(t)?{}:Bn(Gt(t))}function ys(t){return zo(t)||qo(t)||!!(Xt&&t&&t[Xt])}function vs(t,e){var n=typeof t;return!!(e=null==e?p:e)&&("number"==n||"symbol"!=n&&wt.test(t))&&t>-1&&t%1==0&&t<e}function _s(t,e,n){if(!ta(n))return!1;var r=typeof e;return!!("number"==r?Go(n)&&vs(e,n.length):"string"==r&&e in n)&&jo(n[e],t)}function ws(t,e){if(zo(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ua(t))||(nt.test(t)||!et.test(t)||null!=e&&t in kt(e))}function bs(t){var e=os(t),n=jn[e];if("function"!=typeof n||!(e in zn.prototype))return!1;if(t===n)return!0;var r=ss(n);return!!r&&t===r[0]}(Tn&&ps(new Tn(new ArrayBuffer(1)))!=L||Dn&&ps(new Dn)!=D||kn&&ps(kn.resolve())!=C||In&&ps(new In)!=N||Cn&&ps(new Cn)!=O)&&(ps=function(t){var e=Dr(t),n=e==I?t.constructor:i,r=n?Fs(n):"";if(r)switch(r){case xn:return L;case On:return D;case Rn:return C;case Ln:return N;case Pn:return O}return e});var Ss=Ot?Jo:mu;function Es(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||xt)}function Ts(t){return t===t&&!ta(t)}function Ds(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==i||t in kt(n)))}}function ks(t,e,r){return e=Ke(e===i?t.length-1:e,0),function(){for(var i=arguments,s=-1,o=Ke(i.length-e,0),a=n(o);++s<o;)a[s]=i[e+s];s=-1;for(var u=n(e+1);++s<e;)u[s]=i[s];return u[e]=r(a),Ie(t,this,u)}}function Is(t,e){return e.length<2?t:Er(t,ri(e,0,-1))}function Cs(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var As=Os(ti),Ns=le||function(t,e){return ge.setTimeout(t,e)},Ms=Os(ei);function xs(t,e,n){var r=e+"";return Ms(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ut,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ae(y,(function(n){var r="_."+n[0];e&n[1]&&!Oe(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ct);return e?e[1].split(lt):[]}(r),n)))}function Os(t){var e=0,n=0;return function(){var r=wn(),s=16-(r-n);if(n=r,s>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Rs(t,e){var n=-1,r=t.length,s=r-1;for(e=e===i?r:e;++n<e;){var o=Kr(n,s),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}var Ls=function(t){var e=Ro(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(rt,(function(t,n,r,i){e.push(r?i.replace(dt,"$1"):n||t)})),e}));function Ps(t){if("string"==typeof t||ua(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Fs(t){if(null!=t){try{return Rt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Vs(t){if(t instanceof zn)return t.clone();var e=new qn(t.__wrapped__,t.__chain__);return e.__actions__=Ai(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Us=Xr((function(t,e){return Ho(t)?hr(t,yr(e,1,Ho,!0)):[]})),js=Xr((function(t,e){var n=Qs(e);return Ho(n)&&(n=i),Ho(t)?hr(t,yr(e,1,Ho,!0),us(n,2)):[]})),Bs=Xr((function(t,e){var n=Qs(e);return Ho(n)&&(n=i),Ho(t)?hr(t,yr(e,1,Ho,!0),i,n):[]}));function Ys(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:pa(n);return i<0&&(i=Ke(r+i,0)),Ye(t,us(e,3),i)}function qs(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var s=r-1;return n!==i&&(s=pa(n),s=n<0?Ke(r+s,0):_n(s,r-1)),Ye(t,us(e,3),s,!0)}function zs(t){return(null==t?0:t.length)?yr(t,1):[]}function Ws(t){return t&&t.length?t[0]:i}var Gs=Xr((function(t){var e=Le(t,yi);return e.length&&e[0]===t[0]?Ar(e):[]})),Hs=Xr((function(t){var e=Qs(t),n=Le(t,yi);return e===Qs(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Ar(n,us(e,2)):[]})),Ks=Xr((function(t){var e=Qs(t),n=Le(t,yi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Ar(n,i,e):[]}));function Qs(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Xs=Xr(Js);function Js(t,e){return t&&t.length&&e&&e.length?Gr(t,e):t}var $s=ns((function(t,e){var n=null==t?0:t.length,r=or(t,e);return Hr(t,Le(e,(function(t){return vs(t,n)?+t:t})).sort(ki)),r}));function Zs(t){return null==t?t:En.call(t)}var to=Xr((function(t){return li(yr(t,1,Ho,!0))})),eo=Xr((function(t){var e=Qs(t);return Ho(e)&&(e=i),li(yr(t,1,Ho,!0),us(e,2))})),no=Xr((function(t){var e=Qs(t);return e="function"==typeof e?e:i,li(yr(t,1,Ho,!0),i,e)}));function ro(t){if(!t||!t.length)return[];var e=0;return t=xe(t,(function(t){if(Ho(t))return e=Ke(t.length,e),!0})),Je(e,(function(e){return Le(t,He(e))}))}function io(t,e){if(!t||!t.length)return[];var n=ro(t);return null==e?n:Le(n,(function(t){return Ie(e,i,t)}))}var so=Xr((function(t,e){return Ho(t)?hr(t,e):[]})),oo=Xr((function(t){return gi(xe(t,Ho))})),ao=Xr((function(t){var e=Qs(t);return Ho(e)&&(e=i),gi(xe(t,Ho),us(e,2))})),uo=Xr((function(t){var e=Qs(t);return e="function"==typeof e?e:i,gi(xe(t,Ho),i,e)})),co=Xr(ro);var lo=Xr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,io(t,n)}));function ho(t){var e=jn(t);return e.__chain__=!0,e}function fo(t,e){return e(t)}var po=ns((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,s=function(e){return or(e,t)};return!(e>1||this.__actions__.length)&&r instanceof zn&&vs(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:fo,args:[s],thisArg:i}),new qn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(s)}));var go=Mi((function(t,e,n){Lt.call(t,n)?++t[n]:sr(t,n,1)}));var mo=Vi(Ys),yo=Vi(qs);function vo(t,e){return(zo(t)?Ae:fr)(t,us(e,3))}function _o(t,e){return(zo(t)?Ne:dr)(t,us(e,3))}var wo=Mi((function(t,e,n){Lt.call(t,n)?t[n].push(e):sr(t,n,[e])}));var bo=Xr((function(t,e,r){var i=-1,s="function"==typeof e,o=Go(t)?n(t.length):[];return fr(t,(function(t){o[++i]=s?Ie(e,t,r):Nr(t,e,r)})),o})),So=Mi((function(t,e,n){sr(t,n,e)}));function Eo(t,e){return(zo(t)?Le:Ur)(t,us(e,3))}var To=Mi((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Do=Xr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&_s(t,e[0],e[1])?e=[]:n>2&&_s(e[0],e[1],e[2])&&(e=[e[0]]),zr(t,yr(e,1),[])})),ko=ie||function(){return ge.Date.now()};function Io(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Ji(t,h,i,i,i,i,e)}function Co(t,e){var n;if("function"!=typeof e)throw new At(s);return t=pa(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Ao=Xr((function(t,e,n){var r=1;if(n.length){var i=hn(n,as(Ao));r|=c}return Ji(t,r,e,n,i)})),No=Xr((function(t,e,n){var r=3;if(n.length){var i=hn(n,as(No));r|=c}return Ji(e,r,t,n,i)}));function Mo(t,e,n){var r,o,a,u,c,l,h=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new At(s);function g(e){var n=r,s=o;return r=o=i,h=e,u=t.apply(s,n)}function m(t){var n=t-l;return l===i||n>=e||n<0||d&&t-h>=a}function y(){var t=ko();if(m(t))return v(t);c=Ns(y,function(t){var n=e-(t-l);return d?_n(n,a-(t-h)):n}(t))}function v(t){return c=i,p&&r?g(t):(r=o=i,u)}function _(){var t=ko(),n=m(t);if(r=arguments,o=this,l=t,n){if(c===i)return function(t){return h=t,c=Ns(y,e),f?g(t):u}(l);if(d)return Si(c),c=Ns(y,e),g(l)}return c===i&&(c=Ns(y,e)),u}return e=ma(e)||0,ta(n)&&(f=!!n.leading,a=(d="maxWait"in n)?Ke(ma(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p),_.cancel=function(){c!==i&&Si(c),h=0,r=l=o=c=i},_.flush=function(){return c===i?u:v(ko())},_}var xo=Xr((function(t,e){return lr(t,1,e)})),Oo=Xr((function(t,e,n){return lr(t,ma(e)||0,n)}));function Ro(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new At(s);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(Ro.Cache||Hn),n}function Lo(t){if("function"!=typeof t)throw new At(s);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ro.Cache=Hn;var Po=wi((function(t,e){var n=(e=1==e.length&&zo(e[0])?Le(e[0],Ze(us())):Le(yr(e,1),Ze(us()))).length;return Xr((function(r){for(var i=-1,s=_n(r.length,n);++i<s;)r[i]=e[i].call(this,r[i]);return Ie(t,this,r)}))})),Fo=Xr((function(t,e){var n=hn(e,as(Fo));return Ji(t,c,i,e,n)})),Vo=Xr((function(t,e){var n=hn(e,as(Vo));return Ji(t,l,i,e,n)})),Uo=ns((function(t,e){return Ji(t,f,i,i,i,e)}));function jo(t,e){return t===e||t!==t&&e!==e}var Bo=Gi(kr),Yo=Gi((function(t,e){return t>=e})),qo=Mr(function(){return arguments}())?Mr:function(t){return ea(t)&&Lt.call(t,"callee")&&!Kt.call(t,"callee")},zo=n.isArray,Wo=be?Ze(be):function(t){return ea(t)&&Dr(t)==R};function Go(t){return null!=t&&Zo(t.length)&&!Jo(t)}function Ho(t){return ea(t)&&Go(t)}var Ko=ye||mu,Qo=Se?Ze(Se):function(t){return ea(t)&&Dr(t)==b};function Xo(t){if(!ea(t))return!1;var e=Dr(t);return e==S||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ia(t)}function Jo(t){if(!ta(t))return!1;var e=Dr(t);return e==E||e==T||"[object AsyncFunction]"==e||"[object Proxy]"==e}function $o(t){return"number"==typeof t&&t==pa(t)}function Zo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}function ta(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ea(t){return null!=t&&"object"==typeof t}var na=Ee?Ze(Ee):function(t){return ea(t)&&ps(t)==D};function ra(t){return"number"==typeof t||ea(t)&&Dr(t)==k}function ia(t){if(!ea(t)||Dr(t)!=I)return!1;var e=Gt(t);if(null===e)return!0;var n=Lt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Rt.call(n)==Ut}var sa=Te?Ze(Te):function(t){return ea(t)&&Dr(t)==A};var oa=De?Ze(De):function(t){return ea(t)&&ps(t)==N};function aa(t){return"string"==typeof t||!zo(t)&&ea(t)&&Dr(t)==M}function ua(t){return"symbol"==typeof t||ea(t)&&Dr(t)==x}var ca=ke?Ze(ke):function(t){return ea(t)&&Zo(t.length)&&!!ue[Dr(t)]};var la=Gi(Vr),ha=Gi((function(t,e){return t<=e}));function fa(t){if(!t)return[];if(Go(t))return aa(t)?gn(t):Ai(t);if(Jt&&t[Jt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Jt]());var e=ps(t);return(e==D?cn:e==N?fn:ja)(t)}function da(t){return t?(t=ma(t))===d||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}function pa(t){var e=da(t),n=e%1;return e===e?n?e-n:e:0}function ga(t){return t?ar(pa(t),0,m):0}function ma(t){if("number"==typeof t)return t;if(ua(t))return g;if(ta(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ta(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=$e(t);var n=yt.test(t);return n||_t.test(t)?fe(t.slice(2),n?2:8):mt.test(t)?g:+t}function ya(t){return Ni(t,xa(t))}function va(t){return null==t?"":ci(t)}var _a=xi((function(t,e){if(Es(e)||Go(e))Ni(e,Ma(e),t);else for(var n in e)Lt.call(e,n)&&er(t,n,e[n])})),wa=xi((function(t,e){Ni(e,xa(e),t)})),ba=xi((function(t,e,n,r){Ni(e,xa(e),t,r)})),Sa=xi((function(t,e,n,r){Ni(e,Ma(e),t,r)})),Ea=ns(or);var Ta=Xr((function(t,e){t=kt(t);var n=-1,r=e.length,s=r>2?e[2]:i;for(s&&_s(e[0],e[1],s)&&(r=1);++n<r;)for(var o=e[n],a=xa(o),u=-1,c=a.length;++u<c;){var l=a[u],h=t[l];(h===i||jo(h,xt[l])&&!Lt.call(t,l))&&(t[l]=o[l])}return t})),Da=Xr((function(t){return t.push(i,Zi),Ie(Ra,i,t)}));function ka(t,e,n){var r=null==t?i:Er(t,e);return r===i?n:r}function Ia(t,e){return null!=t&&gs(t,e,Cr)}var Ca=Bi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Vt.call(e)),t[e]=n}),tu(ru)),Aa=Bi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Vt.call(e)),Lt.call(t,e)?t[e].push(n):t[e]=[n]}),us),Na=Xr(Nr);function Ma(t){return Go(t)?Xn(t):Pr(t)}function xa(t){return Go(t)?Xn(t,!0):Fr(t)}var Oa=xi((function(t,e,n){Yr(t,e,n)})),Ra=xi((function(t,e,n,r){Yr(t,e,n,r)})),La=ns((function(t,e){var n={};if(null==t)return n;var r=!1;e=Le(e,(function(e){return e=_i(e,t),r||(r=e.length>1),e})),Ni(t,is(t),n),r&&(n=ur(n,7,ts));for(var i=e.length;i--;)hi(n,e[i]);return n}));var Pa=ns((function(t,e){return null==t?{}:function(t,e){return Wr(t,e,(function(e,n){return Ia(t,n)}))}(t,e)}));function Fa(t,e){if(null==t)return{};var n=Le(is(t),(function(t){return[t]}));return e=us(e),Wr(t,n,(function(t,n){return e(t,n[0])}))}var Va=Xi(Ma),Ua=Xi(xa);function ja(t){return null==t?[]:tn(t,Ma(t))}var Ba=Pi((function(t,e,n){return e=e.toLowerCase(),t+(n?Ya(e):e)}));function Ya(t){return Xa(va(t).toLowerCase())}function qa(t){return(t=va(t))&&t.replace(bt,sn).replace(ee,"")}var za=Pi((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Wa=Pi((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ga=Li("toLowerCase");var Ha=Pi((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Ka=Pi((function(t,e,n){return t+(n?" ":"")+Xa(e)}));var Qa=Pi((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Xa=Li("toUpperCase");function Ja(t,e,n){return t=va(t),(e=n?i:e)===i?function(t){return se.test(t)}(t)?function(t){return t.match(re)||[]}(t):function(t){return t.match(ht)||[]}(t):t.match(e)||[]}var $a=Xr((function(t,e){try{return Ie(t,i,e)}catch(n){return Xo(n)?n:new at(n)}})),Za=ns((function(t,e){return Ae(e,(function(e){e=Ps(e),sr(t,e,Ao(t[e],t))})),t}));function tu(t){return function(){return t}}var eu=Ui(),nu=Ui(!0);function ru(t){return t}function iu(t){return Lr("function"==typeof t?t:ur(t,1))}var su=Xr((function(t,e){return function(n){return Nr(n,t,e)}})),ou=Xr((function(t,e){return function(n){return Nr(t,n,e)}}));function au(t,e,n){var r=Ma(e),i=Sr(e,r);null!=n||ta(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Sr(e,Ma(e)));var s=!(ta(n)&&"chain"in n)||!!n.chain,o=Jo(t);return Ae(i,(function(n){var r=e[n];t[n]=r,o&&(t.prototype[n]=function(){var e=this.__chain__;if(s||e){var n=t(this.__wrapped__);return(n.__actions__=Ai(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Pe([this.value()],arguments))})})),t}function uu(){}var cu=qi(Le),lu=qi(Me),hu=qi(Ue);function fu(t){return ws(t)?He(Ps(t)):function(t){return function(e){return Er(e,t)}}(t)}var du=Wi(),pu=Wi(!0);function gu(){return[]}function mu(){return!1}var yu=Yi((function(t,e){return t+e}),0),vu=Ki("ceil"),_u=Yi((function(t,e){return t/e}),1),wu=Ki("floor");var bu=Yi((function(t,e){return t*e}),1),Su=Ki("round"),Eu=Yi((function(t,e){return t-e}),0);return jn.after=function(t,e){if("function"!=typeof e)throw new At(s);return t=pa(t),function(){if(--t<1)return e.apply(this,arguments)}},jn.ary=Io,jn.assign=_a,jn.assignIn=wa,jn.assignInWith=ba,jn.assignWith=Sa,jn.at=Ea,jn.before=Co,jn.bind=Ao,jn.bindAll=Za,jn.bindKey=No,jn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return zo(t)?t:[t]},jn.chain=ho,jn.chunk=function(t,e,r){e=(r?_s(t,e,r):e===i)?1:Ke(pa(e),0);var s=null==t?0:t.length;if(!s||e<1)return[];for(var o=0,a=0,u=n(de(s/e));o<s;)u[a++]=ri(t,o,o+=e);return u},jn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var s=t[e];s&&(i[r++]=s)}return i},jn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),r=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Pe(zo(r)?Ai(r):[r],yr(e,1))},jn.cond=function(t){var e=null==t?0:t.length,n=us();return t=e?Le(t,(function(t){if("function"!=typeof t[1])throw new At(s);return[n(t[0]),t[1]]})):[],Xr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Ie(i[0],this,n))return Ie(i[1],this,n)}}))},jn.conforms=function(t){return function(t){var e=Ma(t);return function(n){return cr(n,t,e)}}(ur(t,1))},jn.constant=tu,jn.countBy=go,jn.create=function(t,e){var n=Bn(t);return null==e?n:ir(n,e)},jn.curry=function t(e,n,r){var s=Ji(e,8,i,i,i,i,i,n=r?i:n);return s.placeholder=t.placeholder,s},jn.curryRight=function t(e,n,r){var s=Ji(e,u,i,i,i,i,i,n=r?i:n);return s.placeholder=t.placeholder,s},jn.debounce=Mo,jn.defaults=Ta,jn.defaultsDeep=Da,jn.defer=xo,jn.delay=Oo,jn.difference=Us,jn.differenceBy=js,jn.differenceWith=Bs,jn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ri(t,(e=n||e===i?1:pa(e))<0?0:e,r):[]},jn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ri(t,0,(e=r-(e=n||e===i?1:pa(e)))<0?0:e):[]},jn.dropRightWhile=function(t,e){return t&&t.length?di(t,us(e,3),!0,!0):[]},jn.dropWhile=function(t,e){return t&&t.length?di(t,us(e,3),!0):[]},jn.fill=function(t,e,n,r){var s=null==t?0:t.length;return s?(n&&"number"!=typeof n&&_s(t,e,n)&&(n=0,r=s),function(t,e,n,r){var s=t.length;for((n=pa(n))<0&&(n=-n>s?0:s+n),(r=r===i||r>s?s:pa(r))<0&&(r+=s),r=n>r?0:ga(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},jn.filter=function(t,e){return(zo(t)?xe:mr)(t,us(e,3))},jn.flatMap=function(t,e){return yr(Eo(t,e),1)},jn.flatMapDeep=function(t,e){return yr(Eo(t,e),d)},jn.flatMapDepth=function(t,e,n){return n=n===i?1:pa(n),yr(Eo(t,e),n)},jn.flatten=zs,jn.flattenDeep=function(t){return(null==t?0:t.length)?yr(t,d):[]},jn.flattenDepth=function(t,e){return(null==t?0:t.length)?yr(t,e=e===i?1:pa(e)):[]},jn.flip=function(t){return Ji(t,512)},jn.flow=eu,jn.flowRight=nu,jn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},jn.functions=function(t){return null==t?[]:Sr(t,Ma(t))},jn.functionsIn=function(t){return null==t?[]:Sr(t,xa(t))},jn.groupBy=wo,jn.initial=function(t){return(null==t?0:t.length)?ri(t,0,-1):[]},jn.intersection=Gs,jn.intersectionBy=Hs,jn.intersectionWith=Ks,jn.invert=Ca,jn.invertBy=Aa,jn.invokeMap=bo,jn.iteratee=iu,jn.keyBy=So,jn.keys=Ma,jn.keysIn=xa,jn.map=Eo,jn.mapKeys=function(t,e){var n={};return e=us(e,3),wr(t,(function(t,r,i){sr(n,e(t,r,i),t)})),n},jn.mapValues=function(t,e){var n={};return e=us(e,3),wr(t,(function(t,r,i){sr(n,r,e(t,r,i))})),n},jn.matches=function(t){return jr(ur(t,1))},jn.matchesProperty=function(t,e){return Br(t,ur(e,1))},jn.memoize=Ro,jn.merge=Oa,jn.mergeWith=Ra,jn.method=su,jn.methodOf=ou,jn.mixin=au,jn.negate=Lo,jn.nthArg=function(t){return t=pa(t),Xr((function(e){return qr(e,t)}))},jn.omit=La,jn.omitBy=function(t,e){return Fa(t,Lo(us(e)))},jn.once=function(t){return Co(2,t)},jn.orderBy=function(t,e,n,r){return null==t?[]:(zo(e)||(e=null==e?[]:[e]),zo(n=r?i:n)||(n=null==n?[]:[n]),zr(t,e,n))},jn.over=cu,jn.overArgs=Po,jn.overEvery=lu,jn.overSome=hu,jn.partial=Fo,jn.partialRight=Vo,jn.partition=To,jn.pick=Pa,jn.pickBy=Fa,jn.property=fu,jn.propertyOf=function(t){return function(e){return null==t?i:Er(t,e)}},jn.pull=Xs,jn.pullAll=Js,jn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,us(n,2)):t},jn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,i,n):t},jn.pullAt=$s,jn.range=du,jn.rangeRight=pu,jn.rearg=Uo,jn.reject=function(t,e){return(zo(t)?xe:mr)(t,Lo(us(e,3)))},jn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],s=t.length;for(e=us(e,3);++r<s;){var o=t[r];e(o,r,t)&&(n.push(o),i.push(r))}return Hr(t,i),n},jn.rest=function(t,e){if("function"!=typeof t)throw new At(s);return Xr(t,e=e===i?e:pa(e))},jn.reverse=Zs,jn.sampleSize=function(t,e,n){return e=(n?_s(t,e,n):e===i)?1:pa(e),(zo(t)?$n:$r)(t,e)},jn.set=function(t,e,n){return null==t?t:Zr(t,e,n)},jn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Zr(t,e,n,r)},jn.shuffle=function(t){return(zo(t)?Zn:ni)(t)},jn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&_s(t,e,n)?(e=0,n=r):(e=null==e?0:pa(e),n=n===i?r:pa(n)),ri(t,e,n)):[]},jn.sortBy=Do,jn.sortedUniq=function(t){return t&&t.length?ai(t):[]},jn.sortedUniqBy=function(t,e){return t&&t.length?ai(t,us(e,2)):[]},jn.split=function(t,e,n){return n&&"number"!=typeof n&&_s(t,e,n)&&(e=n=i),(n=n===i?m:n>>>0)?(t=va(t))&&("string"==typeof e||null!=e&&!sa(e))&&!(e=ci(e))&&un(t)?bi(gn(t),0,n):t.split(e,n):[]},jn.spread=function(t,e){if("function"!=typeof t)throw new At(s);return e=null==e?0:Ke(pa(e),0),Xr((function(n){var r=n[e],i=bi(n,0,e);return r&&Pe(i,r),Ie(t,this,i)}))},jn.tail=function(t){var e=null==t?0:t.length;return e?ri(t,1,e):[]},jn.take=function(t,e,n){return t&&t.length?ri(t,0,(e=n||e===i?1:pa(e))<0?0:e):[]},jn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ri(t,(e=r-(e=n||e===i?1:pa(e)))<0?0:e,r):[]},jn.takeRightWhile=function(t,e){return t&&t.length?di(t,us(e,3),!1,!0):[]},jn.takeWhile=function(t,e){return t&&t.length?di(t,us(e,3)):[]},jn.tap=function(t,e){return e(t),t},jn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new At(s);return ta(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Mo(t,e,{leading:r,maxWait:e,trailing:i})},jn.thru=fo,jn.toArray=fa,jn.toPairs=Va,jn.toPairsIn=Ua,jn.toPath=function(t){return zo(t)?Le(t,Ps):ua(t)?[t]:Ai(Ls(va(t)))},jn.toPlainObject=ya,jn.transform=function(t,e,n){var r=zo(t),i=r||Ko(t)||ca(t);if(e=us(e,4),null==n){var s=t&&t.constructor;n=i?r?new s:[]:ta(t)&&Jo(s)?Bn(Gt(t)):{}}return(i?Ae:wr)(t,(function(t,r,i){return e(n,t,r,i)})),n},jn.unary=function(t){return Io(t,1)},jn.union=to,jn.unionBy=eo,jn.unionWith=no,jn.uniq=function(t){return t&&t.length?li(t):[]},jn.uniqBy=function(t,e){return t&&t.length?li(t,us(e,2)):[]},jn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?li(t,i,e):[]},jn.unset=function(t,e){return null==t||hi(t,e)},jn.unzip=ro,jn.unzipWith=io,jn.update=function(t,e,n){return null==t?t:fi(t,e,vi(n))},jn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:fi(t,e,vi(n),r)},jn.values=ja,jn.valuesIn=function(t){return null==t?[]:tn(t,xa(t))},jn.without=so,jn.words=Ja,jn.wrap=function(t,e){return Fo(vi(e),t)},jn.xor=oo,jn.xorBy=ao,jn.xorWith=uo,jn.zip=co,jn.zipObject=function(t,e){return mi(t||[],e||[],er)},jn.zipObjectDeep=function(t,e){return mi(t||[],e||[],Zr)},jn.zipWith=lo,jn.entries=Va,jn.entriesIn=Ua,jn.extend=wa,jn.extendWith=ba,au(jn,jn),jn.add=yu,jn.attempt=$a,jn.camelCase=Ba,jn.capitalize=Ya,jn.ceil=vu,jn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=ma(n))===n?n:0),e!==i&&(e=(e=ma(e))===e?e:0),ar(ma(t),e,n)},jn.clone=function(t){return ur(t,4)},jn.cloneDeep=function(t){return ur(t,5)},jn.cloneDeepWith=function(t,e){return ur(t,5,e="function"==typeof e?e:i)},jn.cloneWith=function(t,e){return ur(t,4,e="function"==typeof e?e:i)},jn.conformsTo=function(t,e){return null==e||cr(t,e,Ma(e))},jn.deburr=qa,jn.defaultTo=function(t,e){return null==t||t!==t?e:t},jn.divide=_u,jn.endsWith=function(t,e,n){t=va(t),e=ci(e);var r=t.length,s=n=n===i?r:ar(pa(n),0,r);return(n-=e.length)>=0&&t.slice(n,s)==e},jn.eq=jo,jn.escape=function(t){return(t=va(t))&&J.test(t)?t.replace(Q,on):t},jn.escapeRegExp=function(t){return(t=va(t))&&st.test(t)?t.replace(it,"\\$&"):t},jn.every=function(t,e,n){var r=zo(t)?Me:pr;return n&&_s(t,e,n)&&(e=i),r(t,us(e,3))},jn.find=mo,jn.findIndex=Ys,jn.findKey=function(t,e){return Be(t,us(e,3),wr)},jn.findLast=yo,jn.findLastIndex=qs,jn.findLastKey=function(t,e){return Be(t,us(e,3),br)},jn.floor=wu,jn.forEach=vo,jn.forEachRight=_o,jn.forIn=function(t,e){return null==t?t:vr(t,us(e,3),xa)},jn.forInRight=function(t,e){return null==t?t:_r(t,us(e,3),xa)},jn.forOwn=function(t,e){return t&&wr(t,us(e,3))},jn.forOwnRight=function(t,e){return t&&br(t,us(e,3))},jn.get=ka,jn.gt=Bo,jn.gte=Yo,jn.has=function(t,e){return null!=t&&gs(t,e,Ir)},jn.hasIn=Ia,jn.head=Ws,jn.identity=ru,jn.includes=function(t,e,n,r){t=Go(t)?t:ja(t),n=n&&!r?pa(n):0;var i=t.length;return n<0&&(n=Ke(i+n,0)),aa(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&qe(t,e,n)>-1},jn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:pa(n);return i<0&&(i=Ke(r+i,0)),qe(t,e,i)},jn.inRange=function(t,e,n){return e=da(e),n===i?(n=e,e=0):n=da(n),function(t,e,n){return t>=_n(e,n)&&t<Ke(e,n)}(t=ma(t),e,n)},jn.invoke=Na,jn.isArguments=qo,jn.isArray=zo,jn.isArrayBuffer=Wo,jn.isArrayLike=Go,jn.isArrayLikeObject=Ho,jn.isBoolean=function(t){return!0===t||!1===t||ea(t)&&Dr(t)==w},jn.isBuffer=Ko,jn.isDate=Qo,jn.isElement=function(t){return ea(t)&&1===t.nodeType&&!ia(t)},jn.isEmpty=function(t){if(null==t)return!0;if(Go(t)&&(zo(t)||"string"==typeof t||"function"==typeof t.splice||Ko(t)||ca(t)||qo(t)))return!t.length;var e=ps(t);if(e==D||e==N)return!t.size;if(Es(t))return!Pr(t).length;for(var n in t)if(Lt.call(t,n))return!1;return!0},jn.isEqual=function(t,e){return xr(t,e)},jn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?xr(t,e,i,n):!!r},jn.isError=Xo,jn.isFinite=function(t){return"number"==typeof t&&_e(t)},jn.isFunction=Jo,jn.isInteger=$o,jn.isLength=Zo,jn.isMap=na,jn.isMatch=function(t,e){return t===e||Or(t,e,ls(e))},jn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Or(t,e,ls(e),n)},jn.isNaN=function(t){return ra(t)&&t!=+t},jn.isNative=function(t){if(Ss(t))throw new at("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rr(t)},jn.isNil=function(t){return null==t},jn.isNull=function(t){return null===t},jn.isNumber=ra,jn.isObject=ta,jn.isObjectLike=ea,jn.isPlainObject=ia,jn.isRegExp=sa,jn.isSafeInteger=function(t){return $o(t)&&t>=-9007199254740991&&t<=p},jn.isSet=oa,jn.isString=aa,jn.isSymbol=ua,jn.isTypedArray=ca,jn.isUndefined=function(t){return t===i},jn.isWeakMap=function(t){return ea(t)&&ps(t)==O},jn.isWeakSet=function(t){return ea(t)&&"[object WeakSet]"==Dr(t)},jn.join=function(t,e){return null==t?"":we.call(t,e)},jn.kebabCase=za,jn.last=Qs,jn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var s=r;return n!==i&&(s=(s=pa(n))<0?Ke(r+s,0):_n(s,r-1)),e===e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,s):Ye(t,We,s,!0)},jn.lowerCase=Wa,jn.lowerFirst=Ga,jn.lt=la,jn.lte=ha,jn.max=function(t){return t&&t.length?gr(t,ru,kr):i},jn.maxBy=function(t,e){return t&&t.length?gr(t,us(e,2),kr):i},jn.mean=function(t){return Ge(t,ru)},jn.meanBy=function(t,e){return Ge(t,us(e,2))},jn.min=function(t){return t&&t.length?gr(t,ru,Vr):i},jn.minBy=function(t,e){return t&&t.length?gr(t,us(e,2),Vr):i},jn.stubArray=gu,jn.stubFalse=mu,jn.stubObject=function(){return{}},jn.stubString=function(){return""},jn.stubTrue=function(){return!0},jn.multiply=bu,jn.nth=function(t,e){return t&&t.length?qr(t,pa(e)):i},jn.noConflict=function(){return ge._===this&&(ge._=jt),this},jn.noop=uu,jn.now=ko,jn.pad=function(t,e,n){t=va(t);var r=(e=pa(e))?pn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return zi(pe(i),n)+t+zi(de(i),n)},jn.padEnd=function(t,e,n){t=va(t);var r=(e=pa(e))?pn(t):0;return e&&r<e?t+zi(e-r,n):t},jn.padStart=function(t,e,n){t=va(t);var r=(e=pa(e))?pn(t):0;return e&&r<e?zi(e-r,n)+t:t},jn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),bn(va(t).replace(ot,""),e||0)},jn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&_s(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=da(t),e===i?(e=t,t=0):e=da(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var s=Sn();return _n(t+s*(e-t+he("1e-"+((s+"").length-1))),e)}return Kr(t,e)},jn.reduce=function(t,e,n){var r=zo(t)?Fe:Qe,i=arguments.length<3;return r(t,us(e,4),n,i,fr)},jn.reduceRight=function(t,e,n){var r=zo(t)?Ve:Qe,i=arguments.length<3;return r(t,us(e,4),n,i,dr)},jn.repeat=function(t,e,n){return e=(n?_s(t,e,n):e===i)?1:pa(e),Qr(va(t),e)},jn.replace=function(){var t=arguments,e=va(t[0]);return t.length<3?e:e.replace(t[1],t[2])},jn.result=function(t,e,n){var r=-1,s=(e=_i(e,t)).length;for(s||(s=1,t=i);++r<s;){var o=null==t?i:t[Ps(e[r])];o===i&&(r=s,o=n),t=Jo(o)?o.call(t):o}return t},jn.round=Su,jn.runInContext=t,jn.sample=function(t){return(zo(t)?Jn:Jr)(t)},jn.size=function(t){if(null==t)return 0;if(Go(t))return aa(t)?pn(t):t.length;var e=ps(t);return e==D||e==N?t.size:Pr(t).length},jn.snakeCase=Ha,jn.some=function(t,e,n){var r=zo(t)?Ue:ii;return n&&_s(t,e,n)&&(e=i),r(t,us(e,3))},jn.sortedIndex=function(t,e){return si(t,e)},jn.sortedIndexBy=function(t,e,n){return oi(t,e,us(n,2))},jn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=si(t,e);if(r<n&&jo(t[r],e))return r}return-1},jn.sortedLastIndex=function(t,e){return si(t,e,!0)},jn.sortedLastIndexBy=function(t,e,n){return oi(t,e,us(n,2),!0)},jn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=si(t,e,!0)-1;if(jo(t[n],e))return n}return-1},jn.startCase=Ka,jn.startsWith=function(t,e,n){return t=va(t),n=null==n?0:ar(pa(n),0,t.length),e=ci(e),t.slice(n,n+e.length)==e},jn.subtract=Eu,jn.sum=function(t){return t&&t.length?Xe(t,ru):0},jn.sumBy=function(t,e){return t&&t.length?Xe(t,us(e,2)):0},jn.template=function(t,e,n){var r=jn.templateSettings;n&&_s(t,e,n)&&(e=i),t=va(t),e=ba({},e,r,$i);var s,o,a=ba({},e.imports,r.imports,$i),u=Ma(a),c=tn(a,u),l=0,h=e.interpolate||St,f="__p += '",d=It((e.escape||St).source+"|"+h.source+"|"+(h===tt?pt:St).source+"|"+(e.evaluate||St).source+"|$","g"),p="//# sourceURL="+(Lt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ae+"]")+"\n";t.replace(d,(function(e,n,r,i,a,u){return r||(r=i),f+=t.slice(l,u).replace(Et,an),n&&(s=!0,f+="' +\n__e("+n+") +\n'"),a&&(o=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),f+="';\n";var g=Lt.call(e,"variable")&&e.variable;if(g){if(ft.test(g))throw new at("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(o?f.replace(W,""):f).replace(G,"$1").replace(H,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=$a((function(){return Tt(u,p+"return "+f).apply(i,c)}));if(m.source=f,Xo(m))throw m;return m},jn.times=function(t,e){if((t=pa(t))<1||t>p)return[];var n=m,r=_n(t,m);e=us(e),t-=m;for(var i=Je(r,e);++n<t;)e(n);return i},jn.toFinite=da,jn.toInteger=pa,jn.toLength=ga,jn.toLower=function(t){return va(t).toLowerCase()},jn.toNumber=ma,jn.toSafeInteger=function(t){return t?ar(pa(t),-9007199254740991,p):0===t?t:0},jn.toString=va,jn.toUpper=function(t){return va(t).toUpperCase()},jn.trim=function(t,e,n){if((t=va(t))&&(n||e===i))return $e(t);if(!t||!(e=ci(e)))return t;var r=gn(t),s=gn(e);return bi(r,nn(r,s),rn(r,s)+1).join("")},jn.trimEnd=function(t,e,n){if((t=va(t))&&(n||e===i))return t.slice(0,mn(t)+1);if(!t||!(e=ci(e)))return t;var r=gn(t);return bi(r,0,rn(r,gn(e))+1).join("")},jn.trimStart=function(t,e,n){if((t=va(t))&&(n||e===i))return t.replace(ot,"");if(!t||!(e=ci(e)))return t;var r=gn(t);return bi(r,nn(r,gn(e))).join("")},jn.truncate=function(t,e){var n=30,r="...";if(ta(e)){var s="separator"in e?e.separator:s;n="length"in e?pa(e.length):n,r="omission"in e?ci(e.omission):r}var o=(t=va(t)).length;if(un(t)){var a=gn(t);o=a.length}if(n>=o)return t;var u=n-pn(r);if(u<1)return r;var c=a?bi(a,0,u).join(""):t.slice(0,u);if(s===i)return c+r;if(a&&(u+=c.length-u),sa(s)){if(t.slice(u).search(s)){var l,h=c;for(s.global||(s=It(s.source,va(gt.exec(s))+"g")),s.lastIndex=0;l=s.exec(h);)var f=l.index;c=c.slice(0,f===i?u:f)}}else if(t.indexOf(ci(s),u)!=u){var d=c.lastIndexOf(s);d>-1&&(c=c.slice(0,d))}return c+r},jn.unescape=function(t){return(t=va(t))&&X.test(t)?t.replace(K,yn):t},jn.uniqueId=function(t){var e=++Pt;return va(t)+e},jn.upperCase=Qa,jn.upperFirst=Xa,jn.each=vo,jn.eachRight=_o,jn.first=Ws,au(jn,function(){var t={};return wr(jn,(function(e,n){Lt.call(jn.prototype,n)||(t[n]=e)})),t}(),{chain:!1}),jn.VERSION="4.17.21",Ae(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){jn[t].placeholder=jn})),Ae(["drop","take"],(function(t,e){zn.prototype[t]=function(n){n=n===i?1:Ke(pa(n),0);var r=this.__filtered__&&!e?new zn(this):this.clone();return r.__filtered__?r.__takeCount__=_n(n,r.__takeCount__):r.__views__.push({size:_n(n,m),type:t+(r.__dir__<0?"Right":"")}),r},zn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ae(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;zn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:us(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Ae(["head","last"],(function(t,e){var n="take"+(e?"Right":"");zn.prototype[t]=function(){return this[n](1).value()[0]}})),Ae(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");zn.prototype[t]=function(){return this.__filtered__?new zn(this):this[n](1)}})),zn.prototype.compact=function(){return this.filter(ru)},zn.prototype.find=function(t){return this.filter(t).head()},zn.prototype.findLast=function(t){return this.reverse().find(t)},zn.prototype.invokeMap=Xr((function(t,e){return"function"==typeof t?new zn(this):this.map((function(n){return Nr(n,t,e)}))})),zn.prototype.reject=function(t){return this.filter(Lo(us(t)))},zn.prototype.slice=function(t,e){t=pa(t);var n=this;return n.__filtered__&&(t>0||e<0)?new zn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=pa(e))<0?n.dropRight(-e):n.take(e-t)),n)},zn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},zn.prototype.toArray=function(){return this.take(m)},wr(zn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),s=jn[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);s&&(jn.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,u=e instanceof zn,c=a[0],l=u||zo(e),h=function(t){var e=s.apply(jn,Pe([t],a));return r&&f?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,d=!!this.__actions__.length,p=o&&!f,g=u&&!d;if(!o&&l){e=g?e:new zn(this);var m=t.apply(e,a);return m.__actions__.push({func:fo,args:[h],thisArg:i}),new qn(m,f)}return p&&g?t.apply(this,a):(m=this.thru(h),p?r?m.value()[0]:m.value():m)})})),Ae(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Nt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);jn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(zo(i)?i:[],t)}return this[n]((function(n){return e.apply(zo(n)?n:[],t)}))}})),wr(zn.prototype,(function(t,e){var n=jn[e];if(n){var r=n.name+"";Lt.call(Mn,r)||(Mn[r]=[]),Mn[r].push({name:e,func:n})}})),Mn[ji(i,2).name]=[{name:"wrapper",func:i}],zn.prototype.clone=function(){var t=new zn(this.__wrapped__);return t.__actions__=Ai(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ai(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ai(this.__views__),t},zn.prototype.reverse=function(){if(this.__filtered__){var t=new zn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},zn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=zo(t),r=e<0,i=n?t.length:0,s=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var s=n[r],o=s.size;switch(s.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=_n(e,t+o);break;case"takeRight":t=Ke(t,e-o)}}return{start:t,end:e}}(0,i,this.__views__),o=s.start,a=s.end,u=a-o,c=r?a:o-1,l=this.__iteratees__,h=l.length,f=0,d=_n(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return pi(t,this.__actions__);var p=[];t:for(;u--&&f<d;){for(var g=-1,m=t[c+=e];++g<h;){var y=l[g],v=y.iteratee,_=y.type,w=v(m);if(2==_)m=w;else if(!w){if(1==_)continue t;break t}}p[f++]=m}return p},jn.prototype.at=po,jn.prototype.chain=function(){return ho(this)},jn.prototype.commit=function(){return new qn(this.value(),this.__chain__)},jn.prototype.next=function(){this.__values__===i&&(this.__values__=fa(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},jn.prototype.plant=function(t){for(var e,n=this;n instanceof Yn;){var r=Vs(n);r.__index__=0,r.__values__=i,e?s.__wrapped__=r:e=r;var s=r;n=n.__wrapped__}return s.__wrapped__=t,e},jn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof zn){var e=t;return this.__actions__.length&&(e=new zn(this)),(e=e.reverse()).__actions__.push({func:fo,args:[Zs],thisArg:i}),new qn(e,this.__chain__)}return this.thru(Zs)},jn.prototype.toJSON=jn.prototype.valueOf=jn.prototype.value=function(){return pi(this.__wrapped__,this.__actions__)},jn.prototype.first=jn.prototype.head,Jt&&(jn.prototype[Jt]=function(){return this}),jn}();ge._=vn,(r=function(){return vn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},59051:function(t,e,n){(t=n.nmd(t)).exports=function(){"use strict";var e,n;function r(){return e.apply(null,arguments)}function i(t){e=t}function s(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function o(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function u(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(a(t,e))return!1;return!0}function c(t){return void 0===t}function l(t){return"number"===typeof t||"[object Number]"===Object.prototype.toString.call(t)}function h(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function f(t,e){var n,r=[],i=t.length;for(n=0;n<i;++n)r.push(e(t[n],n));return r}function d(t,e){for(var n in e)a(e,n)&&(t[n]=e[n]);return a(e,"toString")&&(t.toString=e.toString),a(e,"valueOf")&&(t.valueOf=e.valueOf),t}function p(t,e,n,r){return Kn(t,e,n,r,!0).utc()}function g(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function m(t){return null==t._pf&&(t._pf=g()),t._pf}function y(t){var e=null,r=!1,i=t._d&&!isNaN(t._d.getTime());return i&&(e=m(t),r=n.call(e.parsedDateParts,(function(t){return null!=t})),i=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&r),t._strict&&(i=i&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)),null!=Object.isFrozen&&Object.isFrozen(t)?i:(t._isValid=i,t._isValid)}function v(t){var e=p(NaN);return null!=t?d(m(e),t):m(e).userInvalidated=!0,e}n=Array.prototype.some?Array.prototype.some:function(t){var e,n=Object(this),r=n.length>>>0;for(e=0;e<r;e++)if(e in n&&t.call(this,n[e],e,n))return!0;return!1};var _=r.momentProperties=[],w=!1;function b(t,e){var n,r,i,s=_.length;if(c(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),c(e._i)||(t._i=e._i),c(e._f)||(t._f=e._f),c(e._l)||(t._l=e._l),c(e._strict)||(t._strict=e._strict),c(e._tzm)||(t._tzm=e._tzm),c(e._isUTC)||(t._isUTC=e._isUTC),c(e._offset)||(t._offset=e._offset),c(e._pf)||(t._pf=m(e)),c(e._locale)||(t._locale=e._locale),s>0)for(n=0;n<s;n++)c(i=e[r=_[n]])||(t[r]=i);return t}function S(t){b(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===w&&(w=!0,r.updateOffset(this),w=!1)}function E(t){return t instanceof S||null!=t&&null!=t._isAMomentObject}function T(t){!1===r.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function D(t,e){var n=!0;return d((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,t),n){var i,s,o,u=[],c=arguments.length;for(s=0;s<c;s++){if(i="","object"===typeof arguments[s]){for(o in i+="\n["+s+"] ",arguments[0])a(arguments[0],o)&&(i+=o+": "+arguments[0][o]+", ");i=i.slice(0,-2)}else i=arguments[s];u.push(i)}T(t+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var k,I={};function C(t,e){null!=r.deprecationHandler&&r.deprecationHandler(t,e),I[t]||(T(e),I[t]=!0)}function A(t){return"undefined"!==typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function N(t){var e,n;for(n in t)a(t,n)&&(A(e=t[n])?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function M(t,e){var n,r=d({},t);for(n in e)a(e,n)&&(o(t[n])&&o(e[n])?(r[n]={},d(r[n],t[n]),d(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)a(t,n)&&!a(e,n)&&o(t[n])&&(r[n]=d({},r[n]));return r}function x(t){null!=t&&this.set(t)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,k=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)a(t,e)&&n.push(e);return n};var O={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function R(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return A(r)?r.call(e,n):r}function L(t,e,n){var r=""+Math.abs(t),i=e-r.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var P=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,F=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,V={},U={};function j(t,e,n,r){var i=r;"string"===typeof r&&(i=function(){return this[r]()}),t&&(U[t]=i),e&&(U[e[0]]=function(){return L(i.apply(this,arguments),e[1],e[2])}),n&&(U[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function B(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function Y(t){var e,n,r=t.match(P);for(e=0,n=r.length;e<n;e++)U[r[e]]?r[e]=U[r[e]]:r[e]=B(r[e]);return function(e){var i,s="";for(i=0;i<n;i++)s+=A(r[i])?r[i].call(e,t):r[i];return s}}function q(t,e){return t.isValid()?(e=z(e,t.localeData()),V[e]=V[e]||Y(e),V[e](t)):t.localeData().invalidDate()}function z(t,e){var n=5;function r(t){return e.longDateFormat(t)||t}for(F.lastIndex=0;n>=0&&F.test(t);)t=t.replace(F,r),F.lastIndex=0,n-=1;return t}var W={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function G(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(P).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])}var H="Invalid date";function K(){return this._invalidDate}var Q="%d",X=/\d{1,2}/;function J(t){return this._ordinal.replace("%d",t)}var $={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Z(t,e,n,r){var i=this._relativeTime[n];return A(i)?i(t,e,n,r):i.replace(/%d/i,t)}function tt(t,e){var n=this._relativeTime[t>0?"future":"past"];return A(n)?n(e):n.replace(/%s/i,e)}var et={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function nt(t){return"string"===typeof t?et[t]||et[t.toLowerCase()]:void 0}function rt(t){var e,n,r={};for(n in t)a(t,n)&&(e=nt(n))&&(r[e]=t[n]);return r}var it={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function st(t){var e,n=[];for(e in t)a(t,e)&&n.push({unit:e,priority:it[e]});return n.sort((function(t,e){return t.priority-e.priority})),n}var ot,at=/\d/,ut=/\d\d/,ct=/\d{3}/,lt=/\d{4}/,ht=/[+-]?\d{6}/,ft=/\d\d?/,dt=/\d\d\d\d?/,pt=/\d\d\d\d\d\d?/,gt=/\d{1,3}/,mt=/\d{1,4}/,yt=/[+-]?\d{1,6}/,vt=/\d+/,_t=/[+-]?\d+/,wt=/Z|[+-]\d\d:?\d\d/gi,bt=/Z|[+-]\d\d(?::?\d\d)?/gi,St=/[+-]?\d+(\.\d{1,3})?/,Et=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Tt=/^[1-9]\d?/,Dt=/^([1-9]\d|\d)/;function kt(t,e,n){ot[t]=A(e)?e:function(t,r){return t&&n?n:e}}function It(t,e){return a(ot,t)?ot[t](e._strict,e._locale):new RegExp(Ct(t))}function Ct(t){return At(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,r,i){return e||n||r||i})))}function At(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Nt(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function Mt(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=Nt(e)),n}ot={};var xt={};function Ot(t,e){var n,r,i=e;for("string"===typeof t&&(t=[t]),l(e)&&(i=function(t,n){n[e]=Mt(t)}),r=t.length,n=0;n<r;n++)xt[t[n]]=i}function Rt(t,e){Ot(t,(function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)}))}function Lt(t,e,n){null!=e&&a(xt,t)&&xt[t](e,n._a,n,t)}function Pt(t){return t%4===0&&t%100!==0||t%400===0}var Ft=0,Vt=1,Ut=2,jt=3,Bt=4,Yt=5,qt=6,zt=7,Wt=8;function Gt(t){return Pt(t)?366:365}j("Y",0,0,(function(){var t=this.year();return t<=9999?L(t,4):"+"+t})),j(0,["YY",2],0,(function(){return this.year()%100})),j(0,["YYYY",4],0,"year"),j(0,["YYYYY",5],0,"year"),j(0,["YYYYYY",6,!0],0,"year"),kt("Y",_t),kt("YY",ft,ut),kt("YYYY",mt,lt),kt("YYYYY",yt,ht),kt("YYYYYY",yt,ht),Ot(["YYYYY","YYYYYY"],Ft),Ot("YYYY",(function(t,e){e[Ft]=2===t.length?r.parseTwoDigitYear(t):Mt(t)})),Ot("YY",(function(t,e){e[Ft]=r.parseTwoDigitYear(t)})),Ot("Y",(function(t,e){e[Ft]=parseInt(t,10)})),r.parseTwoDigitYear=function(t){return Mt(t)+(Mt(t)>68?1900:2e3)};var Ht,Kt=Xt("FullYear",!0);function Qt(){return Pt(this.year())}function Xt(t,e){return function(n){return null!=n?($t(this,t,n),r.updateOffset(this,e),this):Jt(this,t)}}function Jt(t,e){if(!t.isValid())return NaN;var n=t._d,r=t._isUTC;switch(e){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function $t(t,e,n){var r,i,s,o,a;if(t.isValid()&&!isNaN(n)){switch(r=t._d,i=t._isUTC,e){case"Milliseconds":return void(i?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(i?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(i?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(i?r.setUTCHours(n):r.setHours(n));case"Date":return void(i?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}s=n,o=t.month(),a=29!==(a=t.date())||1!==o||Pt(s)?a:28,i?r.setUTCFullYear(s,o,a):r.setFullYear(s,o,a)}}function Zt(t){return A(this[t=nt(t)])?this[t]():this}function te(t,e){if("object"===typeof t){var n,r=st(t=rt(t)),i=r.length;for(n=0;n<i;n++)this[r[n].unit](t[r[n].unit])}else if(A(this[t=nt(t)]))return this[t](e);return this}function ee(t,e){return(t%e+e)%e}function ne(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=ee(e,12);return t+=(e-n)/12,1===n?Pt(t)?29:28:31-n%7%2}Ht=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},j("M",["MM",2],"Mo",(function(){return this.month()+1})),j("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),j("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),kt("M",ft,Tt),kt("MM",ft,ut),kt("MMM",(function(t,e){return e.monthsShortRegex(t)})),kt("MMMM",(function(t,e){return e.monthsRegex(t)})),Ot(["M","MM"],(function(t,e){e[Vt]=Mt(t)-1})),Ot(["MMM","MMMM"],(function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);null!=i?e[Vt]=i:m(n).invalidMonth=t}));var re="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ie="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),se=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,oe=Et,ae=Et;function ue(t,e){return t?s(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||se).test(e)?"format":"standalone"][t.month()]:s(this._months)?this._months:this._months.standalone}function ce(t,e){return t?s(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[se.test(e)?"format":"standalone"][t.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function le(t,e,n){var r,i,s,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)s=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(i=Ht.call(this._shortMonthsParse,o))?i:null:-1!==(i=Ht.call(this._longMonthsParse,o))?i:null:"MMM"===e?-1!==(i=Ht.call(this._shortMonthsParse,o))||-1!==(i=Ht.call(this._longMonthsParse,o))?i:null:-1!==(i=Ht.call(this._longMonthsParse,o))||-1!==(i=Ht.call(this._shortMonthsParse,o))?i:null}function he(t,e,n){var r,i,s;if(this._monthsParseExact)return le.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}}function fe(t,e){if(!t.isValid())return t;if("string"===typeof e)if(/^\d+$/.test(e))e=Mt(e);else if(!l(e=t.localeData().monthsParse(e)))return t;var n=e,r=t.date();return r=r<29?r:Math.min(r,ne(t.year(),n)),t._isUTC?t._d.setUTCMonth(n,r):t._d.setMonth(n,r),t}function de(t){return null!=t?(fe(this,t),r.updateOffset(this,!0),this):Jt(this,"Month")}function pe(){return ne(this.year(),this.month())}function ge(t){return this._monthsParseExact?(a(this,"_monthsRegex")||ye.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=oe),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function me(t){return this._monthsParseExact?(a(this,"_monthsRegex")||ye.call(this),t?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=ae),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function ye(){function t(t,e){return e.length-t.length}var e,n,r,i,s=[],o=[],a=[];for(e=0;e<12;e++)n=p([2e3,e]),r=At(this.monthsShort(n,"")),i=At(this.months(n,"")),s.push(r),o.push(i),a.push(i),a.push(r);s.sort(t),o.sort(t),a.sort(t),this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function ve(t,e,n,r,i,s,o){var a;return t<100&&t>=0?(a=new Date(t+400,e,n,r,i,s,o),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,r,i,s,o),a}function _e(t){var e,n;return t<100&&t>=0?((n=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function we(t,e,n){var r=7+e-n;return-(7+_e(t,0,r).getUTCDay()-e)%7+r-1}function be(t,e,n,r,i){var s,o,a=1+7*(e-1)+(7+n-r)%7+we(t,r,i);return a<=0?o=Gt(s=t-1)+a:a>Gt(t)?(s=t+1,o=a-Gt(t)):(s=t,o=a),{year:s,dayOfYear:o}}function Se(t,e,n){var r,i,s=we(t.year(),e,n),o=Math.floor((t.dayOfYear()-s-1)/7)+1;return o<1?r=o+Ee(i=t.year()-1,e,n):o>Ee(t.year(),e,n)?(r=o-Ee(t.year(),e,n),i=t.year()+1):(i=t.year(),r=o),{week:r,year:i}}function Ee(t,e,n){var r=we(t,e,n),i=we(t+1,e,n);return(Gt(t)-r+i)/7}function Te(t){return Se(t,this._week.dow,this._week.doy).week}j("w",["ww",2],"wo","week"),j("W",["WW",2],"Wo","isoWeek"),kt("w",ft,Tt),kt("ww",ft,ut),kt("W",ft,Tt),kt("WW",ft,ut),Rt(["w","ww","W","WW"],(function(t,e,n,r){e[r.substr(0,1)]=Mt(t)}));var De={dow:0,doy:6};function ke(){return this._week.dow}function Ie(){return this._week.doy}function Ce(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Ae(t){var e=Se(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Ne(t,e){return"string"!==typeof t?t:isNaN(t)?"number"===typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}function Me(t,e){return"string"===typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function xe(t,e){return t.slice(e,7).concat(t.slice(0,e))}j("d",0,"do","day"),j("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),j("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),j("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),j("e",0,0,"weekday"),j("E",0,0,"isoWeekday"),kt("d",ft),kt("e",ft),kt("E",ft),kt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),kt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),kt("dddd",(function(t,e){return e.weekdaysRegex(t)})),Rt(["dd","ddd","dddd"],(function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);null!=i?e.d=i:m(n).invalidWeekday=t})),Rt(["d","e","E"],(function(t,e,n,r){e[r]=Mt(t)}));var Oe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Re="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Le="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Pe=Et,Fe=Et,Ve=Et;function Ue(t,e){var n=s(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?xe(n,this._week.dow):t?n[t.day()]:n}function je(t){return!0===t?xe(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Be(t){return!0===t?xe(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Ye(t,e,n){var r,i,s,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)s=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(i=Ht.call(this._weekdaysParse,o))?i:null:"ddd"===e?-1!==(i=Ht.call(this._shortWeekdaysParse,o))?i:null:-1!==(i=Ht.call(this._minWeekdaysParse,o))?i:null:"dddd"===e?-1!==(i=Ht.call(this._weekdaysParse,o))||-1!==(i=Ht.call(this._shortWeekdaysParse,o))||-1!==(i=Ht.call(this._minWeekdaysParse,o))?i:null:"ddd"===e?-1!==(i=Ht.call(this._shortWeekdaysParse,o))||-1!==(i=Ht.call(this._weekdaysParse,o))||-1!==(i=Ht.call(this._minWeekdaysParse,o))?i:null:-1!==(i=Ht.call(this._minWeekdaysParse,o))||-1!==(i=Ht.call(this._weekdaysParse,o))||-1!==(i=Ht.call(this._shortWeekdaysParse,o))?i:null}function qe(t,e,n){var r,i,s;if(this._weekdaysParseExact)return Ye.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}}function ze(t){if(!this.isValid())return null!=t?this:NaN;var e=Jt(this,"Day");return null!=t?(t=Ne(t,this.localeData()),this.add(t-e,"d")):e}function We(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Ge(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=Me(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function He(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Xe.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=Pe),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ke(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Xe.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Fe),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Qe(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Xe.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ve),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Xe(){function t(t,e){return e.length-t.length}var e,n,r,i,s,o=[],a=[],u=[],c=[];for(e=0;e<7;e++)n=p([2e3,1]).day(e),r=At(this.weekdaysMin(n,"")),i=At(this.weekdaysShort(n,"")),s=At(this.weekdays(n,"")),o.push(r),a.push(i),u.push(s),c.push(r),c.push(i),c.push(s);o.sort(t),a.sort(t),u.sort(t),c.sort(t),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Je(){return this.hours()%12||12}function $e(){return this.hours()||24}function Ze(t,e){j(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function tn(t,e){return e._meridiemParse}function en(t){return"p"===(t+"").toLowerCase().charAt(0)}j("H",["HH",2],0,"hour"),j("h",["hh",2],0,Je),j("k",["kk",2],0,$e),j("hmm",0,0,(function(){return""+Je.apply(this)+L(this.minutes(),2)})),j("hmmss",0,0,(function(){return""+Je.apply(this)+L(this.minutes(),2)+L(this.seconds(),2)})),j("Hmm",0,0,(function(){return""+this.hours()+L(this.minutes(),2)})),j("Hmmss",0,0,(function(){return""+this.hours()+L(this.minutes(),2)+L(this.seconds(),2)})),Ze("a",!0),Ze("A",!1),kt("a",tn),kt("A",tn),kt("H",ft,Dt),kt("h",ft,Tt),kt("k",ft,Tt),kt("HH",ft,ut),kt("hh",ft,ut),kt("kk",ft,ut),kt("hmm",dt),kt("hmmss",pt),kt("Hmm",dt),kt("Hmmss",pt),Ot(["H","HH"],jt),Ot(["k","kk"],(function(t,e,n){var r=Mt(t);e[jt]=24===r?0:r})),Ot(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),Ot(["h","hh"],(function(t,e,n){e[jt]=Mt(t),m(n).bigHour=!0})),Ot("hmm",(function(t,e,n){var r=t.length-2;e[jt]=Mt(t.substr(0,r)),e[Bt]=Mt(t.substr(r)),m(n).bigHour=!0})),Ot("hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[jt]=Mt(t.substr(0,r)),e[Bt]=Mt(t.substr(r,2)),e[Yt]=Mt(t.substr(i)),m(n).bigHour=!0})),Ot("Hmm",(function(t,e,n){var r=t.length-2;e[jt]=Mt(t.substr(0,r)),e[Bt]=Mt(t.substr(r))})),Ot("Hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[jt]=Mt(t.substr(0,r)),e[Bt]=Mt(t.substr(r,2)),e[Yt]=Mt(t.substr(i))}));var nn=/[ap]\.?m?\.?/i,rn=Xt("Hours",!0);function sn(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var on,an={calendar:O,longDateFormat:W,invalidDate:H,ordinal:Q,dayOfMonthOrdinalParse:X,relativeTime:$,months:re,monthsShort:ie,week:De,weekdays:Oe,weekdaysMin:Le,weekdaysShort:Re,meridiemParse:nn},un={},cn={};function ln(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n+=1)if(t[n]!==e[n])return n;return r}function hn(t){return t?t.toLowerCase().replace("_","-"):t}function fn(t){for(var e,n,r,i,s=0;s<t.length;){for(e=(i=hn(t[s]).split("-")).length,n=(n=hn(t[s+1]))?n.split("-"):null;e>0;){if(r=pn(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&ln(i,n)>=e-1)break;e--}s++}return on}function dn(t){return!(!t||!t.match("^[^/\\\\]*$"))}function pn(e){var n=null;if(void 0===un[e]&&t&&t.exports&&dn(e))try{n=on._abbr,Object(function(){var t=new Error("Cannot find module 'undefined'");throw t.code="MODULE_NOT_FOUND",t}()),gn(n)}catch(r){un[e]=null}return un[e]}function gn(t,e){var n;return t&&((n=c(e)?vn(t):mn(t,e))?on=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),on._abbr}function mn(t,e){if(null!==e){var n,r=an;if(e.abbr=t,null!=un[t])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=un[t]._config;else if(null!=e.parentLocale)if(null!=un[e.parentLocale])r=un[e.parentLocale]._config;else{if(null==(n=pn(e.parentLocale)))return cn[e.parentLocale]||(cn[e.parentLocale]=[]),cn[e.parentLocale].push({name:t,config:e}),null;r=n._config}return un[t]=new x(M(r,e)),cn[t]&&cn[t].forEach((function(t){mn(t.name,t.config)})),gn(t),un[t]}return delete un[t],null}function yn(t,e){if(null!=e){var n,r,i=an;null!=un[t]&&null!=un[t].parentLocale?un[t].set(M(un[t]._config,e)):(null!=(r=pn(t))&&(i=r._config),e=M(i,e),null==r&&(e.abbr=t),(n=new x(e)).parentLocale=un[t],un[t]=n),gn(t)}else null!=un[t]&&(null!=un[t].parentLocale?(un[t]=un[t].parentLocale,t===gn()&&gn(t)):null!=un[t]&&delete un[t]);return un[t]}function vn(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return on;if(!s(t)){if(e=pn(t))return e;t=[t]}return fn(t)}function _n(){return k(un)}function wn(t){var e,n=t._a;return n&&-2===m(t).overflow&&(e=n[Vt]<0||n[Vt]>11?Vt:n[Ut]<1||n[Ut]>ne(n[Ft],n[Vt])?Ut:n[jt]<0||n[jt]>24||24===n[jt]&&(0!==n[Bt]||0!==n[Yt]||0!==n[qt])?jt:n[Bt]<0||n[Bt]>59?Bt:n[Yt]<0||n[Yt]>59?Yt:n[qt]<0||n[qt]>999?qt:-1,m(t)._overflowDayOfYear&&(e<Ft||e>Ut)&&(e=Ut),m(t)._overflowWeeks&&-1===e&&(e=zt),m(t)._overflowWeekday&&-1===e&&(e=Wt),m(t).overflow=e),t}var bn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Sn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,En=/Z|[+-]\d\d(?::?\d\d)?/,Tn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Dn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],kn=/^\/?Date\((-?\d+)/i,In=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Cn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function An(t){var e,n,r,i,s,o,a=t._i,u=bn.exec(a)||Sn.exec(a),c=Tn.length,l=Dn.length;if(u){for(m(t).iso=!0,e=0,n=c;e<n;e++)if(Tn[e][1].exec(u[1])){i=Tn[e][0],r=!1!==Tn[e][2];break}if(null==i)return void(t._isValid=!1);if(u[3]){for(e=0,n=l;e<n;e++)if(Dn[e][1].exec(u[3])){s=(u[2]||" ")+Dn[e][0];break}if(null==s)return void(t._isValid=!1)}if(!r&&null!=s)return void(t._isValid=!1);if(u[4]){if(!En.exec(u[4]))return void(t._isValid=!1);o="Z"}t._f=i+(s||"")+(o||""),Bn(t)}else t._isValid=!1}function Nn(t,e,n,r,i,s){var o=[Mn(t),ie.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return s&&o.push(parseInt(s,10)),o}function Mn(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function xn(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function On(t,e,n){return!t||Re.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(m(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Rn(t,e,n){if(t)return Cn[t];if(e)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function Ln(t){var e,n=In.exec(xn(t._i));if(n){if(e=Nn(n[4],n[3],n[2],n[5],n[6],n[7]),!On(n[1],e,t))return;t._a=e,t._tzm=Rn(n[8],n[9],n[10]),t._d=_e.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),m(t).rfc2822=!0}else t._isValid=!1}function Pn(t){var e=kn.exec(t._i);null===e?(An(t),!1===t._isValid&&(delete t._isValid,Ln(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:r.createFromInputFallback(t)))):t._d=new Date(+e[1])}function Fn(t,e,n){return null!=t?t:null!=e?e:n}function Vn(t){var e=new Date(r.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Un(t){var e,n,r,i,s,o=[];if(!t._d){for(r=Vn(t),t._w&&null==t._a[Ut]&&null==t._a[Vt]&&jn(t),null!=t._dayOfYear&&(s=Fn(t._a[Ft],r[Ft]),(t._dayOfYear>Gt(s)||0===t._dayOfYear)&&(m(t)._overflowDayOfYear=!0),n=_e(s,0,t._dayOfYear),t._a[Vt]=n.getUTCMonth(),t._a[Ut]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=o[e]=r[e];for(;e<7;e++)t._a[e]=o[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[jt]&&0===t._a[Bt]&&0===t._a[Yt]&&0===t._a[qt]&&(t._nextDay=!0,t._a[jt]=0),t._d=(t._useUTC?_e:ve).apply(null,o),i=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[jt]=24),t._w&&"undefined"!==typeof t._w.d&&t._w.d!==i&&(m(t).weekdayMismatch=!0)}}function jn(t){var e,n,r,i,s,o,a,u,c;null!=(e=t._w).GG||null!=e.W||null!=e.E?(s=1,o=4,n=Fn(e.GG,t._a[Ft],Se(Qn(),1,4).year),r=Fn(e.W,1),((i=Fn(e.E,1))<1||i>7)&&(u=!0)):(s=t._locale._week.dow,o=t._locale._week.doy,c=Se(Qn(),s,o),n=Fn(e.gg,t._a[Ft],c.year),r=Fn(e.w,c.week),null!=e.d?((i=e.d)<0||i>6)&&(u=!0):null!=e.e?(i=e.e+s,(e.e<0||e.e>6)&&(u=!0)):i=s),r<1||r>Ee(n,s,o)?m(t)._overflowWeeks=!0:null!=u?m(t)._overflowWeekday=!0:(a=be(n,r,i,s,o),t._a[Ft]=a.year,t._dayOfYear=a.dayOfYear)}function Bn(t){if(t._f!==r.ISO_8601)if(t._f!==r.RFC_2822){t._a=[],m(t).empty=!0;var e,n,i,s,o,a,u,c=""+t._i,l=c.length,h=0;for(u=(i=z(t._f,t._locale).match(P)||[]).length,e=0;e<u;e++)s=i[e],(n=(c.match(It(s,t))||[])[0])&&((o=c.substr(0,c.indexOf(n))).length>0&&m(t).unusedInput.push(o),c=c.slice(c.indexOf(n)+n.length),h+=n.length),U[s]?(n?m(t).empty=!1:m(t).unusedTokens.push(s),Lt(s,n,t)):t._strict&&!n&&m(t).unusedTokens.push(s);m(t).charsLeftOver=l-h,c.length>0&&m(t).unusedInput.push(c),t._a[jt]<=12&&!0===m(t).bigHour&&t._a[jt]>0&&(m(t).bigHour=void 0),m(t).parsedDateParts=t._a.slice(0),m(t).meridiem=t._meridiem,t._a[jt]=Yn(t._locale,t._a[jt],t._meridiem),null!==(a=m(t).era)&&(t._a[Ft]=t._locale.erasConvertYear(a,t._a[Ft])),Un(t),wn(t)}else Ln(t);else An(t)}function Yn(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((r=t.isPM(n))&&e<12&&(e+=12),r||12!==e||(e=0),e):e}function qn(t){var e,n,r,i,s,o,a=!1,u=t._f.length;if(0===u)return m(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<u;i++)s=0,o=!1,e=b({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],Bn(e),y(e)&&(o=!0),s+=m(e).charsLeftOver,s+=10*m(e).unusedTokens.length,m(e).score=s,a?s<r&&(r=s,n=e):(null==r||s<r||o)&&(r=s,n=e,o&&(a=!0));d(t,n||e)}function zn(t){if(!t._d){var e=rt(t._i),n=void 0===e.day?e.date:e.day;t._a=f([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),Un(t)}}function Wn(t){var e=new S(wn(Gn(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Gn(t){var e=t._i,n=t._f;return t._locale=t._locale||vn(t._l),null===e||void 0===n&&""===e?v({nullInput:!0}):("string"===typeof e&&(t._i=e=t._locale.preparse(e)),E(e)?new S(wn(e)):(h(e)?t._d=e:s(n)?qn(t):n?Bn(t):Hn(t),y(t)||(t._d=null),t))}function Hn(t){var e=t._i;c(e)?t._d=new Date(r.now()):h(e)?t._d=new Date(e.valueOf()):"string"===typeof e?Pn(t):s(e)?(t._a=f(e.slice(0),(function(t){return parseInt(t,10)})),Un(t)):o(e)?zn(t):l(e)?t._d=new Date(e):r.createFromInputFallback(t)}function Kn(t,e,n,r,i){var a={};return!0!==e&&!1!==e||(r=e,e=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(o(t)&&u(t)||s(t)&&0===t.length)&&(t=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=n,a._i=t,a._f=e,a._strict=r,Wn(a)}function Qn(t,e,n,r){return Kn(t,e,n,r,!1)}r.createFromInputFallback=D("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Xn=D("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Qn.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:v()})),Jn=D("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Qn.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:v()}));function $n(t,e){var n,r;if(1===e.length&&s(e[0])&&(e=e[0]),!e.length)return Qn();for(n=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](n)||(n=e[r]);return n}function Zn(){return $n("isBefore",[].slice.call(arguments,0))}function tr(){return $n("isAfter",[].slice.call(arguments,0))}var er=function(){return Date.now?Date.now():+new Date},nr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rr(t){var e,n,r=!1,i=nr.length;for(e in t)if(a(t,e)&&(-1===Ht.call(nr,e)||null!=t[e]&&isNaN(t[e])))return!1;for(n=0;n<i;++n)if(t[nr[n]]){if(r)return!1;parseFloat(t[nr[n]])!==Mt(t[nr[n]])&&(r=!0)}return!0}function ir(){return this._isValid}function sr(){return Cr(NaN)}function or(t){var e=rt(t),n=e.year||0,r=e.quarter||0,i=e.month||0,s=e.week||e.isoWeek||0,o=e.day||0,a=e.hour||0,u=e.minute||0,c=e.second||0,l=e.millisecond||0;this._isValid=rr(e),this._milliseconds=+l+1e3*c+6e4*u+1e3*a*60*60,this._days=+o+7*s,this._months=+i+3*r+12*n,this._data={},this._locale=vn(),this._bubble()}function ar(t){return t instanceof or}function ur(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function cr(t,e,n){var r,i=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),o=0;for(r=0;r<i;r++)(n&&t[r]!==e[r]||!n&&Mt(t[r])!==Mt(e[r]))&&o++;return o+s}function lr(t,e){j(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+L(~~(t/60),2)+e+L(~~t%60,2)}))}lr("Z",":"),lr("ZZ",""),kt("Z",bt),kt("ZZ",bt),Ot(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=fr(bt,t)}));var hr=/([\+\-]|\d\d)/gi;function fr(t,e){var n,r,i=(e||"").match(t);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(hr)||["-",0,0])[1]+Mt(n[2]))?0:"+"===n[0]?r:-r}function dr(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(E(t)||h(t)?t.valueOf():Qn(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Qn(t).local()}function pr(t){return-Math.round(t._d.getTimezoneOffset())}function gr(t,e,n){var i,s=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"===typeof t){if(null===(t=fr(bt,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(i=pr(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),s!==t&&(!e||this._changeInProgress?Or(this,Cr(t-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?s:pr(this)}function mr(t,e){return null!=t?("string"!==typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function yr(t){return this.utcOffset(0,t)}function vr(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(pr(this),"m")),this}function _r(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var t=fr(wt,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function wr(t){return!!this.isValid()&&(t=t?Qn(t).utcOffset():0,(this.utcOffset()-t)%60===0)}function br(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Sr(){if(!c(this._isDSTShifted))return this._isDSTShifted;var t,e={};return b(e,this),(e=Gn(e))._a?(t=e._isUTC?p(e._a):Qn(e._a),this._isDSTShifted=this.isValid()&&cr(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Er(){return!!this.isValid()&&!this._isUTC}function Tr(){return!!this.isValid()&&this._isUTC}function Dr(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var kr=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ir=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Cr(t,e){var n,r,i,s=t,o=null;return ar(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:l(t)||!isNaN(+t)?(s={},e?s[e]=+t:s.milliseconds=+t):(o=kr.exec(t))?(n="-"===o[1]?-1:1,s={y:0,d:Mt(o[Ut])*n,h:Mt(o[jt])*n,m:Mt(o[Bt])*n,s:Mt(o[Yt])*n,ms:Mt(ur(1e3*o[qt]))*n}):(o=Ir.exec(t))?(n="-"===o[1]?-1:1,s={y:Ar(o[2],n),M:Ar(o[3],n),w:Ar(o[4],n),d:Ar(o[5],n),h:Ar(o[6],n),m:Ar(o[7],n),s:Ar(o[8],n)}):null==s?s={}:"object"===typeof s&&("from"in s||"to"in s)&&(i=Mr(Qn(s.from),Qn(s.to)),(s={}).ms=i.milliseconds,s.M=i.months),r=new or(s),ar(t)&&a(t,"_locale")&&(r._locale=t._locale),ar(t)&&a(t,"_isValid")&&(r._isValid=t._isValid),r}function Ar(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Nr(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Mr(t,e){var n;return t.isValid()&&e.isValid()?(e=dr(e,t),t.isBefore(e)?n=Nr(t,e):((n=Nr(e,t)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function xr(t,e){return function(n,r){var i;return null===r||isNaN(+r)||(C(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Or(this,Cr(n,r),t),this}}function Or(t,e,n,i){var s=e._milliseconds,o=ur(e._days),a=ur(e._months);t.isValid()&&(i=null==i||i,a&&fe(t,Jt(t,"Month")+a*n),o&&$t(t,"Date",Jt(t,"Date")+o*n),s&&t._d.setTime(t._d.valueOf()+s*n),i&&r.updateOffset(t,o||a))}Cr.fn=or.prototype,Cr.invalid=sr;var Rr=xr(1,"add"),Lr=xr(-1,"subtract");function Pr(t){return"string"===typeof t||t instanceof String}function Fr(t){return E(t)||h(t)||Pr(t)||l(t)||Ur(t)||Vr(t)||null===t||void 0===t}function Vr(t){var e,n,r=o(t)&&!u(t),i=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=s.length;for(e=0;e<c;e+=1)n=s[e],i=i||a(t,n);return r&&i}function Ur(t){var e=s(t),n=!1;return e&&(n=0===t.filter((function(e){return!l(e)&&Pr(t)})).length),e&&n}function jr(t){var e,n,r=o(t)&&!u(t),i=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<s.length;e+=1)n=s[e],i=i||a(t,n);return r&&i}function Br(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Yr(t,e){1===arguments.length&&(arguments[0]?Fr(arguments[0])?(t=arguments[0],e=void 0):jr(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||Qn(),i=dr(n,this).startOf("day"),s=r.calendarFormat(this,i)||"sameElse",o=e&&(A(e[s])?e[s].call(this,n):e[s]);return this.format(o||this.localeData().calendar(s,this,Qn(n)))}function qr(){return new S(this)}function zr(t,e){var n=E(t)?t:Qn(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=nt(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())}function Wr(t,e){var n=E(t)?t:Qn(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=nt(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())}function Gr(t,e,n,r){var i=E(t)?t:Qn(t),s=E(e)?e:Qn(e);return!!(this.isValid()&&i.isValid()&&s.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(s,n):!this.isAfter(s,n))}function Hr(t,e){var n,r=E(t)?t:Qn(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=nt(e)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))}function Kr(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function Qr(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function Xr(t,e,n){var r,i,s;if(!this.isValid())return NaN;if(!(r=dr(t,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),e=nt(e)){case"year":s=Jr(this,r)/12;break;case"month":s=Jr(this,r);break;case"quarter":s=Jr(this,r)/3;break;case"second":s=(this-r)/1e3;break;case"minute":s=(this-r)/6e4;break;case"hour":s=(this-r)/36e5;break;case"day":s=(this-r-i)/864e5;break;case"week":s=(this-r-i)/6048e5;break;default:s=this-r}return n?s:Nt(s)}function Jr(t,e){if(t.date()<e.date())return-Jr(e,t);var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months");return-(n+(e-r<0?(e-r)/(r-t.clone().add(n-1,"months")):(e-r)/(t.clone().add(n+1,"months")-r)))||0}function $r(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Zr(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?q(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):A(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",q(n,"Z")):q(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ti(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,n,r,i="moment",s="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",s="Z"),t="["+i+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=s+'[")]',this.format(t+e+n+r)}function ei(t){t||(t=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var e=q(this,t);return this.localeData().postformat(e)}function ni(t,e){return this.isValid()&&(E(t)&&t.isValid()||Qn(t).isValid())?Cr({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ri(t){return this.from(Qn(),t)}function ii(t,e){return this.isValid()&&(E(t)&&t.isValid()||Qn(t).isValid())?Cr({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function si(t){return this.to(Qn(),t)}function oi(t){var e;return void 0===t?this._locale._abbr:(null!=(e=vn(t))&&(this._locale=e),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ai=D("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function ui(){return this._locale}var ci=1e3,li=60*ci,hi=60*li,fi=3506328*hi;function di(t,e){return(t%e+e)%e}function pi(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-fi:new Date(t,e,n).valueOf()}function gi(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-fi:Date.UTC(t,e,n)}function mi(t){var e,n;if(void 0===(t=nt(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?gi:pi,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=di(e+(this._isUTC?0:this.utcOffset()*li),hi);break;case"minute":e=this._d.valueOf(),e-=di(e,li);break;case"second":e=this._d.valueOf(),e-=di(e,ci)}return this._d.setTime(e),r.updateOffset(this,!0),this}function yi(t){var e,n;if(void 0===(t=nt(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?gi:pi,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=hi-di(e+(this._isUTC?0:this.utcOffset()*li),hi)-1;break;case"minute":e=this._d.valueOf(),e+=li-di(e,li)-1;break;case"second":e=this._d.valueOf(),e+=ci-di(e,ci)-1}return this._d.setTime(e),r.updateOffset(this,!0),this}function vi(){return this._d.valueOf()-6e4*(this._offset||0)}function _i(){return Math.floor(this.valueOf()/1e3)}function wi(){return new Date(this.valueOf())}function bi(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Si(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Ei(){return this.isValid()?this.toISOString():null}function Ti(){return y(this)}function Di(){return d({},m(this))}function ki(){return m(this).overflow}function Ii(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ci(t,e){var n,i,s,o=this._eras||vn("en")._eras;for(n=0,i=o.length;n<i;++n)switch("string"===typeof o[n].since&&(s=r(o[n].since).startOf("day"),o[n].since=s.valueOf()),typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":s=r(o[n].until).startOf("day").valueOf(),o[n].until=s.valueOf()}return o}function Ai(t,e,n){var r,i,s,o,a,u=this.eras();for(t=t.toUpperCase(),r=0,i=u.length;r<i;++r)if(s=u[r].name.toUpperCase(),o=u[r].abbr.toUpperCase(),a=u[r].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(o===t)return u[r];break;case"NNNN":if(s===t)return u[r];break;case"NNNNN":if(a===t)return u[r]}else if([s,o,a].indexOf(t)>=0)return u[r]}function Ni(t,e){var n=t.since<=t.until?1:-1;return void 0===e?r(t.since).year():r(t.since).year()+(e-t.offset)*n}function Mi(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].name;if(r[t].until<=n&&n<=r[t].since)return r[t].name}return""}function xi(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].narrow;if(r[t].until<=n&&n<=r[t].since)return r[t].narrow}return""}function Oi(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].abbr;if(r[t].until<=n&&n<=r[t].since)return r[t].abbr}return""}function Ri(){var t,e,n,i,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(n=s[t].since<=s[t].until?1:-1,i=this.clone().startOf("day").valueOf(),s[t].since<=i&&i<=s[t].until||s[t].until<=i&&i<=s[t].since)return(this.year()-r(s[t].since).year())*n+s[t].offset;return this.year()}function Li(t){return a(this,"_erasNameRegex")||Yi.call(this),t?this._erasNameRegex:this._erasRegex}function Pi(t){return a(this,"_erasAbbrRegex")||Yi.call(this),t?this._erasAbbrRegex:this._erasRegex}function Fi(t){return a(this,"_erasNarrowRegex")||Yi.call(this),t?this._erasNarrowRegex:this._erasRegex}function Vi(t,e){return e.erasAbbrRegex(t)}function Ui(t,e){return e.erasNameRegex(t)}function ji(t,e){return e.erasNarrowRegex(t)}function Bi(t,e){return e._eraYearOrdinalRegex||vt}function Yi(){var t,e,n,r,i,s=[],o=[],a=[],u=[],c=this.eras();for(t=0,e=c.length;t<e;++t)n=At(c[t].name),r=At(c[t].abbr),i=At(c[t].narrow),o.push(n),s.push(r),a.push(i),u.push(n),u.push(r),u.push(i);this._erasRegex=new RegExp("^("+u.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+o.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}function qi(t,e){j(0,[t,t.length],0,e)}function zi(t){return Xi.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Wi(t){return Xi.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Gi(){return Ee(this.year(),1,4)}function Hi(){return Ee(this.isoWeekYear(),1,4)}function Ki(){var t=this.localeData()._week;return Ee(this.year(),t.dow,t.doy)}function Qi(){var t=this.localeData()._week;return Ee(this.weekYear(),t.dow,t.doy)}function Xi(t,e,n,r,i){var s;return null==t?Se(this,r,i).year:(e>(s=Ee(t,r,i))&&(e=s),Ji.call(this,t,e,n,r,i))}function Ji(t,e,n,r,i){var s=be(t,e,n,r,i),o=_e(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function $i(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}j("N",0,0,"eraAbbr"),j("NN",0,0,"eraAbbr"),j("NNN",0,0,"eraAbbr"),j("NNNN",0,0,"eraName"),j("NNNNN",0,0,"eraNarrow"),j("y",["y",1],"yo","eraYear"),j("y",["yy",2],0,"eraYear"),j("y",["yyy",3],0,"eraYear"),j("y",["yyyy",4],0,"eraYear"),kt("N",Vi),kt("NN",Vi),kt("NNN",Vi),kt("NNNN",Ui),kt("NNNNN",ji),Ot(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,n,r){var i=n._locale.erasParse(t,r,n._strict);i?m(n).era=i:m(n).invalidEra=t})),kt("y",vt),kt("yy",vt),kt("yyy",vt),kt("yyyy",vt),kt("yo",Bi),Ot(["y","yy","yyy","yyyy"],Ft),Ot(["yo"],(function(t,e,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[Ft]=n._locale.eraYearOrdinalParse(t,i):e[Ft]=parseInt(t,10)})),j(0,["gg",2],0,(function(){return this.weekYear()%100})),j(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),qi("gggg","weekYear"),qi("ggggg","weekYear"),qi("GGGG","isoWeekYear"),qi("GGGGG","isoWeekYear"),kt("G",_t),kt("g",_t),kt("GG",ft,ut),kt("gg",ft,ut),kt("GGGG",mt,lt),kt("gggg",mt,lt),kt("GGGGG",yt,ht),kt("ggggg",yt,ht),Rt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,r){e[r.substr(0,2)]=Mt(t)})),Rt(["gg","GG"],(function(t,e,n,i){e[i]=r.parseTwoDigitYear(t)})),j("Q",0,"Qo","quarter"),kt("Q",at),Ot("Q",(function(t,e){e[Vt]=3*(Mt(t)-1)})),j("D",["DD",2],"Do","date"),kt("D",ft,Tt),kt("DD",ft,ut),kt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),Ot(["D","DD"],Ut),Ot("Do",(function(t,e){e[Ut]=Mt(t.match(ft)[0])}));var Zi=Xt("Date",!0);function ts(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}j("DDD",["DDDD",3],"DDDo","dayOfYear"),kt("DDD",gt),kt("DDDD",ct),Ot(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=Mt(t)})),j("m",["mm",2],0,"minute"),kt("m",ft,Dt),kt("mm",ft,ut),Ot(["m","mm"],Bt);var es=Xt("Minutes",!1);j("s",["ss",2],0,"second"),kt("s",ft,Dt),kt("ss",ft,ut),Ot(["s","ss"],Yt);var ns,rs,is=Xt("Seconds",!1);for(j("S",0,0,(function(){return~~(this.millisecond()/100)})),j(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),j(0,["SSS",3],0,"millisecond"),j(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),j(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),j(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),j(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),j(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),j(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),kt("S",gt,at),kt("SS",gt,ut),kt("SSS",gt,ct),ns="SSSS";ns.length<=9;ns+="S")kt(ns,vt);function ss(t,e){e[qt]=Mt(1e3*("0."+t))}for(ns="S";ns.length<=9;ns+="S")Ot(ns,ss);function os(){return this._isUTC?"UTC":""}function as(){return this._isUTC?"Coordinated Universal Time":""}rs=Xt("Milliseconds",!1),j("z",0,0,"zoneAbbr"),j("zz",0,0,"zoneName");var us=S.prototype;function cs(t){return Qn(1e3*t)}function ls(){return Qn.apply(null,arguments).parseZone()}function hs(t){return t}us.add=Rr,us.calendar=Yr,us.clone=qr,us.diff=Xr,us.endOf=yi,us.format=ei,us.from=ni,us.fromNow=ri,us.to=ii,us.toNow=si,us.get=Zt,us.invalidAt=ki,us.isAfter=zr,us.isBefore=Wr,us.isBetween=Gr,us.isSame=Hr,us.isSameOrAfter=Kr,us.isSameOrBefore=Qr,us.isValid=Ti,us.lang=ai,us.locale=oi,us.localeData=ui,us.max=Jn,us.min=Xn,us.parsingFlags=Di,us.set=te,us.startOf=mi,us.subtract=Lr,us.toArray=bi,us.toObject=Si,us.toDate=wi,us.toISOString=Zr,us.inspect=ti,"undefined"!==typeof Symbol&&null!=Symbol.for&&(us[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),us.toJSON=Ei,us.toString=$r,us.unix=_i,us.valueOf=vi,us.creationData=Ii,us.eraName=Mi,us.eraNarrow=xi,us.eraAbbr=Oi,us.eraYear=Ri,us.year=Kt,us.isLeapYear=Qt,us.weekYear=zi,us.isoWeekYear=Wi,us.quarter=us.quarters=$i,us.month=de,us.daysInMonth=pe,us.week=us.weeks=Ce,us.isoWeek=us.isoWeeks=Ae,us.weeksInYear=Ki,us.weeksInWeekYear=Qi,us.isoWeeksInYear=Gi,us.isoWeeksInISOWeekYear=Hi,us.date=Zi,us.day=us.days=ze,us.weekday=We,us.isoWeekday=Ge,us.dayOfYear=ts,us.hour=us.hours=rn,us.minute=us.minutes=es,us.second=us.seconds=is,us.millisecond=us.milliseconds=rs,us.utcOffset=gr,us.utc=yr,us.local=vr,us.parseZone=_r,us.hasAlignedHourOffset=wr,us.isDST=br,us.isLocal=Er,us.isUtcOffset=Tr,us.isUtc=Dr,us.isUTC=Dr,us.zoneAbbr=os,us.zoneName=as,us.dates=D("dates accessor is deprecated. Use date instead.",Zi),us.months=D("months accessor is deprecated. Use month instead",de),us.years=D("years accessor is deprecated. Use year instead",Kt),us.zone=D("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",mr),us.isDSTShifted=D("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Sr);var fs=x.prototype;function ds(t,e,n,r){var i=vn(),s=p().set(r,e);return i[n](s,t)}function ps(t,e,n){if(l(t)&&(e=t,t=void 0),t=t||"",null!=e)return ds(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=ds(t,r,n,"month");return i}function gs(t,e,n,r){"boolean"===typeof t?(l(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,l(e)&&(n=e,e=void 0),e=e||"");var i,s=vn(),o=t?s._week.dow:0,a=[];if(null!=n)return ds(e,(n+o)%7,r,"day");for(i=0;i<7;i++)a[i]=ds(e,(i+o)%7,r,"day");return a}function ms(t,e){return ps(t,e,"months")}function ys(t,e){return ps(t,e,"monthsShort")}function vs(t,e,n){return gs(t,e,n,"weekdays")}function _s(t,e,n){return gs(t,e,n,"weekdaysShort")}function ws(t,e,n){return gs(t,e,n,"weekdaysMin")}fs.calendar=R,fs.longDateFormat=G,fs.invalidDate=K,fs.ordinal=J,fs.preparse=hs,fs.postformat=hs,fs.relativeTime=Z,fs.pastFuture=tt,fs.set=N,fs.eras=Ci,fs.erasParse=Ai,fs.erasConvertYear=Ni,fs.erasAbbrRegex=Pi,fs.erasNameRegex=Li,fs.erasNarrowRegex=Fi,fs.months=ue,fs.monthsShort=ce,fs.monthsParse=he,fs.monthsRegex=me,fs.monthsShortRegex=ge,fs.week=Te,fs.firstDayOfYear=Ie,fs.firstDayOfWeek=ke,fs.weekdays=Ue,fs.weekdaysMin=Be,fs.weekdaysShort=je,fs.weekdaysParse=qe,fs.weekdaysRegex=He,fs.weekdaysShortRegex=Ke,fs.weekdaysMinRegex=Qe,fs.isPM=en,fs.meridiem=sn,gn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===Mt(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),r.lang=D("moment.lang is deprecated. Use moment.locale instead.",gn),r.langData=D("moment.langData is deprecated. Use moment.localeData instead.",vn);var bs=Math.abs;function Ss(){var t=this._data;return this._milliseconds=bs(this._milliseconds),this._days=bs(this._days),this._months=bs(this._months),t.milliseconds=bs(t.milliseconds),t.seconds=bs(t.seconds),t.minutes=bs(t.minutes),t.hours=bs(t.hours),t.months=bs(t.months),t.years=bs(t.years),this}function Es(t,e,n,r){var i=Cr(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function Ts(t,e){return Es(this,t,e,1)}function Ds(t,e){return Es(this,t,e,-1)}function ks(t){return t<0?Math.floor(t):Math.ceil(t)}function Is(){var t,e,n,r,i,s=this._milliseconds,o=this._days,a=this._months,u=this._data;return s>=0&&o>=0&&a>=0||s<=0&&o<=0&&a<=0||(s+=864e5*ks(As(a)+o),o=0,a=0),u.milliseconds=s%1e3,t=Nt(s/1e3),u.seconds=t%60,e=Nt(t/60),u.minutes=e%60,n=Nt(e/60),u.hours=n%24,o+=Nt(n/24),a+=i=Nt(Cs(o)),o-=ks(As(i)),r=Nt(a/12),a%=12,u.days=o,u.months=a,u.years=r,this}function Cs(t){return 4800*t/146097}function As(t){return 146097*t/4800}function Ns(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if("month"===(t=nt(t))||"quarter"===t||"year"===t)switch(e=this._days+r/864e5,n=this._months+Cs(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(As(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}}function Ms(t){return function(){return this.as(t)}}var xs=Ms("ms"),Os=Ms("s"),Rs=Ms("m"),Ls=Ms("h"),Ps=Ms("d"),Fs=Ms("w"),Vs=Ms("M"),Us=Ms("Q"),js=Ms("y"),Bs=xs;function Ys(){return Cr(this)}function qs(t){return t=nt(t),this.isValid()?this[t+"s"]():NaN}function zs(t){return function(){return this.isValid()?this._data[t]:NaN}}var Ws=zs("milliseconds"),Gs=zs("seconds"),Hs=zs("minutes"),Ks=zs("hours"),Qs=zs("days"),Xs=zs("months"),Js=zs("years");function $s(){return Nt(this.days()/7)}var Zs=Math.round,to={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function eo(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}function no(t,e,n,r){var i=Cr(t).abs(),s=Zs(i.as("s")),o=Zs(i.as("m")),a=Zs(i.as("h")),u=Zs(i.as("d")),c=Zs(i.as("M")),l=Zs(i.as("w")),h=Zs(i.as("y")),f=s<=n.ss&&["s",s]||s<n.s&&["ss",s]||o<=1&&["m"]||o<n.m&&["mm",o]||a<=1&&["h"]||a<n.h&&["hh",a]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(f=f||l<=1&&["w"]||l<n.w&&["ww",l]),(f=f||c<=1&&["M"]||c<n.M&&["MM",c]||h<=1&&["y"]||["yy",h])[2]=e,f[3]=+t>0,f[4]=r,eo.apply(null,f)}function ro(t){return void 0===t?Zs:"function"===typeof t&&(Zs=t,!0)}function io(t,e){return void 0!==to[t]&&(void 0===e?to[t]:(to[t]=e,"s"===t&&(to.ss=e-1),!0))}function so(t,e){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,s=to;return"object"===typeof t&&(e=t,t=!1),"boolean"===typeof t&&(i=t),"object"===typeof e&&(s=Object.assign({},to,e),null!=e.s&&null==e.ss&&(s.ss=e.s-1)),r=no(this,!i,s,n=this.localeData()),i&&(r=n.pastFuture(+this,r)),n.postformat(r)}var oo=Math.abs;function ao(t){return(t>0)-(t<0)||+t}function uo(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,r,i,s,o,a,u=oo(this._milliseconds)/1e3,c=oo(this._days),l=oo(this._months),h=this.asSeconds();return h?(t=Nt(u/60),e=Nt(t/60),u%=60,t%=60,n=Nt(l/12),l%=12,r=u?u.toFixed(3).replace(/\.?0+$/,""):"",i=h<0?"-":"",s=ao(this._months)!==ao(h)?"-":"",o=ao(this._days)!==ao(h)?"-":"",a=ao(this._milliseconds)!==ao(h)?"-":"",i+"P"+(n?s+n+"Y":"")+(l?s+l+"M":"")+(c?o+c+"D":"")+(e||t||u?"T":"")+(e?a+e+"H":"")+(t?a+t+"M":"")+(u?a+r+"S":"")):"P0D"}var co=or.prototype;return co.isValid=ir,co.abs=Ss,co.add=Ts,co.subtract=Ds,co.as=Ns,co.asMilliseconds=xs,co.asSeconds=Os,co.asMinutes=Rs,co.asHours=Ls,co.asDays=Ps,co.asWeeks=Fs,co.asMonths=Vs,co.asQuarters=Us,co.asYears=js,co.valueOf=Bs,co._bubble=Is,co.clone=Ys,co.get=qs,co.milliseconds=Ws,co.seconds=Gs,co.minutes=Hs,co.hours=Ks,co.days=Qs,co.weeks=$s,co.months=Xs,co.years=Js,co.humanize=so,co.toISOString=uo,co.toString=uo,co.toJSON=uo,co.locale=oi,co.localeData=ui,co.toIsoString=D("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",uo),co.lang=ai,j("X",0,0,"unix"),j("x",0,0,"valueOf"),kt("x",_t),kt("X",St),Ot("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t))})),Ot("x",(function(t,e,n){n._d=new Date(Mt(t))})),r.version="2.30.1",i(Qn),r.fn=us,r.min=Zn,r.max=tr,r.now=er,r.utc=p,r.unix=cs,r.months=ms,r.isDate=h,r.locale=gn,r.invalid=v,r.duration=Cr,r.isMoment=E,r.weekdays=vs,r.parseZone=ls,r.localeData=vn,r.isDuration=ar,r.monthsShort=ys,r.weekdaysMin=ws,r.defineLocale=mn,r.updateLocale=yn,r.locales=_n,r.weekdaysShort=_s,r.normalizeUnits=nt,r.relativeTimeRounding=ro,r.relativeTimeThreshold=io,r.calendarFormat=Br,r.prototype=us,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()},80913:(t,e,n)=>{"use strict";n.d(e,{MF:()=>ct,j6:()=>st,om:()=>it,Sx:()=>ht,Wp:()=>lt,KO:()=>ft});var r=n(27253),i=n(24624),s=n(89061);const o=(t,e)=>e.some((e=>t instanceof e));let a,u;const c=new WeakMap,l=new WeakMap,h=new WeakMap,f=new WeakMap,d=new WeakMap;let p={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return l.get(t);if("objectStoreNames"===e)return t.objectStoreNames||h.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return y(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function g(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(u||(u=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(v(this),n),y(c.get(this))}:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return y(t.apply(v(this),n))}:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=t.call(v(this),e,...r);return h.set(s,e.sort?e.sort():[e]),y(s)}}function m(t){return"function"===typeof t?g(t):(t instanceof IDBTransaction&&function(t){if(l.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{e(),r()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)}));l.set(t,e)}(t),o(t,a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,p):t)}function y(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{e(y(t.result)),r()},s=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&c.set(e,t)})).catch((()=>{})),d.set(e,t),e}(t);if(f.has(t))return f.get(t);const e=m(t);return e!==t&&(f.set(t,e),d.set(e,t)),e}const v=t=>d.get(t);const _=["get","getKey","getAll","getAllKeys","count"],w=["put","add","delete","clear"],b=new Map;function S(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(b.get(e))return b.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=w.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!_.includes(n))return;const s=async function(t){const e=this.transaction(t,i?"readwrite":"readonly");let s=e.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),u=1;u<o;u++)a[u-1]=arguments[u];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&e.done]))[0]};return b.set(e,s),s}p=(t=>({...t,get:(e,n,r)=>S(e,n)||t.get(e,n,r),has:(e,n)=>!!S(e,n)||t.has(e,n)}))(p);class E{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){const e=t.getImmediate();return"".concat(e.library,"/").concat(e.version)}return null})).filter((t=>t)).join(" ")}}const T="@firebase/app",D="0.10.9",k=new i.Vy("@firebase/app"),I="@firebase/app-compat",C="@firebase/analytics-compat",A="@firebase/analytics",N="@firebase/app-check-compat",M="@firebase/app-check",x="@firebase/auth",O="@firebase/auth-compat",R="@firebase/database",L="@firebase/database-compat",P="@firebase/functions",F="@firebase/functions-compat",V="@firebase/installations",U="@firebase/installations-compat",j="@firebase/messaging",B="@firebase/messaging-compat",Y="@firebase/performance",q="@firebase/performance-compat",z="@firebase/remote-config",W="@firebase/remote-config-compat",G="@firebase/storage",H="@firebase/storage-compat",K="@firebase/firestore",Q="@firebase/vertexai-preview",X="@firebase/firestore-compat",J="firebase",$="[DEFAULT]",Z={[T]:"fire-core",[I]:"fire-core-compat",[A]:"fire-analytics",[C]:"fire-analytics-compat",[M]:"fire-app-check",[N]:"fire-app-check-compat",[x]:"fire-auth",[O]:"fire-auth-compat",[R]:"fire-rtdb",[L]:"fire-rtdb-compat",[P]:"fire-fn",[F]:"fire-fn-compat",[V]:"fire-iid",[U]:"fire-iid-compat",[j]:"fire-fcm",[B]:"fire-fcm-compat",[Y]:"fire-perf",[q]:"fire-perf-compat",[z]:"fire-rc",[W]:"fire-rc-compat",[G]:"fire-gcs",[H]:"fire-gcs-compat",[K]:"fire-fst",[X]:"fire-fst-compat",[Q]:"fire-vertex","fire-js":"fire-js",[J]:"fire-js-all"},tt=new Map,et=new Map,nt=new Map;function rt(t,e){try{t.container.addComponent(e)}catch(n){k.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),n)}}function it(t){const e=t.name;if(nt.has(e))return k.debug("There were multiple attempts to register component ".concat(e,".")),!1;nt.set(e,t);for(const n of tt.values())rt(n,t);for(const n of et.values())rt(n,t);return!0}function st(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const ot={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},at=new s.FA("app","Firebase",ot);class ut{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw at.create("app-deleted",{appName:this._name})}}const ct="10.13.0";function lt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;if("object"!==typeof e){e={name:e}}const i=Object.assign({name:$,automaticDataCollectionEnabled:!1},e),o=i.name;if("string"!==typeof o||!o)throw at.create("bad-app-name",{appName:String(o)});if(n||(n=(0,s.T9)()),!n)throw at.create("no-options");const a=tt.get(o);if(a){if((0,s.bD)(n,a.options)&&(0,s.bD)(i,a.config))return a;throw at.create("duplicate-app",{appName:o})}const u=new r.h1(o);for(const r of nt.values())u.addComponent(r);const c=new ut(n,i,u);return tt.set(o,c),c}function ht(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;const e=tt.get(t);if(!e&&t===$&&(0,s.T9)())return lt();if(!e)throw at.create("no-app",{appName:t});return e}function ft(t,e,n){var i;let s=null!==(i=Z[t])&&void 0!==i?i:t;n&&(s+="-".concat(n));const o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const t=['Unable to register library "'.concat(s,'" with version "').concat(e,'":')];return o&&t.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),o&&a&&t.push("and"),a&&t.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),void k.warn(t.join(" "))}it(new r.uA("".concat(s,"-version"),(()=>({library:s,version:e})),"VERSION"))}const dt="firebase-heartbeat-database",pt=1,gt="firebase-heartbeat-store";let mt=null;function yt(){return mt||(mt=function(t,e){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(t,e),a=y(o);return r&&o.addEventListener("upgradeneeded",(t=>{r(y(o.result),t.oldVersion,t.newVersion,y(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),i&&t.addEventListener("versionchange",(t=>i(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(dt,pt,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(gt)}catch(n){console.warn(n)}}}).catch((t=>{throw at.create("idb-open",{originalErrorMessage:t.message})}))),mt}async function vt(t,e){try{const n=(await yt()).transaction(gt,"readwrite"),r=n.objectStore(gt);await r.put(e,_t(t)),await n.done}catch(n){if(n instanceof s.g)k.warn(n.message);else{const t=at.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});k.warn(t.message)}}}function _t(t){return"".concat(t.name,"!").concat(t.options.appId)}class wt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new St(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=bt();if(console.log("heartbeats",null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats),null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(n=this._heartbeatsCache)||void 0===n?void 0:n.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return;return this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(r){k.warn(r)}}async getHeartbeatsHeader(){var t;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=bt(),{heartbeatsToSend:n,unsentEntries:r}=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=t.slice();for(const i of t){const t=n.find((t=>t.agent===i.agent));if(t){if(t.dates.push(i.date),Et(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Et(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,s.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return k.warn(e),""}}}function bt(){return(new Date).toISOString().substring(0,10)}class St{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.zW)()&&(0,s.eX)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await yt()).transaction(gt),n=await e.objectStore(gt).get(_t(t));return await e.done,n}catch(e){if(e instanceof s.g)k.warn(e.message);else{const t=at.create("idb-get",{originalErrorMessage:null===e||void 0===e?void 0:e.message});k.warn(t.message)}}}(this.app);return(null===t||void 0===t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return vt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return vt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Et(t){return(0,s.Uj)(JSON.stringify({version:2,heartbeats:t})).length}var Tt;Tt="",it(new r.uA("platform-logger",(t=>new E(t)),"PRIVATE")),it(new r.uA("heartbeat",(t=>new wt(t)),"PRIVATE")),ft(T,D,Tt),ft(T,D,"esm2017"),ft("fire-js","")},27253:(t,e,n)=>{"use strict";n.d(e,{h1:()=>a,uA:()=>i});var r=n(89061);class i{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const s="[DEFAULT]";class o{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new r.cY;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),r=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:r});n.resolve(t)}catch(e){}}}}clearInstance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instances.has(t)}getOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instancesOptions.get(t)||{}}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(r){}}getOrInitializeService(t){let{instanceIdentifier:e,options:n={}}=t,r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===s?void 0:i),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.component?this.component.multipleInstances?t:s:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component ".concat(t.name," has already been registered with ").concat(this.name));e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new o(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}},24624:(t,e,n)=>{"use strict";n.d(e,{$b:()=>i,Vy:()=>c});const r=[];var i;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},u=function(t,e){if(e<t.logLevel)return;const n=(new Date).toISOString(),r=a[e];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(t.name,":"),...s)};class c{constructor(t){this.name=t,this._logLevel=o,this._logHandler=u,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in i))throw new TypeError('Invalid value "'.concat(t,'" assigned to `logLevel`'));this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?s[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}},90815:(t,e,n)=>{"use strict";n.d(e,{Wp:()=>r.Wp});var r=n(80913);(0,r.KO)("firebase","10.13.0","app")},66220:(t,e,n)=>{"use strict";n.d(e,{rJ:()=>Uo,H9:()=>jo,x7:()=>ja,GG:()=>Ya,aU:()=>qo,My:()=>Aa,P:()=>Ta,BN:()=>qa,mZ:()=>za,_M:()=>ka});var r,i,s=n(80913),o=n(27253),a=n(24624),u=n(89061),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},l={};(function(){var t;function e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(t,e,n){n||(n=0);var r=Array(16);if("string"===typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function s(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}!function(t,e){function n(){}n.prototype=e.prototype,t.D=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.C=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}(e,(function(){this.blockSize=-1})),e.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},e.prototype.u=function(t,e){void 0===e&&(e=t.length);for(var r=e-this.blockSize,i=this.B,s=this.h,o=0;o<e;){if(0==s)for(;o<=r;)n(this,t,o),o+=this.blockSize;if("string"===typeof t){for(;o<e;)if(i[s++]=t.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<e;)if(i[s++]=t[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=e},e.prototype.v=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.o;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.u(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var o={};function a(t){return-128<=t&&128>t?function(t,e){var n=o;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(t){return new s([0|t],0>t?-1:0)})):new s([0|t],0>t?-1:0)}function u(t){if(isNaN(t)||!isFinite(t))return c;if(0>t)return g(u(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=4294967296;return new s(e,0)}var c=a(0),h=a(1),f=a(16777216);function d(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function p(t){return-1==t.h}function g(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new s(n,~t.h).add(h)}function m(t,e){return t.add(g(e))}function y(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function v(t,e){this.g=t,this.h=e}function _(t,e){if(d(e))throw Error("division by zero");if(d(t))return new v(c,c);if(p(t))return e=_(g(t),e),new v(g(e.g),g(e.h));if(p(e))return e=_(t,g(e)),new v(g(e.g),e.h);if(30<t.g.length){if(p(t)||p(e))throw Error("slowDivide_ only works with positive integers.");for(var n=h,r=e;0>=r.l(t);)n=w(n),r=w(r);var i=b(n,1),s=b(r,1);for(r=b(r,2),n=b(n,2);!d(r);){var o=s.add(r);0>=o.l(t)&&(i=i.add(n),s=o),r=b(r,1),n=b(n,1)}return e=m(t,i.j(e)),new v(i,e)}for(i=c;0<=t.l(e);){for(n=Math.max(1,Math.floor(t.m()/e.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=u(n)).j(e);p(o)||0<o.l(t);)o=(s=u(n-=r)).j(e);d(s)&&(s=h),i=i.add(s),t=m(t,o)}return new v(i,t)}function w(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.i(r)<<1|t.i(r-1)>>>31;return new s(n,t.h)}function b(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.i(o+n)>>>e|t.i(o+n+1)<<32-e:t.i(o+n);return new s(i,t.h)}(t=s.prototype).m=function(){if(p(this))return-g(this).m();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.i(n);t+=(0<=r?r:4294967296+r)*e,e*=4294967296}return t},t.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(d(this))return"0";if(p(this))return"-"+g(this).toString(t);for(var e=u(Math.pow(t,6)),n=this,r="";;){var i=_(n,e).g,s=((0<(n=m(n,i.j(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(d(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},t.i=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},t.l=function(t){return p(t=m(this,t))?-1:d(t)?0:1},t.abs=function(){return p(this)?g(this):this},t.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.i(i))+(65535&t.i(i)),a=(o>>>16)+(this.i(i)>>>16)+(t.i(i)>>>16);r=a>>>16,o&=65535,a&=65535,n[i]=a<<16|o}return new s(n,-2147483648&n[n.length-1]?-1:0)},t.j=function(t){if(d(this)||d(t))return c;if(p(this))return p(t)?g(this).j(g(t)):g(g(this).j(t));if(p(t))return g(this.j(g(t)));if(0>this.l(f)&&0>t.l(f))return u(this.m()*t.m());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.i(r)>>>16,a=65535&this.i(r),l=t.i(i)>>>16,h=65535&t.i(i);n[2*r+2*i]+=a*h,y(n,2*r+2*i),n[2*r+2*i+1]+=o*h,y(n,2*r+2*i+1),n[2*r+2*i+1]+=a*l,y(n,2*r+2*i+1),n[2*r+2*i+2]+=o*l,y(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new s(n,0)},t.A=function(t){return _(this,t).h},t.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)&t.i(r);return new s(n,this.h&t.h)},t.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)|t.i(r);return new s(n,this.h|t.h)},t.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)^t.i(r);return new s(n,this.h^t.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,i=l.Md5=e,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return g(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=u(Math.pow(n,8)),i=c,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+o),n);8>o?(o=u(Math.pow(n,o)),i=i.j(o).add(u(a))):i=(i=i.j(r)).add(u(a))}return i},r=l.Integer=s}).apply("undefined"!==typeof c?c:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var h,f,d,p,g,m,y,v,_,w="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},b={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};var n=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof w&&w];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(t,r){if(r)t:{var i=n;t=t.split(".");for(var s=0;s<t.length-1;s++){var o=t[s];if(!(o in i))break t;i=i[o]}(r=r(s=i[t=t[t.length-1]]))!=s&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,r=!1,i={next:function(){if(!r&&n<t.length){var i=n++;return{value:e(i,t[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(t,e){return e}))}}));var r=r||{},i=this||self;function s(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function o(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function a(t,e,n){return t.call.apply(t.bind,arguments)}function u(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function c(t,e,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:u).apply(null,arguments)}function l(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function S(t,e){function n(){}n.prototype=e.prototype,t.aa=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Qb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function E(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function D(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(s(e)){const n=t.length||0,r=e.length||0;t.length=n+r;for(let i=0;i<r;i++)t[n+i]=e[i]}else t.push(e)}}function k(t){return/^[\s\xa0]*$/.test(t)}function I(){var t=i.navigator;return t&&(t=t.userAgent)?t:""}function C(t){return C[" "](t),t}C[" "]=function(){};var A=-1!=I().indexOf("Gecko")&&!(-1!=I().toLowerCase().indexOf("webkit")&&-1==I().indexOf("Edge"))&&!(-1!=I().indexOf("Trident")||-1!=I().indexOf("MSIE"))&&-1==I().indexOf("Edge");function N(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function M(t){const e={};for(const n in t)e[n]=t[n];return e}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let e=0;e<x.length;e++)n=x[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function R(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function L(t){i.setTimeout((()=>{throw t}),0)}function P(){var t=B;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var F=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new V),(t=>t.reset()));class V{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let U,j=!1,B=new class{constructor(){this.h=this.g=null}add(t,e){const n=F.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},Y=()=>{const t=i.Promise.resolve(void 0);U=()=>{t.then(q)}};var q=()=>{for(var t;t=P();){try{t.h.call(t.g)}catch(n){L(n)}var e=F;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}j=!1};function z(){this.s=this.s,this.C=this.C}function W(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},W.prototype.h=function(){this.defaultPrevented=!0};var G=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};i.addEventListener("test",t,e),i.removeEventListener("test",t,e)}catch(n){}return t}();function H(t,e){if(W.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(A){t:{try{C(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:K[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&H.aa.h.call(this)}}S(H,W);var K={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Q="closure_listenable_"+(1e6*Math.random()|0),X=0;function J(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++X,this.da=this.fa=!1}function $(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function Z(t){this.src=t,this.g={},this.h=0}function tt(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=Array.prototype.indexOf.call(i,e,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&($(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function et(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.da&&s.listener==e&&s.capture==!!n&&s.ha==r)return i}return-1}Z.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=et(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new J(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var nt="closure_lm_"+(1e6*Math.random()|0),rt={};function it(t,e,n,r,i){if(r&&r.once)return ot(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)it(t,e[s],n,r,i);return null}return n=dt(n),t&&t[Q]?t.K(e,n,o(r)?!!r.capture:!!r,i):st(t,e,n,!1,r,i)}function st(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,u=ht(t);if(u||(t[nt]=u=new Z(t)),(n=u.add(e,n,r,a,s)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}const e=lt;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)G||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ct(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ot(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ot(t,e[s],n,r,i);return null}return n=dt(n),t&&t[Q]?t.L(e,n,o(r)?!!r.capture:!!r,i):st(t,e,n,!0,r,i)}function at(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)at(t,e[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=dt(n),t&&t[Q]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=et(s=t.g[e],n,r,i))&&($(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--)))):t&&(t=ht(t))&&(e=t.g[e.toString()],t=-1,e&&(t=et(e,n,r,i)),(n=-1<t?e[t]:null)&&ut(n))}function ut(t){if("number"!==typeof t&&t&&!t.da){var e=t.src;if(e&&e[Q])tt(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ct(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ht(e))?(tt(n,t),0==n.h&&(n.src=null,e[nt]=null)):$(t)}}}function ct(t){return t in rt?rt[t]:rt[t]="on"+t}function lt(t,e){if(t.da)t=!0;else{e=new H(e,this);var n=t.listener,r=t.ha||t.src;t.fa&&ut(t),t=n.call(r,e)}return t}function ht(t){return(t=t[nt])instanceof Z?t:null}var ft="__closure_events_fn_"+(1e9*Math.random()>>>0);function dt(t){return"function"===typeof t?t:(t[ft]||(t[ft]=function(e){return t.handleEvent(e)}),t[ft])}function pt(){z.call(this),this.i=new Z(this),this.M=this,this.F=null}function gt(t,e){var n,r=t.F;if(r)for(n=[];r;r=r.F)n.push(r);if(t=t.M,r=e.type||e,"string"===typeof e)e=new W(e,t);else if(e instanceof W)e.target=e.target||t;else{var i=e;O(e=new W(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=mt(o,r,!0,e)&&i}if(i=mt(o=e.g=t,r,!0,e)&&i,i=mt(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=mt(o=e.g=n[s],r,!1,e)&&i}function mt(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.da&&o.capture==n){var a=o.listener,u=o.ha||o.src;o.fa&&tt(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function yt(t,e,n){if("function"===typeof t)n&&(t=c(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=c(t.handleEvent,t)}return 2147483647<Number(e)?-1:i.setTimeout(t,e||0)}function vt(t){t.g=yt((()=>{t.g=null,t.i&&(t.i=!1,vt(t))}),t.l);const e=t.h;t.h=null,t.m.apply(null,e)}S(pt,z),pt.prototype[Q]=!0,pt.prototype.removeEventListener=function(t,e,n,r){at(this,t,e,n,r)},pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)$(n[r]);delete e.g[t],e.h--}}this.F=null},pt.prototype.K=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},pt.prototype.L=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};class _t extends z{constructor(t,e){super(),this.m=t,this.l=e,this.h=null,this.i=!1,this.g=null}j(t){this.h=arguments,this.g?this.i=!0:vt(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wt(t){z.call(this),this.h=t,this.g={}}S(wt,z);var bt=[];function St(t){N(t.g,(function(t,e){this.g.hasOwnProperty(e)&&ut(t)}),t),t.g={}}wt.prototype.N=function(){wt.aa.N.call(this),St(this)},wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Et=i.JSON.stringify,Tt=i.JSON.parse,Dt=class{stringify(t){return i.JSON.stringify(t,void 0)}parse(t){return i.JSON.parse(t,void 0)}};function kt(){}function It(t){return t.h||(t.h=t.i())}function Ct(){}kt.prototype.h=null;var At={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nt(){W.call(this,"d")}function Mt(){W.call(this,"c")}S(Nt,W),S(Mt,W);var xt={},Ot=null;function Rt(){return Ot=Ot||new pt}function Lt(t){W.call(this,xt.La,t)}function Pt(t){const e=Rt();gt(e,new Lt(e))}function Ft(t,e){W.call(this,xt.STAT_EVENT,t),this.stat=e}function Vt(t){const e=Rt();gt(e,new Ft(e,t))}function Ut(t,e){W.call(this,xt.Ma,t),this.size=e}function jt(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){t()}),e)}function Bt(){this.g=!0}function Yt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Et(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}xt.La="serverreachability",S(Lt,W),xt.STAT_EVENT="statevent",S(Ft,W),xt.Ma="timingevent",S(Ut,W),Bt.prototype.xa=function(){this.g=!1},Bt.prototype.info=function(){};var qt,zt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Gt(){}function Ht(t,e,n,r){this.j=t,this.i=e,this.l=n,this.R=r||1,this.U=new wt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Kt}function Kt(){this.i=null,this.g="",this.h=!1}S(Gt,kt),Gt.prototype.g=function(){return new XMLHttpRequest},Gt.prototype.i=function(){return{}},qt=new Gt;var Qt={},Xt={};function Jt(t,e,n){t.L=1,t.v=Ee(ve(e)),t.m=n,t.P=!0,$t(t,null)}function $t(t,e){t.F=Date.now(),ee(t),t.A=ve(t.v);var n=t.A,r=t.R;Array.isArray(r)||(r=[String(r)]),Fe(n.i,"t",r),t.C=0,n=t.j.J,t.h=new Kt,t.g=Dn(t.j,n?e:null,!t.m),0<t.O&&(t.M=new _t(c(t.Y,t,t.g),t.O)),e=t.U,n=t.g,r=t.ca;var i="readystatechange";Array.isArray(i)||(i&&(bt[0]=i.toString()),i=bt);for(var s=0;s<i.length;s++){var o=it(n,i[s],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}e=t.H?M(t.H):{},t.m?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Pt(),function(t,e,n,r,i,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.i,t.u,t.A,t.l,t.R,t.m)}function Zt(t){return!!t.g&&("GET"==t.u&&2!=t.L&&t.j.Ca)}function te(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Xt:(n=Number(e.substring(n,r)),isNaN(n)?Qt:(r+=1)+n>e.length?Xt:(e=e.slice(r,r+n),t.C=r+n,e))}function ee(t){t.S=Date.now()+t.I,ne(t,t.I)}function ne(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=jt(c(t.ba,t),e)}function re(t){t.B&&(i.clearTimeout(t.B),t.B=null)}function ie(t){0==t.j.G||t.J||wn(t.j,t)}function se(t){re(t);var e=t.M;e&&"function"==typeof e.ma&&e.ma(),t.M=null,St(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ma())}function oe(t,e){try{var n=t.j;if(0!=n.G&&(n.g==t||he(n.h,t)))if(!t.K&&he(n.h,t)&&3==n.G){try{var r=n.Da.g.parse(e)}catch(l){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;_n(n),cn(n)}mn(n),Vt(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=jt(c(n.Za,n),6e3));if(1>=le(n.h)&&n.ca){try{n.ca()}catch(l){}n.ca=void 0}}else Sn(n,11)}else if((t.K||n.g==t)&&_n(n),!k(e))for(i=n.Da.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const e=c[3];null!=e&&(n.la=e,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const l=c[5];null!=l&&"number"===typeof l&&0<l&&(r=1.5*l,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=r.h;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(fe(s,s.h),s.h=null))}if(r.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.ya=t,Se(r.I,r.D,t))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-t.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=t;if((r=n).qa=Tn(r,r.J?r.ia:null,r.W),o.K){de(r.h,o);var a=o,u=r.L;u&&(a.I=u),a.B&&(re(a),ee(a)),r.g=o}else gn(r);0<n.i.length&&hn(n)}else"stop"!=c[0]&&"close"!=c[0]||Sn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Sn(n,7):un(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Pt()}catch(l){}}Ht.prototype.ca=function(t){t=t.target;const e=this.M;e&&3==rn(t)?e.j():this.Y(t)},Ht.prototype.Y=function(t){try{if(t==this.g)t:{const f=rn(this.g);var e=this.g.Ba();this.g.Z();if(!(3>f)&&(3!=f||this.g&&(this.h.h||this.g.oa()||sn(this.g)))){this.J||4!=f||7==e||Pt(),re(this);var n=this.g.Z();this.X=n;e:if(Zt(this)){var r=sn(this.g);t="";var s=r.length,o=4==rn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){se(this),ie(this);var a="";break e}this.h.i=new i.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:!(o&&e==s-1)});r.length=0,this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(t,e,n,r,i,s,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,f,n),this.o){if(this.T&&!this.K){e:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(u)){var l=u;break e}}l=null}if(!(n=l)){this.o=!1,this.s=3,Vt(12),se(this),ie(this);break t}Yt(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oe(this,n)}if(this.P){let t;for(n=!0;!this.J&&this.C<a.length;){if(t=te(this,a),t==Xt){4==f&&(this.s=4,Vt(14),n=!1),Yt(this.i,this.l,null,"[Incomplete Response]");break}if(t==Qt){this.s=4,Vt(15),Yt(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Yt(this.i,this.l,t,null),oe(this,t)}if(Zt(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=f||0!=a.length||this.h.h||(this.s=1,Vt(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),yn(h),h.M=!0,Vt(11))}}else Yt(this.i,this.l,a,"[Invalid Chunked Response]"),se(this),ie(this)}else Yt(this.i,this.l,a,null),oe(this,a);4==f&&se(this),this.o&&!this.J&&(4==f?wn(this.j,this):(this.o=!1,ee(this)))}else(function(t){const e={};t=(t.g&&2<=rn(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(k(t[r]))continue;var n=R(t[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),se(this),ie(this)}}}catch(f){}},Ht.prototype.cancel=function(){this.J=!0,se(this)},Ht.prototype.ba=function(){this.B=null;const t=Date.now();0<=t-this.S?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.i,this.A),2!=this.L&&(Pt(),Vt(17)),se(this),this.s=2,ie(this)):ne(this,this.S-t)};var ae=class{constructor(t,e){this.g=t,this.map=e}};function ue(t){this.l=t||10,i.PerformanceNavigationTiming?t=0<(t=i.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ce(t){return!!t.h||!!t.g&&t.g.size>=t.j}function le(t){return t.h?1:t.g?t.g.size:0}function he(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function fe(t,e){t.g?t.g.add(e):t.h=e}function de(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function pe(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return E(t.i)}function ge(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(s(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.na&&"function"==typeof t.na)return t.na();if(!t.V||"function"!=typeof t.V){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(s(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function(t){if(t.V&&"function"==typeof t.V)return t.V();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(s(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}ue.prototype.cancel=function(){if(this.i=pe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var me=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ye(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof ye){this.h=t.h,_e(this,t.j),this.o=t.o,this.g=t.g,we(this,t.s),this.l=t.l;var e=t.i,n=new Oe;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),be(this,n),this.m=t.m}else t&&(e=String(t).match(me))?(this.h=!1,_e(this,e[1]||"",!0),this.o=Te(e[2]||""),this.g=Te(e[3]||"",!0),we(this,e[4]),this.l=Te(e[5]||"",!0),be(this,e[6]||"",!0),this.m=Te(e[7]||"")):(this.h=!1,this.i=new Oe(null,this.h))}function ve(t){return new ye(t)}function _e(t,e,n){t.j=n?Te(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function we(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.s=e}else t.s=null}function be(t,e,n){e instanceof Oe?(t.i=e,function(t,e){e&&!t.j&&(Re(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Le(this,e),Fe(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=De(e,Me)),t.i=new Oe(e,t.h))}function Se(t,e,n){t.i.set(e,n)}function Ee(t){return Se(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Te(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function De(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,ke),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ke(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ye.prototype.toString=function(){var t=[],e=this.j;e&&t.push(De(e,Ce,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(De(e,Ce,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(De(n,"/"==n.charAt(0)?Ne:Ae,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.m)&&t.push("#",De(n,xe)),t.join("")};var Ie,Ce=/[#\/\?@]/g,Ae=/[#\?:]/g,Ne=/[#\?]/g,Me=/[#\?@]/g,xe=/#/g;function Oe(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Re(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Le(t,e){Re(t),e=Ve(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Pe(t,e){return Re(t),e=Ve(t,e),t.g.has(e)}function Fe(t,e,n){Le(t,e),0<n.length&&(t.i=null,t.g.set(Ve(t,e),E(n)),t.h+=n.length)}function Ve(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Ue(t,e,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function je(){this.g=new Dt}function Be(t,e,n){const r=n||"";try{ge(t,(function(t,n){let i=t;o(t)&&(i=Et(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ye(t){this.l=t.Ub||null,this.j=t.eb||!1}function qe(t,e){pt.call(this),this.D=t,this.o=e,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function ze(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}function We(t){t.readyState=4,t.l=null,t.j=null,t.v=null,Ge(t)}function Ge(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function He(t){let e="";return N(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Ke(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=He(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Se(t,e,n))}function Qe(t){pt.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=Oe.prototype).add=function(t,e){Re(this),this.i=null,t=Ve(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},t.forEach=function(t,e){Re(this),this.g.forEach((function(n,r){n.forEach((function(n){t.call(e,n,r,this)}),this)}),this)},t.na=function(){Re(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let t=0;t<i.length;t++)n.push(e[r])}return n},t.V=function(t){Re(this);let e=[];if("string"===typeof t)Pe(this,t)&&(e=e.concat(this.g.get(Ve(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},t.set=function(t,e){return Re(this),this.i=null,Pe(this,t=Ve(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")},S(Ye,kt),Ye.prototype.g=function(){return new qe(this.l,this.j)},Ye.prototype.i=(Ie={},function(){return Ie}),S(qe,pt),(t=qe.prototype).open=function(t,e){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=e,this.readyState=1,Ge(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||i).fetch(new Request(this.A,e)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,We(this)),this.readyState=0},t.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ge(this)),this.g&&(this.readyState=3,Ge(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ze(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var e=t.value?t.value:new Uint8Array(0);(e=this.v.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?We(this):Ge(this),3==this.readyState&&ze(this)}},t.Ra=function(t){this.g&&(this.response=this.responseText=t,We(this))},t.Qa=function(t){this.g&&(this.response=t,We(this))},t.ga=function(){this.g&&We(this)},t.setRequestHeader=function(t,e){this.u.append(t,e)},t.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(qe.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}}),S(Qe,pt);var Xe=/^https?$/i,Je=["POST","PUT"];function $e(t,e){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=e,t.m=5,Ze(t),en(t)}function Ze(t){t.A||(t.A=!0,gt(t,"complete"),gt(t,"error"))}function tn(t){if(t.h&&"undefined"!=typeof r&&(!t.v[1]||4!=rn(t)||2!=t.Z()))if(t.u&&4==rn(t))yt(t.Ea,0,t);else if(gt(t,"readystatechange"),4==rn(t)){t.h=!1;try{const r=t.Z();t:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var s;if(s=0===r){var o=String(t.D).match(me)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Xe.test(o?o.toLowerCase():"")}n=s}if(n)gt(t,"complete"),gt(t,"success");else{t.m=6;try{var a=2<rn(t)?t.g.statusText:""}catch(u){a=""}t.l=a+" ["+t.Z()+"]",Ze(t)}}finally{en(t)}}}function en(t,e){if(t.g){nn(t);const r=t.g,i=t.v[0]?()=>{}:null;t.g=null,t.v=null,e||gt(t,"ready");try{r.onreadystatechange=i}catch(n){}}}function nn(t){t.I&&(i.clearTimeout(t.I),t.I=null)}function rn(t){return t.g?t.g.readyState:0}function sn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(T){return null}}function on(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function an(t){this.Aa=0,this.i=[],this.j=new Bt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=on("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=on("baseRetryDelayMs",5e3,t),this.cb=on("retryDelaySeedMs",1e4,t),this.Wa=on("forwardChannelMaxRetries",2,t),this.wa=on("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new ue(t&&t.concurrentRequestLimit),this.Da=new je,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function un(t){if(ln(t),3==t.G){var e=t.U++,n=ve(t.I);if(Se(n,"SID",t.K),Se(n,"RID",e),Se(n,"TYPE","terminate"),dn(t,n),(e=new Ht(t,t.j,e)).L=2,e.v=Ee(ve(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(e.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=e.v,n=!0),n||(e.g=Dn(e.j,null),e.g.ea(e.v)),e.F=Date.now(),ee(e)}En(t)}function cn(t){t.g&&(yn(t),t.g.cancel(),t.g=null)}function ln(t){cn(t),t.u&&(i.clearTimeout(t.u),t.u=null),_n(t),t.h.cancel(),t.s&&("number"===typeof t.s&&i.clearTimeout(t.s),t.s=null)}function hn(t){if(!ce(t.h)&&!t.s){t.s=!0;var e=t.Ga;U||Y(),j||(U(),j=!0),B.add(e,t),t.B=0}}function fn(t,e){var n;n=e?e.l:t.U++;const r=ve(t.I);Se(r,"SID",t.K),Se(r,"RID",n),Se(r,"AID",t.T),dn(t,r),t.m&&t.o&&Ke(r,t.m,t.o),n=new Ht(t,t.j,n,t.B+1),null===t.m&&(n.H=t.o),e&&(t.i=e.D.concat(t.i)),e=pn(t,n,1e3),n.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),fe(t.h,n),Jt(n,r,e)}function dn(t,e){t.H&&N(t.H,(function(t,n){Se(e,n,t)})),t.l&&ge({},(function(t,n){Se(e,n,t)}))}function pn(t,e,n){n=Math.min(t.i.length,n);var r=t.l?c(t.l.Na,t.l,t):null;t:{var i=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const u=i[a].map;if(n-=e,0>n)e=Math.max(0,i[a].g-100),o=!1;else try{Be(u,t,"req"+n+"_")}catch(s){r&&r(u)}}if(o){r=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,r}function gn(t){if(!t.g&&!t.u){t.Y=1;var e=t.Fa;U||Y(),j||(U(),j=!0),B.add(e,t),t.v=0}}function mn(t){return!(t.g||t.u||3<=t.v)&&(t.Y++,t.u=jt(c(t.Fa,t),bn(t,t.v)),t.v++,!0)}function yn(t){null!=t.A&&(i.clearTimeout(t.A),t.A=null)}function vn(t){t.g=new Ht(t,t.j,"rpc",t.Y),null===t.m&&(t.g.H=t.o),t.g.O=0;var e=ve(t.qa);Se(e,"RID","rpc"),Se(e,"SID",t.K),Se(e,"AID",t.T),Se(e,"CI",t.F?"0":"1"),!t.F&&t.ja&&Se(e,"TO",t.ja),Se(e,"TYPE","xmlhttp"),dn(t,e),t.m&&t.o&&Ke(e,t.m,t.o),t.L&&(t.g.I=t.L);var n=t.g;t=t.ia,n.L=1,n.v=Ee(ve(e)),n.m=null,n.P=!0,$t(n,t)}function _n(t){null!=t.C&&(i.clearTimeout(t.C),t.C=null)}function wn(t,e){var n=null;if(t.g==e){_n(t),yn(t),t.g=null;var r=2}else{if(!he(t.h,e))return;n=e.D,de(t.h,e),r=1}if(0!=t.G)if(e.o)if(1==r){n=e.m?e.m.length:0,e=Date.now()-e.F;var i=t.B;gt(r=Rt(),new Ut(r,n)),hn(t)}else gn(t);else if(3==(i=e.s)||0==i&&0<e.X||!(1==r&&function(t,e){return!(le(t.h)>=t.h.j-(t.s?1:0))&&(t.s?(t.i=e.D.concat(t.i),!0):!(1==t.G||2==t.G||t.B>=(t.Va?0:t.Wa))&&(t.s=jt(c(t.Ga,t,e),bn(t,t.B)),t.B++,!0))}(t,e)||2==r&&mn(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:Sn(t,5);break;case 4:Sn(t,10);break;case 3:Sn(t,6);break;default:Sn(t,2)}}function bn(t,e){let n=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(n*=2),n*e}function Sn(t,e){if(t.j.info("Error code "+e),2==e){var n=c(t.fb,t),r=t.Xa;const e=!r;r=new ye(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||_e(r,"https"),Ee(r),e?function(t,e){const n=new Bt;if(i.Image){const r=new Image;r.onload=l(Ue,n,"TestLoadImage: loaded",!0,e,r),r.onerror=l(Ue,n,"TestLoadImage: error",!1,e,r),r.onabort=l(Ue,n,"TestLoadImage: abort",!1,e,r),r.ontimeout=l(Ue,n,"TestLoadImage: timeout",!1,e,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(r.toString(),n):function(t,e){new Bt;const n=new AbortController,r=setTimeout((()=>{n.abort(),Ue(0,0,!1,e)}),1e4);fetch(t,{signal:n.signal}).then((t=>{clearTimeout(r),t.ok?Ue(0,0,!0,e):Ue(0,0,!1,e)})).catch((()=>{clearTimeout(r),Ue(0,0,!1,e)}))}(r.toString(),n)}else Vt(2);t.G=0,t.l&&t.l.sa(e),En(t),ln(t)}function En(t){if(t.G=0,t.ka=[],t.l){const e=pe(t.h);0==e.length&&0==t.i.length||(D(t.ka,e),D(t.ka,t.i),t.h.i.length=0,E(t.i),t.i.length=0),t.l.ra()}}function Tn(t,e,n){var r=n instanceof ye?ve(n):new ye(n);if(""!=r.g)e&&(r.g=e+"."+r.g),we(r,r.s);else{var s=i.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var o=new ye(null);r&&_e(o,r),e&&(o.g=e),s&&we(o,s),n&&(o.l=n),r=o}return n=t.D,e=t.ya,n&&e&&Se(r,n,e),Se(r,"VER",t.la),dn(t,r),r}function Dn(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ca&&!t.pa?new Qe(new Ye({eb:n})):new Qe(t.pa)).Ha(t.J),e}function kn(){}function In(){}function Cn(t,e){pt.call(this),this.g=new an(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.va&&(t?t["X-WebChannel-Client-Profile"]=e.va:t={"X-WebChannel-Client-Profile":e.va}),this.g.S=t,(t=e&&e.Sb)&&!k(t)&&(this.g.m=t),this.v=e&&e.supportsCrossDomainXhr||!1,this.u=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!k(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new Mn(this)}function An(t){Nt.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Nn(){Mt.call(this),this.status=1}function Mn(t){this.g=t}(t=Qe.prototype).Ha=function(t){this.J=t},t.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qt.g(),this.v=this.o?It(this.o):It(qt),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(e,String(t),!0),this.B=!1}catch(o){return void $e(this,o)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const t of r.keys())n.set(t,r.get(t))}r=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),s=i.FormData&&t instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Je,e,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nn(this),this.u=!0,this.g.send(t),this.u=!1}catch(o){$e(this,o)}},t.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,gt(this,"complete"),gt(this,"abort"),en(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),en(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?tn(this):this.bb())},t.bb=function(){tn(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch(Ie){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(Ie){return""}},t.Oa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Tt(e)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(t=an.prototype).la=8,t.G=1,t.connect=function(t,e,n,r){Vt(0),this.W=t,this.H=e||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=Tn(this,null,this.W),hn(this)},t.Ga=function(t){if(this.s)if(this.s=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new Ht(this,this.j,t);let s=this.o;if(this.S&&(s?(s=M(s),O(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)t:{for(var e=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=pn(this,i,e),Se(n=ve(this.I),"RID",t),Se(n,"CVER",22),this.D&&Se(n,"X-HTTP-Session-Id",this.D),dn(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(He(s)))+"&"+e:this.m&&Ke(n,this.m,s)),fe(this.h,i),this.Ua&&Se(n,"TYPE","init"),this.P?(Se(n,"$req",e),Se(n,"SID","null"),i.T=!0,Jt(i,n,null)):Jt(i,n,e),this.G=2}}else 3==this.G&&(t?fn(this,t):0==this.i.length||ce(this.h)||fn(this))},t.Fa=function(){if(this.u=null,vn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=jt(c(this.ab,this),t)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vt(10),cn(this),vn(this))},t.Za=function(){null!=this.C&&(this.C=null,cn(this),mn(this),Vt(19))},t.fb=function(t){t?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=kn.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},In.prototype.g=function(t,e){return new Cn(t,e)},S(Cn,pt),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){un(this.g)},Cn.prototype.o=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.u&&((n={}).__data__=Et(t),t=n);e.i.push(new ae(e.Ya++,t)),3==e.G&&hn(e)},Cn.prototype.N=function(){this.g.l=null,delete this.j,un(this.g),delete this.g,Cn.aa.N.call(this)},S(An,Nt),S(Nn,Mt),S(Mn,kn),Mn.prototype.ua=function(){gt(this.g,"a")},Mn.prototype.ta=function(t){gt(this.g,new An(t))},Mn.prototype.sa=function(t){gt(this.g,new Nn)},Mn.prototype.ra=function(){gt(this.g,"b")},In.prototype.createWebChannel=In.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,_=b.createWebChannelTransport=function(){return new In},v=b.getStatEventTarget=function(){return Rt()},y=b.Event=xt,m=b.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zt.NO_ERROR=0,zt.TIMEOUT=8,zt.HTTP_ERROR=6,g=b.ErrorCode=zt,Wt.COMPLETE="complete",p=b.EventType=Wt,Ct.EventType=At,At.OPEN="a",At.CLOSE="b",At.ERROR="c",At.MESSAGE="d",pt.prototype.listen=pt.prototype.K,d=b.WebChannel=Ct,f=b.FetchXmlHttpFactory=Ye,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,h=b.XhrIo=Qe}).apply("undefined"!==typeof w?w:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const S="@firebase/firestore";class E{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}E.UNAUTHENTICATED=new E(null),E.GOOGLE_CREDENTIALS=new E("google-credentials-uid"),E.FIRST_PARTY=new E("first-party-uid"),E.MOCK_USER=new E("mock-user");let T="10.13.0";const D=new a.Vy("@firebase/firestore");function k(){return D.logLevel}function I(t){if(D.logLevel<=a.$b.DEBUG){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const i=n.map(N);D.debug("Firestore (".concat(T,"): ").concat(t),...i)}}function C(t){if(D.logLevel<=a.$b.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const i=n.map(N);D.error("Firestore (".concat(T,"): ").concat(t),...i)}}function A(t){if(D.logLevel<=a.$b.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const i=n.map(N);D.warn("Firestore (".concat(T,"): ").concat(t),...i)}}function N(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function M(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const e="FIRESTORE (".concat(T,") INTERNAL ASSERTION FAILED: ")+t;throw C(e),new Error(e)}function x(t,e){t||M()}function O(t,e){return t}const R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends u.g{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class P{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class F{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))}}class V{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(E.UNAUTHENTICATED)))}shutdown(){}}class U{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class j{constructor(t){this.t=t,this.currentUser=E.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new P;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new P,t.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await r(this.currentUser)}))},o=t=>{I("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(I("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new P)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(x("string"==typeof e.accessToken),new F(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return x(null===t||"string"==typeof t),new E(t)}}class B{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=E.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Y{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new B(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(E.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class q{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&I("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(t.error.message));const n=t.token!==this.R;return this.R=t.token,I("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const r=t=>{I("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>r(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?r(t):I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(x("string"==typeof t.token),this.R=t.token,new q(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function W(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class G{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=W(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%62))}return n}}function H(t,e){return t<e?-1:t>e?1:0}function K(t,e,n){return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}class Q{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new L(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new L(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new L(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new L(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Q.fromMillis(Date.now())}static fromDate(t){return Q.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Q(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?H(this.nanoseconds,t.nanoseconds):H(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class X{constructor(t){this.timestamp=t}static fromTimestamp(t){return new X(t)}static min(){return new X(new Q(0,0))}static max(){return new X(new Q(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class J{constructor(t,e,n){void 0===e?e=0:e>t.length&&M(),void 0===n?n=t.length-e:n>t.length-e&&M(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===J.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof J?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),i=e.get(r);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class $ extends J{construct(t,e,n){return new $(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const t=[];for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new L(R.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));t.push(...i.split("/").filter((t=>t.length>0)))}return new $(t)}static emptyPath(){return new $([])}}const Z=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tt extends J{construct(t,e,n){return new tt(t,e,n)}static isValidIdentifier(t){return Z.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tt.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new tt(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new L(R.INVALID_ARGUMENT,"Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));e.push(n),n=""};let s=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new L(R.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new L(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(s=!s,r++):"."!==e||s?(n+=e,r++):(i(),r++)}if(i(),s)throw new L(R.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new tt(e)}static emptyPath(){return new tt([])}}class et{constructor(t){this.path=t}static fromPath(t){return new et($.fromString(t))}static fromName(t){return new et($.fromString(t).popFirst(5))}static empty(){return new et($.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===$.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return $.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new et(new $(t.slice()))}}class nt{constructor(t,e,n,r){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=r}}nt.UNKNOWN_ID=-1;function rt(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(1e9===r?new Q(n+1,0):new Q(n,r));return new st(i,et.empty(),e)}function it(t){return new st(t.readTime,t.key,-1)}class st{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new st(X.min(),et.empty(),-1)}static max(){return new st(X.max(),et.empty(),-1)}}function ot(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=et.comparator(t.documentKey,e.documentKey),0!==n?n:H(t.largestBatchId,e.largestBatchId))}const at="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ut{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function ct(t){if(t.code!==R.FAILED_PRECONDITION||t.message!==at)throw t;I("LocalStore","Unexpectedly lost primary lease")}class lt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&M(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new lt(((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof lt?e:lt.resolve(e)}catch(t){return lt.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):lt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):lt.reject(e)}static resolve(t){return new lt(((e,n)=>{e(t)}))}static reject(t){return new lt(((e,n)=>{n(t)}))}static waitFor(t){return new lt(((e,n)=>{let r=0,i=0,s=!1;t.forEach((t=>{++r,t.next((()=>{++i,s&&i===r&&e()}),(t=>n(t)))})),s=!0,i===r&&e()}))}static or(t){let e=lt.resolve(!1);for(const n of t)e=e.next((t=>t?lt.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,r)=>{n.push(e.call(this,t,r))})),this.waitFor(n)}static mapArray(t,e){return new lt(((n,r)=>{const i=t.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const u=a;e(t[u]).next((t=>{s[u]=t,++o,o===i&&n(s)}),(t=>r(t)))}}))}static doWhile(t,e){return new lt(((n,r)=>{const i=()=>{!0===t()?e().next((()=>{i()}),r):n()};i()}))}}function ht(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ft(t){return"IndexedDbTransactionError"===t.name}class dt{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ie(t),this.se=t=>e.writeSequenceNumber(t))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}function pt(t){return null==t}function gt(t){return 0===t&&1/t==-1/0}function mt(t){return"number"==typeof t&&Number.isInteger(t)&&!gt(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}dt.oe=-1;const yt=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vt=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_t=vt,wt=[..._t,"indexConfiguration","indexState","indexEntries"];function bt(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function St(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Et(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Tt{constructor(t,e){this.comparator=t,this.root=e||kt.EMPTY}insert(t,e){return new Tt(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(t){return new Tt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,kt.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push("".concat(e,":").concat(n)),!1))),"{".concat(t.join(", "),"}")}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Dt(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Dt(this.root,t,this.comparator,!1)}getReverseIterator(){return new Dt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Dt(this.root,t,this.comparator,!0)}}class Dt{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,e&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class kt{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:kt.RED,this.left=null!=r?r:kt.EMPTY,this.right=null!=i?i:kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new kt(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return kt.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw M();if(this.right.isRed())throw M();const t=this.left.check();if(t!==this.right.check())throw M();return t+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1,kt.EMPTY=new class{constructor(){this.size=0}get key(){throw M()}get value(){throw M()}get color(){throw M()}get left(){throw M()}get right(){throw M()}copy(t,e,n,r,i){return this}insert(t,e,n){return new kt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class It{constructor(t){this.comparator=t,this.data=new Tt(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Ct(this.data.getIterator())}getIteratorFrom(t){return new Ct(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof It))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new It(this.comparator);return e.data=t,e}}class Ct{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class At{constructor(t){this.fields=t,t.sort(tt.comparator)}static empty(){return new At([])}unionWith(t){let e=new It(tt.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new At(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return K(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Nt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mt{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Nt("Invalid base64 string: "+t):t}}(t);return new Mt(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Mt(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return H(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const xt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ot(t){if(x(!!t),"string"==typeof t){let e=0;const n=xt.exec(t);if(x(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rt(t.seconds),nanos:Rt(t.nanos)}}function Rt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Lt(t){return"string"==typeof t?Mt.fromBase64String(t):Mt.fromUint8Array(t)}function Pt(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ft(t){const e=t.mapValue.fields.__previous_value__;return Pt(e)?Ft(e):e}function Vt(t){const e=Ot(t.mapValue.fields.__local_write_time__.timestampValue);return new Q(e.seconds,e.nanos)}class Ut{constructor(t,e,n,r,i,s,o,a,u){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=u}}class jt{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new jt("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof jt&&t.projectId===this.projectId&&t.database===this.database}}const Bt={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Yt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Pt(t)?4:ie(t)?9007199254740991:ne(t)?10:11:M()}function qt(t,e){if(t===e)return!0;const n=Yt(t);if(n!==Yt(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vt(t).isEqual(Vt(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Ot(t.timestampValue),r=Ot(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Lt(t.bytesValue).isEqual(Lt(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Rt(t.geoPointValue.latitude)===Rt(e.geoPointValue.latitude)&&Rt(t.geoPointValue.longitude)===Rt(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Rt(t.integerValue)===Rt(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Rt(t.doubleValue),r=Rt(e.doubleValue);return n===r?gt(n)===gt(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return K(t.arrayValue.values||[],e.arrayValue.values||[],qt);case 10:case 11:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(bt(n)!==bt(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!qt(n[i],r[i])))return!1;return!0}(t,e);default:return M()}}function zt(t,e){return void 0!==(t.values||[]).find((t=>qt(t,e)))}function Wt(t,e){if(t===e)return 0;const n=Yt(t),r=Yt(e);if(n!==r)return H(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return H(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Rt(t.integerValue||t.doubleValue),r=Rt(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Gt(t.timestampValue,e.timestampValue);case 4:return Gt(Vt(t),Vt(e));case 5:return H(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Lt(t),r=Lt(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let i=0;i<n.length&&i<r.length;i++){const t=H(n[i],r[i]);if(0!==t)return t}return H(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=H(Rt(t.latitude),Rt(e.latitude));return 0!==n?n:H(Rt(t.longitude),Rt(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ht(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n,r,i,s;const o=t.fields||{},a=e.fields||{},u=null===(n=o.value)||void 0===n?void 0:n.arrayValue,c=null===(r=a.value)||void 0===r?void 0:r.arrayValue,l=H((null===(i=null==u?void 0:u.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==l?l:Ht(u,c)}(t.mapValue,e.mapValue);case 11:return function(t,e){if(t===Bt.mapValue&&e===Bt.mapValue)return 0;if(t===Bt.mapValue)return 1;if(e===Bt.mapValue)return-1;const n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const t=H(r[o],s[o]);if(0!==t)return t;const e=Wt(n[r[o]],i[s[o]]);if(0!==e)return e}return H(r.length,s.length)}(t.mapValue,e.mapValue);default:throw M()}}function Gt(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return H(t,e);const n=Ot(t),r=Ot(e),i=H(n.seconds,r.seconds);return 0!==i?i:H(n.nanos,r.nanos)}function Ht(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const t=Wt(n[i],r[i]);if(t)return t}return H(n.length,r.length)}function Kt(t){return Qt(t)}function Qt(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Ot(t);return"time(".concat(e.seconds,",").concat(e.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Lt(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return et.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return"geo(".concat(t.latitude,",").concat(t.longitude,")")}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=Qt(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+="".concat(i,":").concat(Qt(t.fields[i]));return n+"}"}(t.mapValue):M()}function Xt(t,e){return{referenceValue:"projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e.path.canonicalString())}}function Jt(t){return!!t&&"integerValue"in t}function $t(t){return!!t&&"arrayValue"in t}function Zt(t){return!!t&&"nullValue"in t}function te(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ee(t){return!!t&&"mapValue"in t}function ne(t){var e,n;return"__vector__"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function re(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return St(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=re(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=re(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ie(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class se{constructor(t){this.value=t}static empty(){return new se({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!ee(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=re(e)}setAll(t){let e=tt.emptyPath(),n={},r=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=re(t):r.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());ee(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return qt(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];ee(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){St(e,((e,n)=>t[e]=n));for(const r of n)delete t[r]}clone(){return new se(re(this.value))}}function oe(t){const e=[];return St(t.fields,((t,n)=>{const r=new tt([t]);if(ee(n)){const t=oe(n.mapValue).fields;if(0===t.length)e.push(r);else for(const n of t)e.push(r.child(n))}else e.push(r)})),new At(e)}class ae{constructor(t,e,n,r,i,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(t){return new ae(t,0,X.min(),X.min(),X.min(),se.empty(),0)}static newFoundDocument(t,e,n,r){return new ae(t,1,e,X.min(),n,r,0)}static newNoDocument(t,e){return new ae(t,2,e,X.min(),X.min(),se.empty(),0)}static newUnknownDocument(t,e){return new ae(t,3,e,X.min(),X.min(),se.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(X.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=se.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=se.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof ae&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ae(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ue{constructor(t,e){this.position=t,this.inclusive=e}}function ce(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?et.comparator(et.fromName(o.referenceValue),n.key):Wt(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function le(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qt(t.position[n],e.position[n]))return!1;return!0}class he{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=t,this.dir=e}}function fe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class de{}class pe extends de{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Se(t,e,n):"array-contains"===e?new ke(t,n):"in"===e?new Ie(t,n):"not-in"===e?new Ce(t,n):"array-contains-any"===e?new Ae(t,n):new pe(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Ee(t,n):new Te(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Wt(e,this.value)):null!==e&&Yt(this.value)===Yt(e)&&this.matchesComparison(Wt(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return M()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ge extends de{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new ge(t,e)}matches(t){return me(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function me(t){return"and"===t.op}function ye(t){return ve(t)&&me(t)}function ve(t){for(const e of t.filters)if(e instanceof ge)return!1;return!0}function _e(t){if(t instanceof pe)return t.field.canonicalString()+t.op.toString()+Kt(t.value);if(ye(t))return t.filters.map((t=>_e(t))).join(",");{const e=t.filters.map((t=>_e(t))).join(",");return"".concat(t.op,"(").concat(e,")")}}function we(t,e){return t instanceof pe?function(t,e){return e instanceof pe&&t.op===e.op&&t.field.isEqual(e.field)&&qt(t.value,e.value)}(t,e):t instanceof ge?function(t,e){return e instanceof ge&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,r)=>t&&we(n,e.filters[r])),!0)}(t,e):void M()}function be(t){return t instanceof pe?function(t){return"".concat(t.field.canonicalString()," ").concat(t.op," ").concat(Kt(t.value))}(t):t instanceof ge?function(t){return t.op.toString()+" {"+t.getFilters().map(be).join(" ,")+"}"}(t):"Filter"}class Se extends pe{constructor(t,e,n){super(t,e,n),this.key=et.fromName(n.referenceValue)}matches(t){const e=et.comparator(t.key,this.key);return this.matchesComparison(e)}}class Ee extends pe{constructor(t,e){super(t,"in",e),this.keys=De("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Te extends pe{constructor(t,e){super(t,"not-in",e),this.keys=De("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function De(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>et.fromName(t.referenceValue)))}class ke extends pe{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return $t(e)&&zt(e.arrayValue,this.value)}}class Ie extends pe{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&zt(this.value.arrayValue,e)}}class Ce extends pe{constructor(t,e){super(t,"not-in",e)}matches(t){if(zt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!zt(this.value.arrayValue,e)}}class Ae extends pe{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!$t(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>zt(this.value.arrayValue,t)))}}class Ne{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function Me(t){return new Ne(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function xe(t){const e=O(t);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>_e(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),pt(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>Kt(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>Kt(t))).join(",")),e.ue=t}return e.ue}function Oe(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!fe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!we(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!le(t.startAt,e.startAt)&&le(t.endAt,e.endAt)}function Re(t){return et.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Le{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Pe(t,e,n,r,i,s,o,a){return new Le(t,e,n,r,i,s,o,a)}function Fe(t){return new Le(t)}function Ve(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Ue(t){return null!==t.collectionGroup}function je(t){const e=O(t);if(null===e.ce){e.ce=[];const t=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),t.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",r=function(t){let e=new It(tt.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);r.forEach((r=>{t.has(r.canonicalString())||r.isKeyField()||e.ce.push(new he(r,n))})),t.has(tt.keyField().canonicalString())||e.ce.push(new he(tt.keyField(),n))}return e.ce}function Be(t){const e=O(t);return e.le||(e.le=Ye(e,je(t))),e.le}function Ye(t,e){if("F"===t.limitType)return Me(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new he(t.field,e)}));const n=t.endAt?new ue(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ue(t.startAt.position,t.startAt.inclusive):null;return Me(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function qe(t,e){const n=t.filters.concat([e]);return new Le(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ze(t,e,n){return new Le(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function We(t,e){return Oe(Be(t),Be(e))&&t.limitType===e.limitType}function Ge(t){return"".concat(xe(Be(t)),"|lt:").concat(t.limitType)}function He(t){return"Query(target=".concat(function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: [".concat(t.filters.map((t=>be(t))).join(", "),"]")),pt(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: [".concat(t.orderBy.map((t=>function(t){return"".concat(t.field.canonicalString()," (").concat(t.dir,")")}(t))).join(", "),"]")),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>Kt(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>Kt(t))).join(",")),"Target(".concat(e,")")}(Be(t)),"; limitType=").concat(t.limitType,")")}function Ke(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):et.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of je(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const r=ce(t,e,n);return t.inclusive?r<=0:r<0}(t.startAt,je(t),e))&&!(t.endAt&&!function(t,e,n){const r=ce(t,e,n);return t.inclusive?r>=0:r>0}(t.endAt,je(t),e))}(t,e)}function Qe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Xe(t){return(e,n)=>{let r=!1;for(const i of je(t)){const t=Je(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function Je(t,e,n){const r=t.field.isKeyField()?et.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Wt(r,i):M()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return M()}}class $e{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return this.inner[n]=[[t,e]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){St(this.inner,((e,n)=>{for(const[r,i]of n)t(r,i)}))}isEmpty(){return Et(this.inner)}size(){return this.innerSize}}const Ze=new Tt(et.comparator);function tn(){return Ze}const en=new Tt(et.comparator);function nn(){let t=en;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const i of n)t=t.insert(i.key,i);return t}function rn(t){let e=en;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function sn(){return an()}function on(){return an()}function an(){return new $e((t=>t.toString()),((t,e)=>t.isEqual(e)))}const un=new Tt(et.comparator),cn=new It(et.comparator);function ln(){let t=cn;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const i of n)t=t.add(i);return t}const hn=new It(H);function fn(){return hn}function dn(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gt(e)?"-0":e}}function pn(t){return{integerValue:""+t}}function gn(t,e){return mt(e)?pn(e):dn(t,e)}class mn{constructor(){this._=void 0}}function yn(t,e,n){return t instanceof wn?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Pt(e)&&(e=Ft(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof bn?Sn(t,e):t instanceof En?Tn(t,e):function(t,e){const n=_n(t,e),r=kn(n)+kn(t.Pe);return Jt(n)&&Jt(t.Pe)?pn(r):dn(t.serializer,r)}(t,e)}function vn(t,e,n){return t instanceof bn?Sn(t,e):t instanceof En?Tn(t,e):n}function _n(t,e){return t instanceof Dn?function(t){return Jt(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class wn extends mn{}class bn extends mn{constructor(t){super(),this.elements=t}}function Sn(t,e){const n=In(e);for(const r of t.elements)n.some((t=>qt(t,r)))||n.push(r);return{arrayValue:{values:n}}}class En extends mn{constructor(t){super(),this.elements=t}}function Tn(t,e){let n=In(e);for(const r of t.elements)n=n.filter((t=>!qt(t,r)));return{arrayValue:{values:n}}}class Dn extends mn{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function kn(t){return Rt(t.integerValue||t.doubleValue)}function In(t){return $t(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Cn{constructor(t,e){this.version=t,this.transformResults=e}}class An{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new An}static exists(t){return new An(void 0,t)}static updateTime(t){return new An(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Nn(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Mn{}function xn(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Yn(t.key,An.none()):new Fn(t.key,t.data,An.none());{const n=t.data,r=se.empty();let i=new It(tt.comparator);for(let t of e.fields)if(!i.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?r.delete(t):r.set(t,e),i=i.add(t)}return new Vn(t.key,r,new At(i.toArray()),An.none())}}function On(t,e,n){t instanceof Fn?function(t,e,n){const r=t.value.clone(),i=jn(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Vn?function(t,e,n){if(!Nn(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=jn(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Un(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Rn(t,e,n,r){return t instanceof Fn?function(t,e,n,r){if(!Nn(t.precondition,e))return n;const i=t.value.clone(),s=Bn(t.fieldTransforms,r,e);return i.setAll(s),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}(t,e,n,r):t instanceof Vn?function(t,e,n,r){if(!Nn(t.precondition,e))return n;const i=Bn(t.fieldTransforms,r,e),s=e.data;return s.setAll(Un(t)),s.setAll(i),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,r):function(t,e,n){return Nn(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function Ln(t,e){let n=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),i=_n(r.transform,t||null);null!=i&&(null===n&&(n=se.empty()),n.set(r.field,i))}return n||null}function Pn(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&K(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof bn&&e instanceof bn||t instanceof En&&e instanceof En?K(t.elements,e.elements,qt):t instanceof Dn&&e instanceof Dn?qt(t.Pe,e.Pe):t instanceof wn&&e instanceof wn}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fn extends Mn{constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Vn extends Mn{constructor(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Un(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function jn(t,e,n){const r=new Map;x(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,vn(o,a,n[i]))}return r}function Bn(t,e,n){const r=new Map;for(const i of t){const t=i.transform,s=n.data.field(i.field);r.set(i.field,yn(t,s,e))}return r}class Yn extends Mn{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qn extends Mn{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zn{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const e=this.mutations[r];e.key.isEqual(t.key)&&On(e,t,n[r])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Rn(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Rn(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=on();return this.mutations.forEach((r=>{const i=t.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=e.has(r.key)?null:o;const a=xn(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(X.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),ln())}isEqual(t){return this.batchId===t.batchId&&K(this.mutations,t.mutations,((t,e)=>Pn(t,e)))&&K(this.baseMutations,t.baseMutations,((t,e)=>Pn(t,e)))}}class Wn{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){x(t.mutations.length===n.length);let r=un;const i=t.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Wn(t,e,n,r)}}class Gn{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Hn{constructor(t,e){this.count=t,this.unchangedNames=e}}var Kn,Qn;function Xn(t){switch(t){default:return M();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function Jn(t){if(void 0===t)return C("GRPC error has no .code"),R.UNKNOWN;switch(t){case Kn.OK:return R.OK;case Kn.CANCELLED:return R.CANCELLED;case Kn.UNKNOWN:return R.UNKNOWN;case Kn.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Kn.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Kn.INTERNAL:return R.INTERNAL;case Kn.UNAVAILABLE:return R.UNAVAILABLE;case Kn.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Kn.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Kn.NOT_FOUND:return R.NOT_FOUND;case Kn.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Kn.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Kn.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Kn.ABORTED:return R.ABORTED;case Kn.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Kn.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Kn.DATA_LOSS:return R.DATA_LOSS;default:return M()}}(Qn=Kn||(Kn={}))[Qn.OK=0]="OK",Qn[Qn.CANCELLED=1]="CANCELLED",Qn[Qn.UNKNOWN=2]="UNKNOWN",Qn[Qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qn[Qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qn[Qn.NOT_FOUND=5]="NOT_FOUND",Qn[Qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qn[Qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qn[Qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qn[Qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qn[Qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qn[Qn.ABORTED=10]="ABORTED",Qn[Qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qn[Qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qn[Qn.INTERNAL=13]="INTERNAL",Qn[Qn.UNAVAILABLE=14]="UNAVAILABLE",Qn[Qn.DATA_LOSS=15]="DATA_LOSS";let $n=null;function Zn(){return new TextEncoder}const tr=new r([4294967295,4294967295],0);function er(t){const e=Zn().encode(t),n=new i;return n.update(e),new Uint8Array(n.digest())}function nr(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new r([n,i],0),new r([s,o],0)]}class rr{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new ir("Invalid padding: ".concat(e));if(n<0)throw new ir("Invalid hash count: ".concat(n));if(t.length>0&&0===this.hashCount)throw new ir("Invalid hash count: ".concat(n));if(0===t.length&&0!==e)throw new ir("Invalid padding when bitmap length is 0: ".concat(e));this.Ie=8*t.length-e,this.Te=r.fromNumber(this.Ie)}Ee(t,e,n){let i=t.add(e.multiply(r.fromNumber(n)));return 1===i.compare(tr)&&(i=new r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ie)return!1;const e=er(t),[n,r]=nr(e);for(let i=0;i<this.hashCount;i++){const t=this.Ee(n,r,i);if(!this.de(t))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),s=new rr(i,r,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.Ie)return;const e=er(t),[n,r]=nr(e);for(let i=0;i<this.hashCount;i++){const t=this.Ee(n,r,i);this.Ae(t)}}Ae(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class ir extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sr{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,or.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new sr(X.min(),r,new Tt(H),tn(),ln())}}class or{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new or(n,e,ln(),ln(),ln())}}class ar{constructor(t,e,n,r){this.Re=t,this.removedTargetIds=e,this.key=n,this.Ve=r}}class ur{constructor(t,e){this.targetId=t,this.me=e}}class cr{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mt.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class lr{constructor(){this.fe=0,this.ge=dr(),this.pe=Mt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=ln(),e=ln(),n=ln();return this.ge.forEach(((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:M()}})),new or(this.pe,this.ye,t,e,n)}Ce(){this.we=!1,this.ge=dr()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,x(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class hr{constructor(t){this.Le=t,this.Be=new Map,this.ke=tn(),this.qe=fr(),this.Qe=new Tt(H)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,(e=>{const n=this.Ge(e);switch(t.state){case 0:this.ze(e)&&n.De(t.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(t.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(n.Ne(),n.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),n.De(t.resumeToken));break;default:M()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach(((t,n)=>{this.ze(n)&&e(n)}))}He(t){const e=t.targetId,n=t.me.count,r=this.Je(e);if(r){const i=r.target;if(Re(i))if(0===n){const t=new et(i.path);this.Ue(e,t,ae.newNoDocument(t,X.min()))}else x(1===n);else{const r=this.Ye(e);if(r!==n){const n=this.Ze(t),i=n?this.Xe(n,t,r):1;if(0!==i){this.je(e);const t=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,t)}null==$n||$n.et(function(t,e,n,r,i){var s,o,a,u,c,l;const h={localCacheCount:t,existenceFilterCount:e.count,databaseId:n.database,projectId:n.projectId},f=e.unchangedNames;return f&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==f?void 0:f.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(u=null===(a=null===(o=null==f?void 0:f.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==u?u:0,padding:null!==(l=null===(c=null==f?void 0:f.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:t=>{var e;return null!==(e=null==r?void 0:r.mightContain(t))&&void 0!==e&&e}}),h}(r,t.me,this.Le.tt(),n,i))}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=e;let s,o;try{s=Lt(n).toUint8Array()}catch(t){if(t instanceof Nt)return A("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{o=new rr(s,r,i)}catch(t){return A(t instanceof ir?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===o.Ie?null:o}Xe(t,e,n){return e.me.count===n-this.nt(t,e.targetId)?0:2}nt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());t.mightContain(s)||(this.Ue(e,n,null),r++)})),r}rt(t){const e=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Re(i.target)){const e=new et(i.target.path);null!==this.ke.get(e)||this.it(r,e)||this.Ue(r,e,ae.newNoDocument(e,t))}n.be&&(e.set(r,n.ve()),n.Ce())}}));let n=ln();this.qe.forEach(((t,e)=>{let r=!0;e.forEachWhile((t=>{const e=this.Je(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(r=!1,!1)})),r&&(n=n.add(t))})),this.ke.forEach(((e,n)=>n.setReadTime(t)));const r=new sr(t,e,this.Qe,this.ke,n);return this.ke=tn(),this.qe=fr(),this.Qe=new Tt(H),r}$e(t,e){if(!this.ze(t))return;const n=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,n),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,n){if(!this.ze(t))return;const r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),n&&(this.ke=this.ke.insert(e,n))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new lr,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new It(H),this.qe=this.qe.insert(t,e)),e}ze(t){const e=null!==this.Je(t);return e||I("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new lr),this.Le.getRemoteKeysForTarget(t).forEach((e=>{this.Ue(t,e,null)}))}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function fr(){return new Tt(et.comparator)}function dr(){return new Tt(et.comparator)}const pr={asc:"ASCENDING",desc:"DESCENDING"},gr={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mr={and:"AND",or:"OR"};class yr{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function vr(t,e){return t.useProto3Json||pt(e)?e:{value:e}}function _r(t,e){return t.useProto3Json?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function wr(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function br(t,e){return _r(t,e.toTimestamp())}function Sr(t){return x(!!t),X.fromTimestamp(function(t){const e=Ot(t);return new Q(e.seconds,e.nanos)}(t))}function Er(t,e){return Tr(t,e).canonicalString()}function Tr(t,e){const n=function(t){return new $(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function Dr(t){const e=$.fromString(t);return x(Wr(e)),e}function kr(t,e){return Er(t.databaseId,e.path)}function Ir(t,e){const n=Dr(e);if(n.get(1)!==t.databaseId.projectId)throw new L(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new et(Mr(n))}function Cr(t,e){return Er(t.databaseId,e)}function Ar(t){const e=Dr(t);return 4===e.length?$.emptyPath():Mr(e)}function Nr(t){return new $(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Mr(t){return x(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function xr(t,e,n){return{name:kr(t,e),fields:n.value.mapValue.fields}}function Or(t,e){let n;if(e instanceof Fn)n={update:xr(t,e.key,e.value)};else if(e instanceof Yn)n={delete:kr(t,e.key)};else if(e instanceof Vn)n={update:xr(t,e.key,e.data),updateMask:zr(e.fieldMask)};else{if(!(e instanceof qn))return M();n={verify:kr(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof wn)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof bn)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof En)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Dn)return{fieldPath:e.field.canonicalString(),increment:n.Pe};throw M()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:br(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:M()}(t,e.precondition)),n}function Rr(t,e){return{documents:[Cr(t,e.path)]}}function Lr(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Cr(t,i);const s=function(t){if(0!==t.length)return qr(ge.create(t,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:Br(t.field),direction:Vr(t.dir)}}(t)))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=vr(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{_t:n,parent:i}}function Pr(t){let e=Ar(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){x(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=Fr(t);return e instanceof ge&&ye(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new he(Yr(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,pt(e)?null:e}(n.limit));let u=null;n.startAt&&(u=function(t){const e=!!t.before,n=t.values||[];return new ue(n,e)}(n.startAt));let c=null;return n.endAt&&(c=function(t){const e=!t.before,n=t.values||[];return new ue(n,e)}(n.endAt)),Pe(e,i,o,s,a,"F",u,c)}function Fr(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Yr(t.unaryFilter.field);return pe.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Yr(t.unaryFilter.field);return pe.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Yr(t.unaryFilter.field);return pe.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Yr(t.unaryFilter.field);return pe.create(i,"!=",{nullValue:"NULL_VALUE"});default:return M()}}(t):void 0!==t.fieldFilter?function(t){return pe.create(Yr(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return M()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return ge.create(t.compositeFilter.filters.map((t=>Fr(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return M()}}(t.compositeFilter.op))}(t):M()}function Vr(t){return pr[t]}function Ur(t){return gr[t]}function jr(t){return mr[t]}function Br(t){return{fieldPath:t.canonicalString()}}function Yr(t){return tt.fromServerFormat(t.fieldPath)}function qr(t){return t instanceof pe?function(t){if("=="===t.op){if(te(t.value))return{unaryFilter:{field:Br(t.field),op:"IS_NAN"}};if(Zt(t.value))return{unaryFilter:{field:Br(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(te(t.value))return{unaryFilter:{field:Br(t.field),op:"IS_NOT_NAN"}};if(Zt(t.value))return{unaryFilter:{field:Br(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Br(t.field),op:Ur(t.op),value:t.value}}}(t):t instanceof ge?function(t){const e=t.getFilters().map((t=>qr(t)));return 1===e.length?e[0]:{compositeFilter:{op:jr(t.op),filters:e}}}(t):M()}function zr(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Wr(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Gr{constructor(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:X.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:X.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Mt.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new Gr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class Hr{constructor(t){this.ct=t}}function Kr(t){const e=Pr({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ze(e,e.limit,"L"):e}class Qr{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(Rt(t.integerValue));else if("doubleValue"in t){const n=Rt(t.doubleValue);isNaN(n)?this.dt(e,13):(this.dt(e,15),gt(n)?e.At(0):e.At(n))}else if("timestampValue"in t){let n=t.timestampValue;this.dt(e,20),"string"==typeof n&&(n=Ot(n)),e.Rt("".concat(n.seconds||"")),e.At(n.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(Lt(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.dt(e,45),e.At(n.latitude||0),e.At(n.longitude||0)}else"mapValue"in t?ie(t)?this.dt(e,Number.MAX_SAFE_INTEGER):ne(t)?this.wt(t.mapValue,e):(this.St(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.ft(e)):M()}Vt(t,e){this.dt(e,25),this.Dt(t,e)}Dt(t,e){e.Rt(t)}St(t,e){const n=t.fields||{};this.dt(e,55);for(const r of Object.keys(n))this.Vt(r,e),this.Tt(n[r],e)}wt(t,e){var n,r;const i=t.fields||{};this.dt(e,53);const s="value",o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(e,15),e.At(Rt(o)),this.Vt(s,e),this.Tt(i[s],e)}bt(t,e){const n=t.values||[];this.dt(e,50);for(const r of n)this.Tt(r,e)}yt(t,e){this.dt(e,37),et.fromName(t).path.forEach((t=>{this.dt(e,60),this.Dt(t,e)}))}dt(t,e){t.At(e)}ft(t){t.At(2)}}Qr.vt=new Qr;class Xr{constructor(){this.un=new Jr}addToCollectionParentIndex(t,e){return this.un.add(e),lt.resolve()}getCollectionParents(t,e){return lt.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return lt.resolve()}deleteFieldIndex(t,e){return lt.resolve()}deleteAllFieldIndexes(t){return lt.resolve()}createTargetIndexes(t,e){return lt.resolve()}getDocumentsMatchingTarget(t,e){return lt.resolve(null)}getIndexType(t,e){return lt.resolve(0)}getFieldIndexes(t,e){return lt.resolve([])}getNextCollectionGroupToUpdate(t){return lt.resolve(null)}getMinOffset(t,e){return lt.resolve(st.min())}getMinOffsetFromCollectionGroup(t,e){return lt.resolve(st.min())}updateCollectionGroup(t,e,n){return lt.resolve()}updateIndexEntries(t,e){return lt.resolve()}}class Jr{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new It($.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new It($.comparator)).toArray()}}new Uint8Array(0);class $r{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new $r(t,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}$r.DEFAULT_COLLECTION_PERCENTILE=10,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$r.DEFAULT=new $r(41943040,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$r.DISABLED=new $r(-1,0,0);class Zr{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new Zr(0)}static kn(){return new Zr(-1)}}class ti{constructor(){this.changes=new $e((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ae.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?lt.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class ei{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class ni{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(n=r,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&Rn(n.mutation,t,At.empty(),Q.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,ln()).next((()=>e))))}getLocalViewOfDocuments(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ln();const r=sn();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,n).next((t=>{let e=nn();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=sn();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,ln())))}populateOverlays(t,e,n){const r=[];return n.forEach((t=>{e.has(t)||r.push(t)})),this.documentOverlayCache.getOverlays(t,r).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,r){let i=tn();const s=an(),o=an();return e.forEach(((t,e)=>{const o=n.get(e.key);r.has(e.key)&&(void 0===o||o.mutation instanceof Vn)?i=i.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),Rn(o.mutation,e,o.mutation.getFieldMask(),Q.now())):s.set(e.key,At.empty())})),this.recalculateAndSaveOverlays(t,i).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new ei(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=an();let r=new Tt(((t,e)=>t-e)),i=ln();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const i of t)i.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||At.empty();o=i.applyToLocalView(s,o),n.set(t,o);const a=(r.get(i.batchId)||ln()).add(t);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,u=r.value,c=on();u.forEach((t=>{if(!i.has(t)){const r=xn(e.get(t),n.get(t));null!==r&&c.set(t,r),i=i.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,c))}return lt.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,r){return function(t){return et.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Ue(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-i.size):lt.resolve(sn());let o=-1,a=i;return s.next((e=>lt.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(e)?lt.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,i))).next((()=>this.computeViews(t,a,e,ln()))).next((t=>({batchId:o,changes:rn(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new et(e)).next((t=>{let e=nn();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const i=e.collectionGroup;let s=nn();return this.indexManager.getCollectionParents(t,i).next((o=>lt.forEach(o,(o=>{const a=function(t,e){return new Le(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return this.getDocumentsMatchingCollectionQuery(t,a,n,r).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,i,r)))).next((t=>{i.forEach(((e,n)=>{const r=n.getKey();null===t.get(r)&&(t=t.insert(r,ae.newInvalidDocument(r)))}));let n=nn();return t.forEach(((t,r)=>{const s=i.get(t);void 0!==s&&Rn(s.mutation,r,At.empty(),Q.now()),Ke(e,r)&&(n=n.insert(t,r))})),n}))}}class ri{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return lt.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:Sr(t.createTime)}}(e)),lt.resolve()}getNamedQuery(t,e){return lt.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,function(t){return{name:t.name,query:Kr(t.bundledQuery),readTime:Sr(t.readTime)}}(e)),lt.resolve()}}class ii{constructor(){this.overlays=new Tt(et.comparator),this.Ir=new Map}getOverlay(t,e){return lt.resolve(this.overlays.get(e))}getOverlays(t,e){const n=sn();return lt.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,r)=>{this.ht(t,e,r)})),lt.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach((t=>this.overlays=this.overlays.remove(t))),this.Ir.delete(n)),lt.resolve()}getOverlaysForCollection(t,e,n){const r=sn(),i=e.length+1,s=new et(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===i&&t.largestBatchId>n&&r.set(t.getKey(),t)}return lt.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let i=new Tt(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=i.get(t.largestBatchId);null===e&&(e=sn(),i=i.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=sn(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=r)););return lt.resolve(o)}ht(t,e,n){const r=this.overlays.get(n.key);if(null!==r){const t=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new Gn(e,n));let i=this.Ir.get(e);void 0===i&&(i=ln(),this.Ir.set(e,i)),this.Ir.set(e,i.add(n.key))}}class si{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(t){return lt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,lt.resolve()}}class oi{constructor(){this.Tr=new It(ai.Er),this.dr=new It(ai.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){const n=new ai(t,e);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Vr(new ai(t,e))}mr(t,e){t.forEach((t=>this.removeReference(t,e)))}gr(t){const e=new et(new $([])),n=new ai(e,t),r=new ai(e,t+1),i=[];return this.dr.forEachInRange([n,r],(t=>{this.Vr(t),i.push(t.key)})),i}pr(){this.Tr.forEach((t=>this.Vr(t)))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const e=new et(new $([])),n=new ai(e,t),r=new ai(e,t+1);let i=ln();return this.dr.forEachInRange([n,r],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new ai(t,0),n=this.Tr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class ai{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return et.comparator(t.key,e.key)||H(t.wr,e.wr)}static Ar(t,e){return H(t.wr,e.wr)||et.comparator(t.key,e.key)}}class ui{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new It(ai.Er)}checkEmpty(t){return lt.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new zn(i,e,n,r);this.mutationQueue.push(s);for(const o of r)this.br=this.br.add(new ai(o.key,i)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return lt.resolve(s)}lookupMutationBatch(t,e){return lt.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.vr(n),i=r<0?0:r;return lt.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return lt.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(t){return lt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new ai(e,0),r=new ai(e,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],(t=>{const e=this.Dr(t.wr);i.push(e)})),lt.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new It(H);return e.forEach((t=>{const e=new ai(t,0),r=new ai(t,Number.POSITIVE_INFINITY);this.br.forEachInRange([e,r],(t=>{n=n.add(t.wr)}))})),lt.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;et.isDocumentKey(i)||(i=i.child(""));const s=new ai(new et(i),0);let o=new It(H);return this.br.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.wr)),!0)}),s),lt.resolve(this.Cr(o))}Cr(t){const e=[];return t.forEach((t=>{const n=this.Dr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){x(0===this.Fr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return lt.forEach(e.mutations,(r=>{const i=new ai(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.br=n}))}On(t){}containsKey(t,e){const n=new ai(e,0),r=this.br.firstAfterOrEqual(n);return lt.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,lt.resolve()}Fr(t,e){return this.vr(t)}vr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Dr(t){const e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class ci{constructor(t){this.Mr=t,this.docs=new Tt(et.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return lt.resolve(n?n.document.mutableCopy():ae.newInvalidDocument(e))}getEntries(t,e){let n=tn();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():ae.newInvalidDocument(t))})),lt.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let i=tn();const s=e.path,o=new et(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||ot(it(o),n)<=0||(r.has(o.key)||Ke(e,o))&&(i=i.insert(o.key,o.mutableCopy()))}return lt.resolve(i)}getAllFromCollectionGroup(t,e,n,r){M()}Or(t,e){return lt.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new li(this)}getSize(t){return lt.resolve(this.size)}}class li extends ti{constructor(t){super(),this.cr=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?e.push(this.cr.addEntry(t,r)):this.cr.removeEntry(n)})),lt.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}}class hi{constructor(t){this.persistence=t,this.Nr=new $e((t=>xe(t)),Oe),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new oi,this.targetCount=0,this.kr=Zr.Bn()}forEachTarget(t,e){return this.Nr.forEach(((t,n)=>e(n))),lt.resolve()}getLastRemoteSnapshotVersion(t){return lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return lt.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),lt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Lr&&(this.Lr=e),lt.resolve()}Kn(t){this.Nr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.kr=new Zr(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,lt.resolve()}updateTargetData(t,e){return this.Kn(e),lt.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,lt.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.Nr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)})),lt.waitFor(i).next((()=>r))}getTargetCount(t){return lt.resolve(this.targetCount)}getTargetData(t,e){const n=this.Nr.get(e)||null;return lt.resolve(n)}addMatchingKeys(t,e,n){return this.Br.Rr(e,n),lt.resolve()}removeMatchingKeys(t,e,n){this.Br.mr(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((e=>{i.push(r.markPotentiallyOrphaned(t,e))})),lt.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),lt.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Br.yr(e);return lt.resolve(n)}containsKey(t,e){return lt.resolve(this.Br.containsKey(e))}}class fi{constructor(t,e){this.qr={},this.overlays={},this.Qr=new dt(0),this.Kr=!1,this.Kr=!0,this.$r=new si,this.referenceDelegate=t(this),this.Ur=new hi(this),this.indexManager=new Xr,this.remoteDocumentCache=function(t){return new ci(t)}((t=>this.referenceDelegate.Wr(t))),this.serializer=new Hr(e),this.Gr=new ri(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new ii,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.qr[t.toKey()];return n||(n=new ui(e,this.referenceDelegate),this.qr[t.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,n){I("MemoryPersistence","Starting transaction:",t);const r=new di(this.Qr.next());return this.referenceDelegate.zr(),n(r).next((t=>this.referenceDelegate.jr(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}Hr(t,e){return lt.or(Object.values(this.qr).map((n=>()=>n.containsKey(t,e))))}}class di extends ut{constructor(t){super(),this.currentSequenceNumber=t}}class pi{constructor(t){this.persistence=t,this.Jr=new oi,this.Yr=null}static Zr(t){return new pi(t)}get Xr(){if(this.Yr)return this.Yr;throw M()}addReference(t,e,n){return this.Jr.addReference(n,e),this.Xr.delete(n.toString()),lt.resolve()}removeReference(t,e,n){return this.Jr.removeReference(n,e),this.Xr.add(n.toString()),lt.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),lt.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach((t=>this.Xr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Xr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}zr(){this.Yr=new Set}jr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lt.forEach(this.Xr,(n=>{const r=et.fromPath(n);return this.ei(t,r).next((t=>{t||e.removeEntry(r,X.min())}))})).next((()=>(this.Yr=null,e.apply(t))))}updateLimboDocument(t,e){return this.ei(t,e).next((t=>{t?this.Xr.delete(e.toString()):this.Xr.add(e.toString())}))}Wr(t){return 0}ei(t,e){return lt.or([()=>lt.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}}class gi{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.$i=n,this.Ui=r}static Wi(t,e){let n=ln(),r=ln();for(const i of e.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new gi(t,e.fromCache,n,r)}}class mi{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class yi{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,u.nr)()?8:ht((0,u.ZQ)())>0?6:4}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,n,r){const i={result:null};return this.Yi(t,e).next((t=>{i.result=t})).next((()=>{if(!i.result)return this.Zi(t,e,r,n).next((t=>{i.result=t}))})).next((()=>{if(i.result)return;const n=new mi;return this.Xi(t,e,n).next((r=>{if(i.result=r,this.zi)return this.es(t,e,n,r.size)}))})).next((()=>i.result))}es(t,e,n,r){return n.documentReadCount<this.ji?(k()<=a.$b.DEBUG&&I("QueryEngine","SDK will not create cache indexes for query:",He(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),lt.resolve()):(k()<=a.$b.DEBUG&&I("QueryEngine","Query:",He(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(k()<=a.$b.DEBUG&&I("QueryEngine","The SDK decides to create cache indexes for query:",He(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Be(e))):lt.resolve())}Yi(t,e){if(Ve(e))return lt.resolve(null);let n=Be(e);return this.indexManager.getIndexType(t,n).next((r=>0===r?null:(null!==e.limit&&1===r&&(e=ze(e,null,"F"),n=Be(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((r=>{const i=ln(...r);return this.Ji.getDocuments(t,i).next((r=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.ts(e,r);return this.ns(e,s,i,n.readTime)?this.Yi(t,ze(e,null,"F")):this.rs(t,s,e,n)}))))})))))}Zi(t,e,n,r){return Ve(e)||r.isEqual(X.min())?lt.resolve(null):this.Ji.getDocuments(t,n).next((i=>{const s=this.ts(e,i);return this.ns(e,s,n,r)?lt.resolve(null):(k()<=a.$b.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),He(e)),this.rs(t,s,e,rt(r,-1)).next((t=>t)))}))}ts(t,e){let n=new It(Xe(t));return e.forEach(((e,r)=>{Ke(t,r)&&(n=n.add(r))})),n}ns(t,e,n,r){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const i="F"===t.limitType?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(t,e,n){return k()<=a.$b.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",He(e)),this.Ji.getDocumentsMatchingQuery(t,e,st.min(),n)}rs(t,e,n,r){return this.Ji.getDocumentsMatchingQuery(t,n,r).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class vi{constructor(t,e,n,r){this.persistence=t,this.ss=e,this.serializer=r,this.os=new Tt(H),this._s=new $e((t=>xe(t)),Oe),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(n)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ni(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.os)))}}function _i(t,e,n,r){return new vi(t,e,n,r)}async function wi(t,e){const n=O(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let r;return n.mutationQueue.getAllMutationBatches(t).next((i=>(r=i,n.ls(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const i=[],s=[];let o=ln();for(const t of r){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({hs:t,removedBatchIds:i,addedBatchIds:s})))}))}))}function bi(t){const e=O(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function Si(t,e,n){let r=ln(),i=ln();return n.forEach((t=>r=r.add(t))),e.getEntries(t,r).next((t=>{let r=tn();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(X.min())?(e.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),r=r.insert(n,s)):I("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Ps:r,Is:i}}))}function Ei(t,e){const n=O(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}function Ti(t,e){const n=O(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let r;return n.Ur.getTargetData(t,e).next((i=>i?(r=i,lt.resolve(r)):n.Ur.allocateTargetId(t).next((i=>(r=new Gr(e,i,"TargetPurposeListen",t.currentSequenceNumber),n.Ur.addTargetData(t,r).next((()=>r)))))))})).then((t=>{const r=n.os.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(t.targetId,t),n._s.set(e,t.targetId)),t}))}async function Di(t,e,n){const r=O(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(t=>r.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!ft(t))throw t;I("LocalStore","Failed to update sequence numbers for target ".concat(e,": ").concat(t))}r.os=r.os.remove(e),r._s.delete(i.target)}function ki(t,e,n){const r=O(t);let i=X.min(),s=ln();return r.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const r=O(t),i=r._s.get(n);return void 0!==i?lt.resolve(r.os.get(i)):r.Ur.getTargetData(e,n)}(r,t,Be(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>r.ss.getDocumentsMatchingQuery(t,e,n?i:X.min(),n?s:ln()))).next((t=>(Ii(r,Qe(e),t),{documents:t,Ts:s})))))}function Ii(t,e,n){let r=t.us.get(e)||X.min();n.forEach(((t,e)=>{e.readTime.compareTo(r)>0&&(r=e.readTime)})),t.us.set(e,r)}class Ci{constructor(){this.activeTargetIds=fn()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Ai{constructor(){this.so=new Ci,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,n){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new Ci,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Ni{_o(t){}shutdown(){}}class Mi{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let xi=null;function Oi(){return null===xi?xi=268435456+Math.round(2147483648*Math.random()):xi++,"0x"+xi.toString(16)}const Ri={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Li{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}const Pi="WebChannelConnection";class Fi extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=e+"://"+t.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(t,e,n,r,i){const s=Oi(),o=this.xo(t,e.toUriEncodedString());I("RestConnection","Sending RPC '".concat(t,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,r,i),this.No(t,o,a,n).then((e=>(I("RestConnection","Received RPC '".concat(t,"' ").concat(s,": "),e),e)),(e=>{throw A("RestConnection","RPC '".concat(t,"' ").concat(s," failed with error: "),e,"url: ",o,"request:",n),e}))}Lo(t,e,n,r,i,s){return this.Mo(t,e,n,r,i)}Oo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+T,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}xo(t,e){const n=Ri[t];return"".concat(this.Do,"/v1/").concat(e,":").concat(n)}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,n,r){const i=Oi();return new Promise(((s,o)=>{const a=new h;a.setWithCredentials(!0),a.listenOnce(p.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case g.NO_ERROR:const e=a.getResponseJson();I(Pi,"XHR for RPC '".concat(t,"' ").concat(i," received:"),JSON.stringify(e)),s(e);break;case g.TIMEOUT:I(Pi,"RPC '".concat(t,"' ").concat(i," timed out")),o(new L(R.DEADLINE_EXCEEDED,"Request time out"));break;case g.HTTP_ERROR:const n=a.getStatus();if(I(Pi,"RPC '".concat(t,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(e)>=0?e:R.UNKNOWN}(e.status);o(new L(t,e.message))}else o(new L(R.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new L(R.UNAVAILABLE,"Connection failed."));break;default:M()}}finally{I(Pi,"RPC '".concat(t,"' ").concat(i," completed."))}}));const u=JSON.stringify(r);I(Pi,"RPC '".concat(t,"' ").concat(i," sending request:"),r),a.send(e,"POST",u,n,15)}))}Bo(t,e,n){const r=Oi(),i=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=_(),o=v(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(a.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(a.xmlHttpFactory=new f({})),this.Oo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const c=i.join("");I(Pi,"Creating RPC '".concat(t,"' stream ").concat(r,": ").concat(c),a);const l=s.createWebChannel(c,a);let h=!1,p=!1;const g=new Li({Io:e=>{p?I(Pi,"Not sending because RPC '".concat(t,"' stream ").concat(r," is closed:"),e):(h||(I(Pi,"Opening RPC '".concat(t,"' stream ").concat(r," transport.")),l.open(),h=!0),I(Pi,"RPC '".concat(t,"' stream ").concat(r," sending:"),e),l.send(e))},To:()=>l.close()}),w=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return w(l,d.EventType.OPEN,(()=>{p||(I(Pi,"RPC '".concat(t,"' stream ").concat(r," transport opened.")),g.yo())})),w(l,d.EventType.CLOSE,(()=>{p||(p=!0,I(Pi,"RPC '".concat(t,"' stream ").concat(r," transport closed")),g.So())})),w(l,d.EventType.ERROR,(e=>{p||(p=!0,A(Pi,"RPC '".concat(t,"' stream ").concat(r," transport errored:"),e),g.So(new L(R.UNAVAILABLE,"The operation could not be completed")))})),w(l,d.EventType.MESSAGE,(e=>{var n;if(!p){const i=e.data[0];x(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){I(Pi,"RPC '".concat(t,"' stream ").concat(r," received error:"),o);const e=o.status;let n=function(t){const e=Kn[t];if(void 0!==e)return Jn(e)}(e),i=o.message;void 0===n&&(n=R.INTERNAL,i="Unknown error status: "+e+" with message "+o.message),p=!0,g.So(new L(n,i)),l.close()}else I(Pi,"RPC '".concat(t,"' stream ").concat(r," received:"),i),g.bo(i)}})),w(o,y.STAT_EVENT,(e=>{e.stat===m.PROXY?I(Pi,"RPC '".concat(t,"' stream ").concat(r," detected buffering proxy")):e.stat===m.NOPROXY&&I(Pi,"RPC '".concat(t,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{g.wo()}),0),g}}function Vi(){return"undefined"!=typeof document?document:null}function Ui(t){return new yr(t,!0)}class ji{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=t,this.timerId=e,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const e=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,e-n);r>0&&I("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(e," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),t()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Bi{constructor(t,e,n,r,i,s,o,a){this.ui=t,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ji(t,e)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,e){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==t?this.t_.reset():e&&e.code===R.RESOURCE_EXHAUSTED?(C(e.toString()),C("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===R.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(e)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((t=>{let[n,r]=t;this.Yo===e&&this.P_(n,r)}),(e=>{t((()=>{const t=new L(R.UNKNOWN,"Fetching auth token failed: "+e.message);return this.I_(t)}))}))}P_(t,e){const n=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((t=>{n((()=>this.I_(t)))})),this.stream.onMessage((t=>{n((()=>1==++this.e_?this.E_(t):this.onNext(t)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(t){return I("PersistentStream","close with error: ".concat(t)),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget((()=>this.Yo===t?e():(I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Yi extends Bi{constructor(t,e,n,r,i,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,s),this.serializer=i}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:M()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(x(void 0===e||"string"==typeof e),Mt.fromBase64String(e||"")):(x(void 0===e||e instanceof Buffer||e instanceof Uint8Array),Mt.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?R.UNKNOWN:Jn(t.code);return new L(e,t.message||"")}(o);n=new cr(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ir(t,r.document.name),s=Sr(r.document.updateTime),o=r.document.createTime?Sr(r.document.createTime):X.min(),a=new se({mapValue:{fields:r.document.fields}}),u=ae.newFoundDocument(i,s,o,a),c=r.targetIds||[],l=r.removedTargetIds||[];n=new ar(c,l,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ir(t,r.document),s=r.readTime?Sr(r.readTime):X.min(),o=ae.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ar([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ir(t,r.document),s=r.removedTargetIds||[];n=new ar([],s,i,null)}else{if(!("filter"in e))return M();{e.filter;const t=e.filter;t.targetId;const{count:r=0,unchangedNames:i}=t,s=new Hn(r,i),o=t.targetId;n=new ur(o,s)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return X.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?X.min():e.readTime?Sr(e.readTime):X.min()}(t);return this.listener.d_(e,n)}A_(t){const e={};e.database=Nr(this.serializer),e.addTarget=function(t,e){let n;const r=e.target;if(n=Re(r)?{documents:Rr(t,r)}:{query:Lr(t,r)._t},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=wr(t,e.resumeToken);const r=vr(t,e.expectedCount);null!==r&&(n.expectedCount=r)}else if(e.snapshotVersion.compareTo(X.min())>0){n.readTime=_r(t,e.snapshotVersion.toTimestamp());const r=vr(t,e.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return M()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.a_(e)}R_(t){const e={};e.database=Nr(this.serializer),e.removeTarget=t,this.a_(e)}}class qi extends Bi{constructor(t,e,n,r,i,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return x(!!t.streamToken),this.lastStreamToken=t.streamToken,x(!t.writeResults||0===t.writeResults.length),this.listener.f_()}onNext(t){x(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const e=function(t,e){return t&&t.length>0?(x(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Sr(t.updateTime):Sr(e);return n.isEqual(X.min())&&(n=Sr(e)),new Cn(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=Sr(t.commitTime);return this.listener.g_(n,e)}p_(){const t={};t.database=Nr(this.serializer),this.a_(t)}m_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>Or(this.serializer,t)))};this.a_(e)}}class zi extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new L(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Mo(t,Tr(e,n),r,s,o)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new L(R.UNKNOWN,t.toString())}))}Lo(t,e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Lo(t,Tr(e,n),r,o,a,i)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new L(R.UNKNOWN,t.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Wi{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(t){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(t.toString())),this.C_("Offline")))}set(t){this.x_(),this.S_=0,"Online"===t&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const e="Could not reach Cloud Firestore backend. ".concat(t,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(C(e),this.D_=!1):I("OnlineStateTracker",e)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Gi{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((t=>{n.enqueueAndForget((async()=>{es(this)&&(I("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=O(t);e.L_.add(4),await Ki(e),e.q_.set("Unknown"),e.L_.delete(4),await Hi(e)}(this))}))})),this.q_=new Wi(n,r)}}async function Hi(t){if(es(t))for(const e of t.B_)await e(!0)}async function Ki(t){for(const e of t.B_)await e(!1)}function Qi(t,e){const n=O(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ts(n)?Zi(n):ws(n).r_()&&Ji(n,e))}function Xi(t,e){const n=O(t),r=ws(n);n.N_.delete(e),r.r_()&&$i(n,e),0===n.N_.size&&(r.r_()?r.o_():es(n)&&n.q_.set("Unknown"))}function Ji(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ws(t).A_(e)}function $i(t,e){t.Q_.xe(e),ws(t).R_(e)}function Zi(t){t.Q_=new hr({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ws(t).start(),t.q_.v_()}function ts(t){return es(t)&&!ws(t).n_()&&t.N_.size>0}function es(t){return 0===O(t).L_.size}function ns(t){t.Q_=void 0}async function rs(t){t.q_.set("Online")}async function is(t){t.N_.forEach(((e,n)=>{Ji(t,e)}))}async function ss(t,e){ns(t),ts(t)?(t.q_.M_(e),Zi(t)):t.q_.set("Unknown")}async function os(t,e,n){if(t.q_.set("Online"),e instanceof cr&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const r of e.targetIds)t.N_.has(r)&&(await t.remoteSyncer.rejectListen(r,n),t.N_.delete(r),t.Q_.removeTarget(r))}(t,e)}catch(n){I("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await as(t,n)}else if(e instanceof ar?t.Q_.Ke(e):e instanceof ur?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{const e=await bi(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Q_.rt(e);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.N_.get(r);i&&t.N_.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const r=t.N_.get(e);if(!r)return;t.N_.set(e,r.withResumeToken(Mt.EMPTY_BYTE_STRING,r.snapshotVersion)),$i(t,e);const i=new Gr(r.target,e,n,r.sequenceNumber);Ji(t,i)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){I("RemoteStore","Failed to raise snapshot:",e),await as(t,e)}}async function as(t,e,n){if(!ft(e))throw e;t.L_.add(1),await Ki(t),t.q_.set("Offline"),n||(n=()=>bi(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{I("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Hi(t)}))}function us(t,e){return e().catch((n=>as(t,n,e)))}async function cs(t){const e=O(t),n=bs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ls(e);)try{const t=await Ei(e.localStore,r);if(null===t){0===e.O_.length&&n.o_();break}r=t.batchId,hs(e,t)}catch(t){await as(e,t)}fs(e)&&ds(e)}function ls(t){return es(t)&&t.O_.length<10}function hs(t,e){t.O_.push(e);const n=bs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function fs(t){return es(t)&&!bs(t).n_()&&t.O_.length>0}function ds(t){bs(t).start()}async function ps(t){bs(t).p_()}async function gs(t){const e=bs(t);for(const n of t.O_)e.m_(n.mutations)}async function ms(t,e,n){const r=t.O_.shift(),i=Wn.from(r,e,n);await us(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await cs(t)}async function ys(t,e){e&&bs(t).V_&&await async function(t,e){if(function(t){return Xn(t)&&t!==R.ABORTED}(e.code)){const n=t.O_.shift();bs(t).s_(),await us(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await cs(t)}}(t,e),fs(t)&&ds(t)}async function vs(t,e){const n=O(t);n.asyncQueue.verifyOperationInProgress(),I("RemoteStore","RemoteStore received new credentials");const r=es(n);n.L_.add(3),await Ki(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Hi(n)}async function _s(t,e){const n=O(t);e?(n.L_.delete(2),await Hi(n)):e||(n.L_.add(2),await Ki(n),n.q_.set("Unknown"))}function ws(t){return t.K_||(t.K_=function(t,e,n){const r=O(t);return r.w_(),new Yi(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{Eo:rs.bind(null,t),Ro:is.bind(null,t),mo:ss.bind(null,t),d_:os.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),ts(t)?Zi(t):t.q_.set("Unknown")):(await t.K_.stop(),ns(t))}))),t.K_}function bs(t){return t.U_||(t.U_=function(t,e,n){const r=O(t);return r.w_(),new qi(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ps.bind(null,t),mo:ys.bind(null,t),f_:gs.bind(null,t),g_:ms.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await cs(t)):(await t.U_.stop(),t.O_.length>0&&(I("RemoteStore","Stopping write stream with ".concat(t.O_.length," pending writes")),t.O_=[]))}))),t.U_}class Ss{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new P,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,i){const s=Date.now()+n,o=new Ss(t,e,s,r,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new L(R.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Es(t,e){if(C("AsyncQueue","".concat(e,": ").concat(t)),ft(t))return new L(R.UNAVAILABLE,"".concat(e,": ").concat(t));throw t}class Ts{constructor(t){this.comparator=t?(e,n)=>t(e,n)||et.comparator(e.key,n.key):(t,e)=>et.comparator(t.key,e.key),this.keyedMap=nn(),this.sortedSet=new Tt(this.comparator)}static emptySet(t){return new Ts(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Ts))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Ts;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class Ds{constructor(){this.W_=new Tt(et.comparator)}track(t){const e=t.doc.key,n=this.W_.get(e);n?0!==t.type&&3===n.type?this.W_=this.W_.insert(e,t):3===t.type&&1!==n.type?this.W_=this.W_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.W_=this.W_.remove(e):1===t.type&&2===n.type?this.W_=this.W_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):M():this.W_=this.W_.insert(e,t)}G_(){const t=[];return this.W_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class ks{constructor(t,e,n,r,i,s,o,a,u){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=u}static fromInitialDocuments(t,e,n,r,i){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new ks(t,e,Ts.emptySet(e),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&We(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}class Is{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((t=>t.J_()))}}class Cs{constructor(){this.queries=As(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,e){const n=O(t),r=n.queries;n.queries=As(),r.forEach(((t,n)=>{for(const r of n.j_)r.onError(e)}))}(this,new L(R.ABORTED,"Firestore shutting down"))}}function As(){return new $e((t=>Ge(t)),We)}async function Ns(t,e){const n=O(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Is,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(t){const n=Es(t,"Initialization of query '".concat(He(e.query),"' failed"));return void e.onError(n)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Rs(n)}async function Ms(t,e){const n=O(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const t=s.j_.indexOf(e);t>=0&&(s.j_.splice(t,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xs(t,e){const n=O(t);let r=!1;for(const i of e){const t=i.query,e=n.queries.get(t);if(e){for(const t of e.j_)t.X_(i)&&(r=!0);e.z_=i}}r&&Rs(n)}function Os(t,e,n){const r=O(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Rs(t){t.Y_.forEach((t=>{t.next()}))}var Ls,Ps;(Ps=Ls||(Ls={})).ea="default",Ps.Cache="cache";class Fs{constructor(t,e,n){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new ks(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==e;return(!this.options._a||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}ia(t){if(t.docChanges.length>0)return!0;const e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}oa(t){t=ks.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==Ls.Cache}}class Vs{constructor(t){this.key=t}}class Us{constructor(t){this.key=t}}class js{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ln(),this.mutatedKeys=ln(),this.Aa=Xe(t),this.Ra=new Ts(this.Aa)}get Va(){return this.Ta}ma(t,e){const n=e?e.fa:new Ds,r=e?e.Ra:this.Ra;let i=e?e.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,u="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((t,e)=>{const c=r.get(t),l=Ke(this.query,e)?e:null,h=!!c&&this.mutatedKeys.has(c.key),f=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let d=!1;c&&l?c.data.isEqual(l.data)?h!==f&&(n.track({type:3,doc:l}),d=!0):this.ga(c,l)||(n.track({type:2,doc:l}),d=!0,(a&&this.Aa(l,a)>0||u&&this.Aa(l,u)<0)&&(o=!0)):!c&&l?(n.track({type:0,doc:l}),d=!0):c&&!l&&(n.track({type:1,doc:c}),d=!0,(a||u)&&(o=!0)),d&&(l?(s=s.add(l),i=f?i.add(t):i.delete(t)):(s=s.delete(t),i=i.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{Ra:s,fa:n,ns:o,mutatedKeys:i}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){const i=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const s=t.fa.G_();s.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return M()}};return n(t)-n(e)}(t.type,e.type)||this.Aa(t.doc,e.doc))),this.pa(n),r=null!=r&&r;const o=e&&!r?this.ya():[],a=0===this.da.size&&this.current&&!r?1:0,u=a!==this.Ea;return this.Ea=a,0!==s.length||u?{snapshot:new ks(this.query,t.Ra,i,s,t.mutatedKeys,0===a,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ds,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=ln(),this.Ra.forEach((t=>{this.Sa(t.key)&&(this.da=this.da.add(t.key))}));const e=[];return t.forEach((t=>{this.da.has(t)||e.push(new Us(t))})),this.da.forEach((n=>{t.has(n)||e.push(new Vs(n))})),e}ba(t){this.Ta=t.Ts,this.da=ln();const e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return ks.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Bs{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Ys{constructor(t){this.key=t,this.va=!1}}class qs{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new $e((t=>Ge(t)),We),this.Ma=new Map,this.xa=new Set,this.Oa=new Tt(et.comparator),this.Na=new Map,this.La=new oi,this.Ba={},this.ka=new Map,this.qa=Zr.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function zs(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=ho(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Gs(r,e,n,!0),i}async function Ws(t,e){const n=ho(t);await Gs(n,e,!0,!1)}async function Gs(t,e,n,r){const i=await Ti(t.localStore,Be(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await Hs(t,e,s,"current"===o,i.resumeToken)),t.isPrimaryClient&&n&&Qi(t.remoteStore,i),a}async function Hs(t,e,n,r,i){t.Ka=(e,n,r)=>async function(t,e,n,r){let i=e.view.ma(n);i.ns&&(i=await ki(t.localStore,e.query,!1).then((t=>{let{documents:n}=t;return e.view.ma(n,i)})));const s=r&&r.targetChanges.get(e.targetId),o=r&&null!=r.targetMismatches.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,s,o);return so(t,e.targetId,a.wa),a.snapshot}(t,e,n,r);const s=await ki(t.localStore,e,!0),o=new js(e,s.Ts),a=o.ma(s.documents),u=or.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=o.applyChanges(a,t.isPrimaryClient,u);so(t,n,c.wa);const l=new Bs(e,n,o);return t.Fa.set(e,l),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function Ks(t,e,n){const r=O(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter((t=>!We(t,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Di(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Xi(r.remoteStore,i.targetId),ro(r,i.targetId)})).catch(ct)):(ro(r,i.targetId),await Di(r.localStore,i.targetId,!0))}async function Qs(t,e){const n=O(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Xi(n.remoteStore,r.targetId))}async function Xs(t,e){const n=O(t);try{const t=await function(t,e){const n=O(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];e.targetChanges.forEach(((s,a)=>{const u=i.get(a);if(!u)return;o.push(n.Ur.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.Ur.addMatchingKeys(t,s.addedDocuments,a))));let c=u.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?c=c.withResumeToken(Mt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(u,c,s)&&o.push(n.Ur.updateTargetData(t,c))}));let a=tn(),u=ln();if(e.documentUpdates.forEach((r=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),o.push(Si(t,s,e.documentUpdates).next((t=>{a=t.Ps,u=t.Is}))),!r.isEqual(X.min())){const e=n.Ur.getLastRemoteSnapshotVersion(t).next((e=>n.Ur.setTargetsMetadata(t,t.currentSequenceNumber,r)));o.push(e)}return lt.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,u))).next((()=>a))})).then((t=>(n.os=i,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const r=n.Na.get(e);r&&(x(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.va=!0:t.modifiedDocuments.size>0?x(r.va):t.removedDocuments.size>0&&(x(r.va),r.va=!1))})),await uo(n,t,e)}catch(t){await ct(t)}}function Js(t,e,n){const r=O(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.Fa.forEach(((n,r)=>{const i=r.view.Z_(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=O(t);n.onlineState=e;let r=!1;n.queries.forEach(((t,n)=>{for(const i of n.j_)i.Z_(e)&&(r=!0)})),r&&Rs(n)}(r.eventManager,e),t.length&&r.Ca.d_(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $s(t,e,n){const r=O(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let t=new Tt(et.comparator);t=t.insert(s,ae.newNoDocument(s,X.min()));const n=ln().add(s),i=new sr(X.min(),new Map,new Tt(H),t,n);await Xs(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(e),ao(r)}else await Di(r.localStore,e,!1).then((()=>ro(r,e,n))).catch(ct)}async function Zs(t,e){const n=O(t),r=e.batch.batchId;try{const t=await function(t,e){const n=O(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const r=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){const i=n.batch,s=i.keys();let o=lt.resolve();return s.forEach((t=>{o=o.next((()=>r.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);x(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),r.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,i)))}(n,t,e,i).next((()=>i.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=ln();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(n.localStore,e);no(n,r,null),eo(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await uo(n,t)}catch(t){await ct(t)}}async function to(t,e,n){const r=O(t);try{const t=await function(t,e){const n=O(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let r;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(x(null!==e),r=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,r))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(r.localStore,e);no(r,e,n),eo(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await uo(r,t)}catch(n){await ct(n)}}function eo(t,e){(t.ka.get(e)||[]).forEach((t=>{t.resolve()})),t.ka.delete(e)}function no(t,e,n){const r=O(t);let i=r.Ba[r.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ro(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((e=>{t.La.containsKey(e)||io(t,e)}))}function io(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);null!==n&&(Xi(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ao(t))}function so(t,e,n){for(const r of n)r instanceof Vs?(t.La.addReference(r.key,e),oo(t,r)):r instanceof Us?(I("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||io(t,r.key)):M()}function oo(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(I("SyncEngine","New document in limbo: "+n),t.xa.add(r),ao(t))}function ao(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new et($.fromString(e)),r=t.qa.next();t.Na.set(r,new Ys(n)),t.Oa=t.Oa.insert(n,r),Qi(t.remoteStore,new Gr(Be(Fe(n.path)),r,"TargetPurposeLimboResolution",dt.oe))}}async function uo(t,e,n){const r=O(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach(((t,a)=>{o.push(r.Ka(a,e,n).then((t=>{var e;if((t||n)&&r.isPrimaryClient){const i=t?!t.fromCache:null===(e=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===e?void 0:e.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(t){i.push(t);const e=gi.Wi(a.targetId,t);s.push(e)}})))})),await Promise.all(o),r.Ca.d_(i),await async function(t,e){const n=O(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>lt.forEach(e,(e=>lt.forEach(e.$i,(r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>lt.forEach(e.Ui,(r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!ft(t))throw t;I("LocalStore","Failed to update sequence numbers: "+t)}for(const r of e){const t=r.targetId;if(!r.fromCache){const e=n.os.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(t,i)}}}(r.localStore,s))}async function co(t,e){const n=O(t);if(!n.currentUser.isEqual(e)){I("SyncEngine","User change. New user:",e.toKey());const t=await wi(n.localStore,e);n.currentUser=e,function(t,e){t.ka.forEach((t=>{t.forEach((t=>{t.reject(new L(R.CANCELLED,e))}))})),t.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await uo(n,t.hs)}}function lo(t,e){const n=O(t),r=n.Na.get(e);if(r&&r.va)return ln().add(r.key);{let t=ln();const r=n.Ma.get(e);if(!r)return t;for(const e of r){const r=n.Fa.get(e);t=t.unionWith(r.view.Va)}return t}}function ho(t){const e=O(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xs.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lo.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$s.bind(null,e),e.Ca.d_=xs.bind(null,e.eventManager),e.Ca.$a=Os.bind(null,e.eventManager),e}function fo(t){const e=O(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Zs.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=to.bind(null,e),e}class po{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Ui(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return _i(this.persistence,new yi,t.initialUser,this.serializer)}createPersistence(t){return new fi(pi.Zr,this.serializer)}createSharedClientState(t){return new Ai}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class go{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Js(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=co.bind(null,this.syncEngine),await _s(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Cs}createDatastore(t){const e=Ui(t.databaseInfo.databaseId),n=function(t){return new Fi(t)}(t.databaseInfo);return function(t,e,n,r){return new zi(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,r,i){return new Gi(t,e,n,r,i)}(this.localStore,this.datastore,t.asyncQueue,(t=>Js(this.syncEngine,t,0)),Mi.D()?new Mi:new Ni)}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){const a=new qs(t,e,n,r,i,s);return o&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(t){const e=O(t);I("RemoteStore","RemoteStore shutting down."),e.L_.add(5),await Ki(e),e.k_.shutdown(),e.q_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate(),null===(e=this.eventManager)||void 0===e||e.terminate()}}class mo{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ga(this.observer.next,t)}error(t){this.observer.error?this.Ga(this.observer.error,t):C("Uncaught Error in snapshot listener:",t.toString())}za(){this.muted=!0}Ga(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class yo{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=E.UNAUTHENTICATED,this.clientId=G.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{I("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(I("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new L(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new P;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Es(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function vo(t,e){t.asyncQueue.verifyOperationInProgress(),I("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async t=>{r.isEqual(t)||(await wi(e.localStore,t),r=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function _o(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bo(t);I("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>vs(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>vs(e.remoteStore,n))),t._onlineComponents=e}function wo(t){return"FirebaseError"===t.name?t.code===R.FAILED_PRECONDITION||t.code===R.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}async function bo(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){I("FirestoreClient","Using user provided OfflineComponentProvider");try{await vo(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!wo(n))throw n;A("Error using user provided cache. Falling back to memory cache: "+n),await vo(t,new po)}}else I("FirestoreClient","Using default OfflineComponentProvider"),await vo(t,new po);return t._offlineComponents}async function So(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(I("FirestoreClient","Using user provided OnlineComponentProvider"),await _o(t,t._uninitializedComponentsProvider._online)):(I("FirestoreClient","Using default OnlineComponentProvider"),await _o(t,new go))),t._onlineComponents}function Eo(t){return So(t).then((t=>t.syncEngine))}async function To(t){const e=await So(t),n=e.eventManager;return n.onListen=zs.bind(null,e.syncEngine),n.onUnlisten=Ks.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Ws.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Qs.bind(null,e.syncEngine),n}function Do(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new P;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const s=new mo({next:s=>{e.enqueueAndForget((()=>Ms(t,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new L(R.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new L(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:t=>i.reject(t)}),o=new Fs(Fe(n.path),s,{includeMetadataChanges:!0,_a:!0});return Ns(t,o)}(await To(t),t.asyncQueue,e,n,r))),r.promise}function ko(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new P;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const s=new mo({next:n=>{e.enqueueAndForget((()=>Ms(t,o))),n.fromCache&&"server"===r.source?i.reject(new L(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new Fs(n,s,{includeMetadataChanges:!0,_a:!0});return Ns(t,o)}(await To(t),t.asyncQueue,e,n,r))),r.promise}function Io(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Co=new Map;function Ao(t,e,n){if(!n)throw new L(R.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function No(t){if(!et.isDocumentKey(t))throw new L(R.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function Mo(t){if(et.isDocumentKey(t))throw new L(R.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function xo(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?"a custom ".concat(e," object"):"an object"}}return"function"==typeof t?"a function":M()}function Oo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xo(t);throw new L(R.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}}return t}class Ro{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new L(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new L(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,r){if(!0===e&&!0===r)throw new L(R.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Io(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new L(R.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (must not be NaN)"));if(t.timeoutSeconds<5)throw new L(R.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (minimum allowed value is 5)"));if(t.timeoutSeconds>30)throw new L(R.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Lo{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ro({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new L(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new L(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ro(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new V;switch(t.type){case"firstParty":return new Y(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new L(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Co.get(t);e&&(I("ComponentProvider","Removing Datastore"),Co.delete(t),e.terminate())}(this),Promise.resolve()}}class Po{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Po(this.firestore,t,this._query)}}class Fo{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Fo(this.firestore,t,this._key)}}class Vo extends Po{constructor(t,e,n){super(t,e,Fe(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Fo(this.firestore,null,new et(t))}withConverter(t){return new Vo(this.firestore,t,this._path)}}function Uo(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(t=(0,u.Ku)(t),Ao("collection","path",e),t instanceof Lo){const n=$.fromString(e,...r);return Mo(n),new Vo(t,null,n)}{if(!(t instanceof Fo||t instanceof Vo))throw new L(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child($.fromString(e,...r));return Mo(n),new Vo(t.firestore,null,n)}}function jo(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(t=(0,u.Ku)(t),1===arguments.length&&(e=G.newId()),Ao("doc","path",e),t instanceof Lo){const n=$.fromString(e,...r);return No(n),new Fo(t,null,new et(n))}{if(!(t instanceof Fo||t instanceof Vo))throw new L(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child($.fromString(e,...r));return No(n),new Fo(t.firestore,t instanceof Vo?t.converter:null,new et(n))}}class Bo{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new ji(this,"async_queue_retry"),this.Eu=()=>{const t=Vi();t&&I("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};const t=Vi();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.du(),this.Au(t)}enterRestrictedMode(t){if(!this.cu){this.cu=!0,this.Iu=t||!1;const e=Vi();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Eu)}}enqueue(t){if(this.du(),this.cu)return new Promise((()=>{}));const e=new P;return this.Au((()=>this.cu&&this.Iu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.uu.push(t),this.Ru())))}async Ru(){if(0!==this.uu.length){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(t){if(!ft(t))throw t;I("AsyncQueue","Operation failed with retryable error: "+t)}this.uu.length>0&&this.t_.Go((()=>this.Ru()))}}Au(t){const e=this.au.then((()=>(this.Pu=!0,t().catch((t=>{this.hu=t,this.Pu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw C("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.Pu=!1,t))))));return this.au=e,e}enqueueAfterDelay(t,e,n){this.du(),this.Tu.indexOf(t)>-1&&(e=0);const r=Ss.createAndSchedule(this,t,e,n,(t=>this.Vu(t)));return this.lu.push(r),r}du(){this.hu&&M()}verifyOperationInProgress(){}async mu(){let t;do{t=this.au,await t}while(t!==this.au)}fu(t){for(const e of this.lu)if(e.timerId===t)return!0;return!1}gu(t){return this.mu().then((()=>{this.lu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.lu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.mu()}))}pu(t){this.Tu.push(t)}Vu(t){const e=this.lu.indexOf(t);this.lu.splice(e,1)}}class Yo extends Lo{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new Bo,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Wo(this),this._firestoreClient.terminate()}}function qo(t,e){const n="object"==typeof t?t:(0,s.Sx)(),r="string"==typeof t?t:e||"(default)",i=(0,s.j6)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const t=(0,u.yU)("firestore");t&&function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(t=Oo(t,Lo))._getSettings(),o="".concat(e,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&A("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=E.MOCK_USER;else{e=(0,u.Fy)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new L(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new E(s)}t._authCredentials=new U(new F(e,n))}}(i,...t)}return i}function zo(t){return t._firestoreClient||Wo(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Wo(t){var e,n,r;const i=t._freezeSettings(),s=function(t,e,n,r){return new Ut(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Io(r.experimentalLongPollingOptions),r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new yo(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class Go{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Go(Mt.fromBase64String(t))}catch(t){throw new L(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Go(Mt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Ho{constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let r=0;r<e.length;++r)if(0===e[r].length)throw new L(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Ko{constructor(t){this._methodName=t}}class Qo{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new L(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new L(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return H(this._lat,t._lat)||H(this._long,t._long)}}class Xo{constructor(t){this._values=(t||[]).map((t=>t))}toArray(){return this._values.map((t=>t))}isEqual(t){return function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(this._values,t._values)}}const Jo=/^__.*__$/;class $o{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Vn(t,this.data,this.fieldMask,e,this.fieldTransforms):new Fn(t,this.data,e,this.fieldTransforms)}}class Zo{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Vn(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function ta(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw M()}}class ea{constructor(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.yu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(t){return new ea(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Su({path:n,Du:!1});return r.vu(t),r}Cu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Su({path:n,Du:!1});return r.yu(),r}Fu(t){return this.Su({path:void 0,Du:!0})}Mu(t){return ma(t,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}yu(){if(this.path)for(let t=0;t<this.path.length;t++)this.vu(this.path.get(t))}vu(t){if(0===t.length)throw this.Mu("Document fields must not be empty");if(ta(this.wu)&&Jo.test(t))throw this.Mu('Document fields cannot begin and end with "__"')}}class na{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Ui(t)}Nu(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ea({wu:t,methodName:e,Ou:n,path:tt.emptyPath(),Du:!1,xu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ra(t){const e=t._freezeSettings(),n=Ui(t._databaseId);return new na(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ia(t,e,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);fa("Data must be an object, but it was:",o,r);const a=la(r,o);let u,c;if(s.merge)u=new At(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const r of s.mergeFields){const i=da(e,r,n);if(!o.contains(i))throw new L(R.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));ya(t,i)||t.push(i)}u=new At(t),c=o.fieldTransforms.filter((t=>u.covers(t.field)))}else u=null,c=o.fieldTransforms;return new $o(new se(a),u,c)}class sa extends Ko{_toFieldTransform(t){if(2!==t.wu)throw 1===t.wu?t.Mu("".concat(this._methodName,"() can only appear at the top level of your update data")):t.Mu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof sa}}function oa(t,e,n,r){const i=t.Nu(1,e,n);fa("Data must be an object, but it was:",i,r);const s=[],o=se.empty();St(r,((t,r)=>{const a=ga(e,t,n);r=(0,u.Ku)(r);const c=i.Cu(a);if(r instanceof sa)s.push(a);else{const t=ca(r,c);null!=t&&(s.push(a),o.set(a,t))}}));const a=new At(s);return new Zo(o,a,i.fieldTransforms)}function aa(t,e,n,r,i,s){const o=t.Nu(1,e,n),a=[da(e,r,n)],c=[i];if(s.length%2!=0)throw new L(R.INVALID_ARGUMENT,"Function ".concat(e,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let u=0;u<s.length;u+=2)a.push(da(e,s[u])),c.push(s[u+1]);const l=[],h=se.empty();for(let d=a.length-1;d>=0;--d)if(!ya(l,a[d])){const t=a[d];let e=c[d];e=(0,u.Ku)(e);const n=o.Cu(t);if(e instanceof sa)l.push(t);else{const r=ca(e,n);null!=r&&(l.push(t),h.set(t,r))}}const f=new At(l);return new Zo(h,f,o.fieldTransforms)}function ua(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ca(n,t.Nu(r?4:3,e))}function ca(t,e){if(ha(t=(0,u.Ku)(t)))return fa("Unsupported field value:",e,t),la(t,e);if(t instanceof Ko)return function(t,e){if(!ta(e.wu))throw e.Mu("".concat(t._methodName,"() can only be used with update() and set()"));if(!e.path)throw e.Mu("".concat(t._methodName,"() is not currently supported inside arrays"));const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&4!==e.wu)throw e.Mu("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const i of t){let t=ca(i,e.Fu(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,u.Ku)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return gn(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Q.fromDate(t);return{timestampValue:_r(e.serializer,n)}}if(t instanceof Q){const n=new Q(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:_r(e.serializer,n)}}if(t instanceof Qo)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Go)return{bytesValue:wr(e.serializer,t._byteString)};if(t instanceof Fo){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Mu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Er(t.firestore._databaseId||e.databaseId,t._key.path)}}if(t instanceof Xo)return function(t,e){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:t.toArray().map((t=>{if("number"!=typeof t)throw e.Mu("VectorValues must only contain numeric values.");return dn(e.serializer,t)}))}}}}}}(t,e);throw e.Mu("Unsupported field value: ".concat(xo(t)))}(t,e)}function la(t,e){const n={};return Et(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):St(t,((t,r)=>{const i=ca(r,e.bu(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function ha(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Q||t instanceof Qo||t instanceof Go||t instanceof Fo||t instanceof Ko||t instanceof Xo)}function fa(t,e,n){if(!ha(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=xo(n);throw"an object"===r?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function da(t,e,n){if((e=(0,u.Ku)(e))instanceof Ho)return e._internalPath;if("string"==typeof e)return ga(t,e);throw ma("Field path arguments must be of type string or ",t,!1,void 0,n)}const pa=new RegExp("[~\\*/\\[\\]]");function ga(t,e,n){if(e.search(pa)>=0)throw ma("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,n);try{return new Ho(...e.split("."))._internalPath}catch(r){throw ma("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,n)}}function ma(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(e,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new L(R.INVALID_ARGUMENT,a+t+u)}function ya(t,e){return t.some((t=>t.isEqual(e)))}class va{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Fo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new _a(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(wa("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class _a extends va{data(){return super.data()}}function wa(t,e){return"string"==typeof e?ga(t,e):e instanceof Ho?e._internalPath:e._delegate._internalPath}function ba(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new L(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sa{}class Ea extends Sa{}function Ta(t,e){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];e instanceof Sa&&n.push(e),n=n.concat(i),function(t){const e=t.filter((t=>t instanceof Ia)).length,n=t.filter((t=>t instanceof Da)).length;if(e>1||e>0&&n>0)throw new L(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)t=o._apply(t);return t}class Da extends Ea{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new Da(t,e,n)}_apply(t){const e=this._parse(t);return xa(t._query,e),new Po(t.firestore,t.converter,qe(t._query,e))}_parse(t){const e=ra(t.firestore),n=function(t,e,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new L(R.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Ma(o,s);const e=[];for(const n of o)e.push(Na(r,t,n));a={arrayValue:{values:e}}}else a=Na(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Ma(o,s),a=ua(n,e,o,"in"===s||"not-in"===s);return pe.create(i,s,a)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value);return n}}function ka(t,e,n){const r=e,i=wa("where",t);return Da._create(i,r,n)}class Ia extends Sa{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Ia(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:ge.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const r=e.getFlattenedFilters();for(const i of r)xa(n,i),n=qe(n,i)}(t._query,e),new Po(t.firestore,t.converter,qe(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ca extends Ea{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Ca(t,e)}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new L(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new L(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new he(e,n)}(t._query,this._field,this._direction);return new Po(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new Le(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}function Aa(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=wa("orderBy",t);return Ca._create(n,e)}function Na(t,e,n){if("string"==typeof(n=(0,u.Ku)(n))){if(""===n)throw new L(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ue(e)&&-1!==n.indexOf("/"))throw new L(R.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=e.path.child($.fromString(n));if(!et.isDocumentKey(r))throw new L(R.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Xt(t,new et(r))}if(n instanceof Fo)return Xt(t,n._key);throw new L(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(xo(n),"."))}function Ma(t,e){if(!Array.isArray(t)||0===t.length)throw new L(R.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(e.toString(),"' filters."))}function xa(t,e){const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new L(R.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(e.op.toString(),"' filter.")):new L(R.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(e.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Oa{convertValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Yt(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Rt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Lt(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw M()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return St(t,((t,r)=>{n[t]=this.convertValue(r,e)})),n}convertVectorValue(t){var e,n,r;const i=null===(r=null===(n=null===(e=t.fields)||void 0===e?void 0:e.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((t=>Rt(t.doubleValue)));return new Xo(i)}convertGeoPoint(t){return new Qo(Rt(t.latitude),Rt(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Ft(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Vt(t));default:return null}}convertTimestamp(t){const e=Ot(t);return new Q(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=$.fromString(t);x(Wr(n));const r=new jt(n.get(1),n.get(3)),i=new et(n.popFirst(5));return r.isEqual(e)||C("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(e.projectId,"/").concat(e.database,") instead.")),i}}function Ra(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class La{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Pa extends va{constructor(t,e,n,r,i,s){super(t,e,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const e=new Fa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(wa("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Fa extends Pa{data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(t)}}class Va{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new La(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Fa(this._firestore,this._userDataWriter,n.key,n,new La(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const t=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new L(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const r=new Fa(t._firestore,t._userDataWriter,n.doc.key,n.doc,new La(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const r=new Fa(t._firestore,t._userDataWriter,e.doc.key,e.doc,new La(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,s=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:Ua(e.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Ua(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return M()}}function ja(t){t=Oo(t,Fo);const e=Oo(t.firestore,Yo);return Do(zo(e),t._key).then((n=>Ga(e,t,n)))}class Ba extends Oa{constructor(t){super(),this.firestore=t}convertBytes(t){return new Go(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Fo(this.firestore,null,e)}}function Ya(t){t=Oo(t,Po);const e=Oo(t.firestore,Yo),n=zo(e),r=new Ba(e);return ba(t._query),ko(n,t._query).then((n=>new Va(e,r,t,n)))}function qa(t,e,n){t=Oo(t,Fo);const r=Oo(t.firestore,Yo),i=Ra(t.converter,e,n);return Wa(r,[ia(ra(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,An.none())])}function za(t,e,n){t=Oo(t,Fo);const r=Oo(t.firestore,Yo),i=ra(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return s="string"==typeof(e=(0,u.Ku)(e))||e instanceof Ho?aa(i,"updateDoc",t._key,e,n,a):oa(i,"updateDoc",t._key,e),Wa(r,[s.toMutation(t._key,An.exists(!0))])}function Wa(t,e){return function(t,e){const n=new P;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const r=fo(t);try{const t=await function(t,e){const n=O(t),r=Q.now(),i=e.reduce(((t,e)=>t.add(e.key)),ln());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=tn(),u=ln();return n.cs.getEntries(t,i).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(u=u.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((i=>{s=i;const o=[];for(const t of e){const e=Ln(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new Vn(t.key,e,oe(e.value.mapValue),An.exists(!0)))}return n.mutationQueue.addMutationBatch(t,r,o,e)})).next((e=>{o=e;const r=e.applyToLocalDocumentSet(s,u);return n.documentOverlayCache.saveOverlays(t,e.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:rn(s)})))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let r=t.Ba[t.currentUser.toKey()];r||(r=new Tt(H)),r=r.insert(e,n),t.Ba[t.currentUser.toKey()]=r}(r,t.batchId,n),await uo(r,t.changes),await cs(r.remoteStore)}catch(t){const e=Es(t,"Failed to persist write");n.reject(e)}}(await Eo(t),e,n))),n.promise}(zo(t),e)}function Ga(t,e,n){const r=n.docs.get(e._key),i=new Ba(t);return new Pa(t,i,e._key,r,new La(n.hasPendingWrites,n.fromCache),e.converter)}new WeakMap;!function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(t){T=t}(s.MF),(0,s.om)(new o.uA("firestore",((t,n)=>{let{instanceIdentifier:r,options:i}=n;const s=t.getProvider("app").getImmediate(),o=new Yo(new j(t.getProvider("auth-internal")),new z(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new L(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jt(t.options.projectId,e)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),(0,s.KO)(S,"4.7.0",t),(0,s.KO)(S,"4.7.0","esm2017")}()}}]);